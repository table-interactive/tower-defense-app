(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function i(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(l){if(l.ep)return;l.ep=!0;const o=i(l);fetch(l.href,o)}})();var pu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function x_(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function nT(s){if(Object.prototype.hasOwnProperty.call(s,"__esModule"))return s;var t=s.default;if(typeof t=="function"){var i=function n(){var l=!1;try{l=this instanceof n}catch{}return l?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(s).forEach(function(n){var l=Object.getOwnPropertyDescriptor(s,n);Object.defineProperty(i,n,l.get?l:{enumerable:!0,get:function(){return s[n]}})}),i}var Wc={exports:{}},rl={};var s0;function sT(){if(s0)return rl;s0=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(n,l,o){var h=null;if(o!==void 0&&(h=""+o),l.key!==void 0&&(h=""+l.key),"key"in l){o={};for(var c in l)c!=="key"&&(o[c]=l[c])}else o=l;return l=o.ref,{$$typeof:s,type:n,key:h,ref:l!==void 0?l:null,props:o}}return rl.Fragment=t,rl.jsx=i,rl.jsxs=i,rl}var a0;function aT(){return a0||(a0=1,Wc.exports=sT()),Wc.exports}var ge=aT(),$c={exports:{}},Ft={};var l0;function lT(){if(l0)return Ft;l0=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),h=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),x=Symbol.iterator;function _(E){return E===null||typeof E!="object"?null:(E=x&&E[x]||E["@@iterator"],typeof E=="function"?E:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,A={};function C(E,I,P){this.props=E,this.context=I,this.refs=A,this.updater=P||b}C.prototype.isReactComponent={},C.prototype.setState=function(E,I){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,I,"setState")},C.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function U(){}U.prototype=C.prototype;function O(E,I,P){this.props=E,this.context=I,this.refs=A,this.updater=P||b}var L=O.prototype=new U;L.constructor=O,w(L,C.prototype),L.isPureReactComponent=!0;var B=Array.isArray;function H(){}var D={H:null,A:null,T:null,S:null},q=Object.prototype.hasOwnProperty;function rt(E,I,P){var V=P.ref;return{$$typeof:s,type:E,key:I,ref:V!==void 0?V:null,props:P}}function at(E,I){return rt(E.type,I,E.props)}function it(E){return typeof E=="object"&&E!==null&&E.$$typeof===s}function k(E){var I={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(P){return I[P]})}var Z=/\/+/g;function J(E,I){return typeof E=="object"&&E!==null&&E.key!=null?k(""+E.key):I.toString(36)}function dt(E){switch(E.status){case"fulfilled":return E.value;case"rejected":throw E.reason;default:switch(typeof E.status=="string"?E.then(H,H):(E.status="pending",E.then(function(I){E.status==="pending"&&(E.status="fulfilled",E.value=I)},function(I){E.status==="pending"&&(E.status="rejected",E.reason=I)})),E.status){case"fulfilled":return E.value;case"rejected":throw E.reason}}throw E}function T(E,I,P,V,tt){var lt=typeof E;(lt==="undefined"||lt==="boolean")&&(E=null);var ot=!1;if(E===null)ot=!0;else switch(lt){case"bigint":case"string":case"number":ot=!0;break;case"object":switch(E.$$typeof){case s:case t:ot=!0;break;case g:return ot=E._init,T(ot(E._payload),I,P,V,tt)}}if(ot)return tt=tt(E),ot=V===""?"."+J(E,0):V,B(tt)?(P="",ot!=null&&(P=ot.replace(Z,"$&/")+"/"),T(tt,I,P,"",function(ut){return ut})):tt!=null&&(it(tt)&&(tt=at(tt,P+(tt.key==null||E&&E.key===tt.key?"":(""+tt.key).replace(Z,"$&/")+"/")+ot)),I.push(tt)),1;ot=0;var ft=V===""?".":V+":";if(B(E))for(var ct=0;ct<E.length;ct++)V=E[ct],lt=ft+J(V,ct),ot+=T(V,I,P,lt,tt);else if(ct=_(E),typeof ct=="function")for(E=ct.call(E),ct=0;!(V=E.next()).done;)V=V.value,lt=ft+J(V,ct++),ot+=T(V,I,P,lt,tt);else if(lt==="object"){if(typeof E.then=="function")return T(dt(E),I,P,V,tt);throw I=String(E),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return ot}function R(E,I,P){if(E==null)return E;var V=[],tt=0;return T(E,V,"","",function(lt){return I.call(P,lt,tt++)}),V}function M(E){if(E._status===-1){var I=E._result;I=I(),I.then(function(P){(E._status===0||E._status===-1)&&(E._status=1,E._result=P)},function(P){(E._status===0||E._status===-1)&&(E._status=2,E._result=P)}),E._status===-1&&(E._status=0,E._result=I)}if(E._status===1)return E._result.default;throw E._result}var z=typeof reportError=="function"?reportError:function(E){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof E=="object"&&E!==null&&typeof E.message=="string"?String(E.message):String(E),error:E});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",E);return}console.error(E)},N={map:R,forEach:function(E,I,P){R(E,function(){I.apply(this,arguments)},P)},count:function(E){var I=0;return R(E,function(){I++}),I},toArray:function(E){return R(E,function(I){return I})||[]},only:function(E){if(!it(E))throw Error("React.Children.only expected to receive a single React element child.");return E}};return Ft.Activity=y,Ft.Children=N,Ft.Component=C,Ft.Fragment=i,Ft.Profiler=l,Ft.PureComponent=O,Ft.StrictMode=n,Ft.Suspense=p,Ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ft.__COMPILER_RUNTIME={__proto__:null,c:function(E){return D.H.useMemoCache(E)}},Ft.cache=function(E){return function(){return E.apply(null,arguments)}},Ft.cacheSignal=function(){return null},Ft.cloneElement=function(E,I,P){if(E==null)throw Error("The argument must be a React element, but you passed "+E+".");var V=w({},E.props),tt=E.key;if(I!=null)for(lt in I.key!==void 0&&(tt=""+I.key),I)!q.call(I,lt)||lt==="key"||lt==="__self"||lt==="__source"||lt==="ref"&&I.ref===void 0||(V[lt]=I[lt]);var lt=arguments.length-2;if(lt===1)V.children=P;else if(1<lt){for(var ot=Array(lt),ft=0;ft<lt;ft++)ot[ft]=arguments[ft+2];V.children=ot}return rt(E.type,tt,V)},Ft.createContext=function(E){return E={$$typeof:h,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null},E.Provider=E,E.Consumer={$$typeof:o,_context:E},E},Ft.createElement=function(E,I,P){var V,tt={},lt=null;if(I!=null)for(V in I.key!==void 0&&(lt=""+I.key),I)q.call(I,V)&&V!=="key"&&V!=="__self"&&V!=="__source"&&(tt[V]=I[V]);var ot=arguments.length-2;if(ot===1)tt.children=P;else if(1<ot){for(var ft=Array(ot),ct=0;ct<ot;ct++)ft[ct]=arguments[ct+2];tt.children=ft}if(E&&E.defaultProps)for(V in ot=E.defaultProps,ot)tt[V]===void 0&&(tt[V]=ot[V]);return rt(E,lt,tt)},Ft.createRef=function(){return{current:null}},Ft.forwardRef=function(E){return{$$typeof:c,render:E}},Ft.isValidElement=it,Ft.lazy=function(E){return{$$typeof:g,_payload:{_status:-1,_result:E},_init:M}},Ft.memo=function(E,I){return{$$typeof:m,type:E,compare:I===void 0?null:I}},Ft.startTransition=function(E){var I=D.T,P={};D.T=P;try{var V=E(),tt=D.S;tt!==null&&tt(P,V),typeof V=="object"&&V!==null&&typeof V.then=="function"&&V.then(H,z)}catch(lt){z(lt)}finally{I!==null&&P.types!==null&&(I.types=P.types),D.T=I}},Ft.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ft.use=function(E){return D.H.use(E)},Ft.useActionState=function(E,I,P){return D.H.useActionState(E,I,P)},Ft.useCallback=function(E,I){return D.H.useCallback(E,I)},Ft.useContext=function(E){return D.H.useContext(E)},Ft.useDebugValue=function(){},Ft.useDeferredValue=function(E,I){return D.H.useDeferredValue(E,I)},Ft.useEffect=function(E,I){return D.H.useEffect(E,I)},Ft.useEffectEvent=function(E){return D.H.useEffectEvent(E)},Ft.useId=function(){return D.H.useId()},Ft.useImperativeHandle=function(E,I,P){return D.H.useImperativeHandle(E,I,P)},Ft.useInsertionEffect=function(E,I){return D.H.useInsertionEffect(E,I)},Ft.useLayoutEffect=function(E,I){return D.H.useLayoutEffect(E,I)},Ft.useMemo=function(E,I){return D.H.useMemo(E,I)},Ft.useOptimistic=function(E,I){return D.H.useOptimistic(E,I)},Ft.useReducer=function(E,I,P){return D.H.useReducer(E,I,P)},Ft.useRef=function(E){return D.H.useRef(E)},Ft.useState=function(E){return D.H.useState(E)},Ft.useSyncExternalStore=function(E,I,P){return D.H.useSyncExternalStore(E,I,P)},Ft.useTransition=function(){return D.H.useTransition()},Ft.version="19.2.0",Ft}var o0;function np(){return o0||(o0=1,$c.exports=lT()),$c.exports}var hn=np(),Zc={exports:{}},nl={},Kc={exports:{}},Qc={};var u0;function oT(){return u0||(u0=1,(function(s){function t(T,R){var M=T.length;T.push(R);t:for(;0<M;){var z=M-1>>>1,N=T[z];if(0<l(N,R))T[z]=R,T[M]=N,M=z;else break t}}function i(T){return T.length===0?null:T[0]}function n(T){if(T.length===0)return null;var R=T[0],M=T.pop();if(M!==R){T[0]=M;t:for(var z=0,N=T.length,E=N>>>1;z<E;){var I=2*(z+1)-1,P=T[I],V=I+1,tt=T[V];if(0>l(P,M))V<N&&0>l(tt,P)?(T[z]=tt,T[V]=M,z=V):(T[z]=P,T[I]=M,z=I);else if(V<N&&0>l(tt,M))T[z]=tt,T[V]=M,z=V;else break t}}return R}function l(T,R){var M=T.sortIndex-R.sortIndex;return M!==0?M:T.id-R.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;s.unstable_now=function(){return o.now()}}else{var h=Date,c=h.now();s.unstable_now=function(){return h.now()-c}}var p=[],m=[],g=1,y=null,x=3,_=!1,b=!1,w=!1,A=!1,C=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function L(T){for(var R=i(m);R!==null;){if(R.callback===null)n(m);else if(R.startTime<=T)n(m),R.sortIndex=R.expirationTime,t(p,R);else break;R=i(m)}}function B(T){if(w=!1,L(T),!b)if(i(p)!==null)b=!0,H||(H=!0,k());else{var R=i(m);R!==null&&dt(B,R.startTime-T)}}var H=!1,D=-1,q=5,rt=-1;function at(){return A?!0:!(s.unstable_now()-rt<q)}function it(){if(A=!1,H){var T=s.unstable_now();rt=T;var R=!0;try{t:{b=!1,w&&(w=!1,U(D),D=-1),_=!0;var M=x;try{e:{for(L(T),y=i(p);y!==null&&!(y.expirationTime>T&&at());){var z=y.callback;if(typeof z=="function"){y.callback=null,x=y.priorityLevel;var N=z(y.expirationTime<=T);if(T=s.unstable_now(),typeof N=="function"){y.callback=N,L(T),R=!0;break e}y===i(p)&&n(p),L(T)}else n(p);y=i(p)}if(y!==null)R=!0;else{var E=i(m);E!==null&&dt(B,E.startTime-T),R=!1}}break t}finally{y=null,x=M,_=!1}R=void 0}}finally{R?k():H=!1}}}var k;if(typeof O=="function")k=function(){O(it)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,J=Z.port2;Z.port1.onmessage=it,k=function(){J.postMessage(null)}}else k=function(){C(it,0)};function dt(T,R){D=C(function(){T(s.unstable_now())},R)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(T){T.callback=null},s.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<T?Math.floor(1e3/T):5},s.unstable_getCurrentPriorityLevel=function(){return x},s.unstable_next=function(T){switch(x){case 1:case 2:case 3:var R=3;break;default:R=x}var M=x;x=R;try{return T()}finally{x=M}},s.unstable_requestPaint=function(){A=!0},s.unstable_runWithPriority=function(T,R){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var M=x;x=T;try{return R()}finally{x=M}},s.unstable_scheduleCallback=function(T,R,M){var z=s.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?z+M:z):M=z,T){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=M+N,T={id:g++,callback:R,priorityLevel:T,startTime:M,expirationTime:N,sortIndex:-1},M>z?(T.sortIndex=M,t(m,T),i(p)===null&&T===i(m)&&(w?(U(D),D=-1):w=!0,dt(B,M-z))):(T.sortIndex=N,t(p,T),b||_||(b=!0,H||(H=!0,k()))),T},s.unstable_shouldYield=at,s.unstable_wrapCallback=function(T){var R=x;return function(){var M=x;x=R;try{return T.apply(this,arguments)}finally{x=M}}}})(Qc)),Qc}var h0;function uT(){return h0||(h0=1,Kc.exports=oT()),Kc.exports}var Jc={exports:{}},Ye={};var c0;function hT(){if(c0)return Ye;c0=1;var s=np();function t(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)m+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var n={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function o(p,m,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:y==null?null:""+y,children:p,containerInfo:m,implementation:g}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Ye.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Ye.createPortal=function(p,m){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return o(p,m,null,g)},Ye.flushSync=function(p){var m=h.T,g=n.p;try{if(h.T=null,n.p=2,p)return p()}finally{h.T=m,n.p=g,n.d.f()}},Ye.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,n.d.C(p,m))},Ye.prefetchDNS=function(p){typeof p=="string"&&n.d.D(p)},Ye.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var g=m.as,y=c(g,m.crossOrigin),x=typeof m.integrity=="string"?m.integrity:void 0,_=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;g==="style"?n.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:y,integrity:x,fetchPriority:_}):g==="script"&&n.d.X(p,{crossOrigin:y,integrity:x,fetchPriority:_,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Ye.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var g=c(m.as,m.crossOrigin);n.d.M(p,{crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&n.d.M(p)},Ye.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var g=m.as,y=c(g,m.crossOrigin);n.d.L(p,g,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Ye.preloadModule=function(p,m){if(typeof p=="string")if(m){var g=c(m.as,m.crossOrigin);n.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else n.d.m(p)},Ye.requestFormReset=function(p){n.d.r(p)},Ye.unstable_batchedUpdates=function(p,m){return p(m)},Ye.useFormState=function(p,m,g){return h.H.useFormState(p,m,g)},Ye.useFormStatus=function(){return h.H.useHostTransitionStatus()},Ye.version="19.2.0",Ye}var f0;function cT(){if(f0)return Jc.exports;f0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Jc.exports=hT(),Jc.exports}var d0;function fT(){if(d0)return nl;d0=1;var s=uT(),t=np(),i=cT();function n(e){var r="https://react.dev/errors/"+e;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var r=e,a=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,(r.flags&4098)!==0&&(a=r.return),e=r.return;while(e)}return r.tag===3?a:null}function h(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function c(e){if(e.tag===31){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function p(e){if(o(e)!==e)throw Error(n(188))}function m(e){var r=e.alternate;if(!r){if(r=o(e),r===null)throw Error(n(188));return r!==e?null:e}for(var a=e,u=r;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(u=f.return,u!==null){a=u;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return p(f),e;if(d===u)return p(f),r;d=d.sibling}throw Error(n(188))}if(a.return!==u.return)a=f,u=d;else{for(var v=!1,S=f.child;S;){if(S===a){v=!0,a=f,u=d;break}if(S===u){v=!0,u=f,a=d;break}S=S.sibling}if(!v){for(S=d.child;S;){if(S===a){v=!0,a=d,u=f;break}if(S===u){v=!0,u=d,a=f;break}S=S.sibling}if(!v)throw Error(n(189))}}if(a.alternate!==u)throw Error(n(190))}if(a.tag!==3)throw Error(n(188));return a.stateNode.current===a?e:r}function g(e){var r=e.tag;if(r===5||r===26||r===27||r===6)return e;for(e=e.child;e!==null;){if(r=g(e),r!==null)return r;e=e.sibling}return null}var y=Object.assign,x=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),O=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),rt=Symbol.for("react.activity"),at=Symbol.for("react.memo_cache_sentinel"),it=Symbol.iterator;function k(e){return e===null||typeof e!="object"?null:(e=it&&e[it]||e["@@iterator"],typeof e=="function"?e:null)}var Z=Symbol.for("react.client.reference");function J(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Z?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case w:return"Fragment";case C:return"Profiler";case A:return"StrictMode";case B:return"Suspense";case H:return"SuspenseList";case rt:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case b:return"Portal";case O:return e.displayName||"Context";case U:return(e._context.displayName||"Context")+".Consumer";case L:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case D:return r=e.displayName||null,r!==null?r:J(e.type)||"Memo";case q:r=e._payload,e=e._init;try{return J(e(r))}catch{}}return null}var dt=Array.isArray,T=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M={pending:!1,data:null,method:null,action:null},z=[],N=-1;function E(e){return{current:e}}function I(e){0>N||(e.current=z[N],z[N]=null,N--)}function P(e,r){N++,z[N]=e.current,e.current=r}var V=E(null),tt=E(null),lt=E(null),ot=E(null);function ft(e,r){switch(P(lt,r),P(tt,e),P(V,null),r.nodeType){case 9:case 11:e=(e=r.documentElement)&&(e=e.namespaceURI)?Ry(e):0;break;default:if(e=r.tagName,r=r.namespaceURI)r=Ry(r),e=My(r,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}I(V),P(V,e)}function ct(){I(V),I(tt),I(lt)}function ut(e){e.memoizedState!==null&&P(ot,e);var r=V.current,a=My(r,e.type);r!==a&&(P(tt,e),P(V,a))}function yt(e){tt.current===e&&(I(V),I(tt)),ot.current===e&&(I(ot),Ja._currentValue=M)}var Tt,Mt;function Lt(e){if(Tt===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Tt=r&&r[1]||"",Mt=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Tt+e+Mt}var Et=!1;function _t(e,r){if(!e||Et)return"";Et=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var st=function(){throw Error()};if(Object.defineProperty(st.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(st,[])}catch(Q){var $=Q}Reflect.construct(e,[],st)}else{try{st.call()}catch(Q){$=Q}e.call(st.prototype)}}else{try{throw Error()}catch(Q){$=Q}(st=e())&&typeof st.catch=="function"&&st.catch(function(){})}}catch(Q){if(Q&&$&&typeof Q.stack=="string")return[Q.stack,$.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=u.DetermineComponentFrameRoot(),v=d[0],S=d[1];if(v&&S){var F=v.split(`
`),W=S.split(`
`);for(f=u=0;u<F.length&&!F[u].includes("DetermineComponentFrameRoot");)u++;for(;f<W.length&&!W[f].includes("DetermineComponentFrameRoot");)f++;if(u===F.length||f===W.length)for(u=F.length-1,f=W.length-1;1<=u&&0<=f&&F[u]!==W[f];)f--;for(;1<=u&&0<=f;u--,f--)if(F[u]!==W[f]){if(u!==1||f!==1)do if(u--,f--,0>f||F[u]!==W[f]){var et=`
`+F[u].replace(" at new "," at ");return e.displayName&&et.includes("<anonymous>")&&(et=et.replace("<anonymous>",e.displayName)),et}while(1<=u&&0<=f);break}}}finally{Et=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Lt(a):""}function oe(e,r){switch(e.tag){case 26:case 27:case 5:return Lt(e.type);case 16:return Lt("Lazy");case 13:return e.child!==r&&r!==null?Lt("Suspense Fallback"):Lt("Suspense");case 19:return Lt("SuspenseList");case 0:case 15:return _t(e.type,!1);case 11:return _t(e.type.render,!1);case 1:return _t(e.type,!0);case 31:return Lt("Activity");default:return""}}function ue(e){try{var r="",a=null;do r+=oe(e,a),a=e,e=e.return;while(e);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var ai=Object.prototype.hasOwnProperty,xt=s.unstable_scheduleCallback,Rt=s.unstable_cancelCallback,Ut=s.unstable_shouldYield,Bt=s.unstable_requestPaint,vt=s.unstable_now,pe=s.unstable_getCurrentPriorityLevel,Ur=s.unstable_ImmediatePriority,ua=s.unstable_UserBlockingPriority,rs=s.unstable_NormalPriority,bn=s.unstable_LowPriority,ns=s.unstable_IdlePriority,El=s.log,Gu=s.unstable_setDisableYieldValue,Tn=null,Ge=null;function li(e){if(typeof El=="function"&&Gu(e),Ge&&typeof Ge.setStrictMode=="function")try{Ge.setStrictMode(Tn,e)}catch{}}var j=Math.clz32?Math.clz32:re,K=Math.log,Zt=Math.LN2;function re(e){return e>>>=0,e===0?32:31-(K(e)/Zt|0)|0}var te=256,Pt=262144,oi=4194304;function We(e){var r=e&42;if(r!==0)return r;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ie(e,r,a){var u=e.pendingLanes;if(u===0)return 0;var f=0,d=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var S=u&134217727;return S!==0?(u=S&~d,u!==0?f=We(u):(v&=S,v!==0?f=We(v):a||(a=S&~e,a!==0&&(f=We(a))))):(S=u&~d,S!==0?f=We(S):v!==0?f=We(v):a||(a=u&~e,a!==0&&(f=We(a)))),f===0?0:r!==0&&r!==f&&(r&d)===0&&(d=f&-f,a=r&-r,d>=a||d===32&&(a&4194048)!==0)?r:f}function Qe(e,r){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&r)===0}function ha(e,r){switch(e){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ar(){var e=oi;return oi<<=1,(oi&62914560)===0&&(oi=4194304),e}function $e(e){for(var r=[],a=0;31>a;a++)r.push(e);return r}function Lr(e,r){e.pendingLanes|=r,r!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Al(e,r,a,u,f,d){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var S=e.entanglements,F=e.expirationTimes,W=e.hiddenUpdates;for(a=v&~a;0<a;){var et=31-j(a),st=1<<et;S[et]=0,F[et]=-1;var $=W[et];if($!==null)for(W[et]=null,et=0;et<$.length;et++){var Q=$[et];Q!==null&&(Q.lane&=-536870913)}a&=~st}u!==0&&ca(e,u,0),d!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=d&~(v&~r))}function ca(e,r,a){e.pendingLanes|=r,e.suspendedLanes&=~r;var u=31-j(r);e.entangledLanes|=r,e.entanglements[u]=e.entanglements[u]|1073741824|a&261930}function Pr(e,r){var a=e.entangledLanes|=r;for(e=e.entanglements;a;){var u=31-j(a),f=1<<u;f&r|e[u]&r&&(e[u]|=r),a&=~f}}function ss(e,r){var a=r&-r;return a=(a&42)!==0?1:Fr(a),(a&(e.suspendedLanes|r))!==0?0:a}function Fr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function En(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function as(){var e=R.p;return e!==0?e:(e=window.event,e===void 0?32:Qy(e.type))}function fa(e,r){var a=R.p;try{return R.p=e,r()}finally{R.p=a}}var Oi=Math.random().toString(36).slice(2),be="__reactFiber$"+Oi,ze="__reactProps$"+Oi,Xi="__reactContainer$"+Oi,ls="__reactEvents$"+Oi,zu="__reactListeners$"+Oi,da="__reactHandles$"+Oi,lr="__reactResources$"+Oi,Vi="__reactMarker$"+Oi;function pa(e){delete e[be],delete e[ze],delete e[ls],delete e[zu],delete e[da]}function or(e){var r=e[be];if(r)return r;for(var a=e.parentNode;a;){if(r=a[Xi]||a[be]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(e=Ly(e);e!==null;){if(a=e[be])return a;e=Ly(e)}return r}e=a,a=e.parentNode}return null}function os(e){if(e=e[be]||e[Xi]){var r=e.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return e}return null}function ma(e){var r=e.tag;if(r===5||r===26||r===27||r===6)return e.stateNode;throw Error(n(33))}function us(e){var r=e[lr];return r||(r=e[lr]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Ne(e){e[Vi]=!0}var gp=new Set,yp={};function An(e,r){hs(e,r),hs(e+"Capture",r)}function hs(e,r){for(yp[e]=r,e=0;e<r.length;e++)gp.add(r[e])}var $x=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vp={},_p={};function Zx(e){return ai.call(_p,e)?!0:ai.call(vp,e)?!1:$x.test(e)?_p[e]=!0:(vp[e]=!0,!1)}function Sl(e,r,a){if(Zx(r))if(a===null)e.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){e.removeAttribute(r);return}}e.setAttribute(r,""+a)}}function wl(e,r,a){if(a===null)e.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttribute(r,""+a)}}function ur(e,r,a,u){if(u===null)e.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(r,a,""+u)}}function vi(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function xp(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Kx(e,r,a){var u=Object.getOwnPropertyDescriptor(e.constructor.prototype,r);if(!e.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,d=u.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return f.call(this)},set:function(v){a=""+v,d.call(this,v)}}),Object.defineProperty(e,r,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function Hu(e){if(!e._valueTracker){var r=xp(e)?"checked":"value";e._valueTracker=Kx(e,r,""+e[r])}}function bp(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var a=r.getValue(),u="";return e&&(u=xp(e)?e.checked?"true":"false":e.value),e=u,e!==a?(r.setValue(e),!0):!1}function Cl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Qx=/[\n"\\]/g;function _i(e){return e.replace(Qx,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function ku(e,r,a,u,f,d,v,S){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),r!=null?v==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+vi(r)):e.value!==""+vi(r)&&(e.value=""+vi(r)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),r!=null?Xu(e,v,vi(r)):a!=null?Xu(e,v,vi(a)):u!=null&&e.removeAttribute("value"),f==null&&d!=null&&(e.defaultChecked=!!d),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.name=""+vi(S):e.removeAttribute("name")}function Tp(e,r,a,u,f,d,v,S){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),r!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||r!=null)){Hu(e);return}a=a!=null?""+vi(a):"",r=r!=null?""+vi(r):a,S||r===e.value||(e.value=r),e.defaultValue=r}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,e.checked=S?e.checked:!!u,e.defaultChecked=!!u,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),Hu(e)}function Xu(e,r,a){r==="number"&&Cl(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function cs(e,r,a,u){if(e=e.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<e.length;a++)f=r.hasOwnProperty("$"+e[a].value),e[a].selected!==f&&(e[a].selected=f),f&&u&&(e[a].defaultSelected=!0)}else{for(a=""+vi(a),r=null,f=0;f<e.length;f++){if(e[f].value===a){e[f].selected=!0,u&&(e[f].defaultSelected=!0);return}r!==null||e[f].disabled||(r=e[f])}r!==null&&(r.selected=!0)}}function Ep(e,r,a){if(r!=null&&(r=""+vi(r),r!==e.value&&(e.value=r),a==null)){e.defaultValue!==r&&(e.defaultValue=r);return}e.defaultValue=a!=null?""+vi(a):""}function Ap(e,r,a,u){if(r==null){if(u!=null){if(a!=null)throw Error(n(92));if(dt(u)){if(1<u.length)throw Error(n(93));u=u[0]}a=u}a==null&&(a=""),r=a}a=vi(r),e.defaultValue=a,u=e.textContent,u===a&&u!==""&&u!==null&&(e.value=u),Hu(e)}function fs(e,r){if(r){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=r;return}}e.textContent=r}var Jx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sp(e,r,a){var u=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="":u?e.setProperty(r,a):typeof a!="number"||a===0||Jx.has(r)?r==="float"?e.cssFloat=a:e[r]=(""+a).trim():e[r]=a+"px"}function wp(e,r,a){if(r!=null&&typeof r!="object")throw Error(n(62));if(e=e.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?e.setProperty(u,""):u==="float"?e.cssFloat="":e[u]="");for(var f in r)u=r[f],r.hasOwnProperty(f)&&a[f]!==u&&Sp(e,f,u)}else for(var d in r)r.hasOwnProperty(d)&&Sp(e,d,r[d])}function Vu(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),eb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rl(e){return eb.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function hr(){}var ju=null;function qu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ds=null,ps=null;function Cp(e){var r=os(e);if(r&&(e=r.stateNode)){var a=e[ze]||null;t:switch(e=r.stateNode,r.type){case"input":if(ku(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+_i(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var u=a[r];if(u!==e&&u.form===e.form){var f=u[ze]||null;if(!f)throw Error(n(90));ku(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<a.length;r++)u=a[r],u.form===e.form&&bp(u)}break t;case"textarea":Ep(e,a.value,a.defaultValue);break t;case"select":r=a.value,r!=null&&cs(e,!!a.multiple,r,!1)}}}var Yu=!1;function Rp(e,r,a){if(Yu)return e(r,a);Yu=!0;try{var u=e(r);return u}finally{if(Yu=!1,(ds!==null||ps!==null)&&(go(),ds&&(r=ds,e=ps,ps=ds=null,Cp(r),e)))for(r=0;r<e.length;r++)Cp(e[r])}}function ga(e,r){var a=e.stateNode;if(a===null)return null;var u=a[ze]||null;if(u===null)return null;a=u[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(e=e.type,u=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!u;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(n(231,r,typeof a));return a}var cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wu=!1;if(cr)try{var ya={};Object.defineProperty(ya,"passive",{get:function(){Wu=!0}}),window.addEventListener("test",ya,ya),window.removeEventListener("test",ya,ya)}catch{Wu=!1}var Gr=null,$u=null,Ml=null;function Mp(){if(Ml)return Ml;var e,r=$u,a=r.length,u,f="value"in Gr?Gr.value:Gr.textContent,d=f.length;for(e=0;e<a&&r[e]===f[e];e++);var v=a-e;for(u=1;u<=v&&r[a-u]===f[d-u];u++);return Ml=f.slice(e,1<u?1-u:void 0)}function Dl(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function Ol(){return!0}function Dp(){return!1}function Je(e){function r(a,u,f,d,v){this._reactName=a,this._targetInst=f,this.type=u,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(a=e[S],this[S]=a?a(d):d[S]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ol:Dp,this.isPropagationStopped=Dp,this}return y(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ol)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ol)},persist:function(){},isPersistent:Ol}),r}var Sn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bl=Je(Sn),va=y({},Sn,{view:0,detail:0}),ib=Je(va),Zu,Ku,_a,Il=y({},va,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ju,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==_a&&(_a&&e.type==="mousemove"?(Zu=e.screenX-_a.screenX,Ku=e.screenY-_a.screenY):Ku=Zu=0,_a=e),Zu)},movementY:function(e){return"movementY"in e?e.movementY:Ku}}),Op=Je(Il),rb=y({},Il,{dataTransfer:0}),nb=Je(rb),sb=y({},va,{relatedTarget:0}),Qu=Je(sb),ab=y({},Sn,{animationName:0,elapsedTime:0,pseudoElement:0}),lb=Je(ab),ob=y({},Sn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ub=Je(ob),hb=y({},Sn,{data:0}),Bp=Je(hb),cb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},db={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pb(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=db[e])?!!r[e]:!1}function Ju(){return pb}var mb=y({},va,{key:function(e){if(e.key){var r=cb[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=Dl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?fb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ju,charCode:function(e){return e.type==="keypress"?Dl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Dl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),gb=Je(mb),yb=y({},Il,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ip=Je(yb),vb=y({},va,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ju}),_b=Je(vb),xb=y({},Sn,{propertyName:0,elapsedTime:0,pseudoElement:0}),bb=Je(xb),Tb=y({},Il,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Eb=Je(Tb),Ab=y({},Sn,{newState:0,oldState:0}),Sb=Je(Ab),wb=[9,13,27,32],th=cr&&"CompositionEvent"in window,xa=null;cr&&"documentMode"in document&&(xa=document.documentMode);var Cb=cr&&"TextEvent"in window&&!xa,Np=cr&&(!th||xa&&8<xa&&11>=xa),Up=" ",Lp=!1;function Pp(e,r){switch(e){case"keyup":return wb.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ms=!1;function Rb(e,r){switch(e){case"compositionend":return Fp(r);case"keypress":return r.which!==32?null:(Lp=!0,Up);case"textInput":return e=r.data,e===Up&&Lp?null:e;default:return null}}function Mb(e,r){if(ms)return e==="compositionend"||!th&&Pp(e,r)?(e=Mp(),Ml=$u=Gr=null,ms=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Np&&r.locale!=="ko"?null:r.data;default:return null}}var Db={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gp(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!Db[e.type]:r==="textarea"}function zp(e,r,a,u){ds?ps?ps.push(u):ps=[u]:ds=u,r=Eo(r,"onChange"),0<r.length&&(a=new Bl("onChange","change",null,a,u),e.push({event:a,listeners:r}))}var ba=null,Ta=null;function Ob(e){Ty(e,0)}function Nl(e){var r=ma(e);if(bp(r))return e}function Hp(e,r){if(e==="change")return r}var kp=!1;if(cr){var eh;if(cr){var ih="oninput"in document;if(!ih){var Xp=document.createElement("div");Xp.setAttribute("oninput","return;"),ih=typeof Xp.oninput=="function"}eh=ih}else eh=!1;kp=eh&&(!document.documentMode||9<document.documentMode)}function Vp(){ba&&(ba.detachEvent("onpropertychange",jp),Ta=ba=null)}function jp(e){if(e.propertyName==="value"&&Nl(Ta)){var r=[];zp(r,Ta,e,qu(e)),Rp(Ob,r)}}function Bb(e,r,a){e==="focusin"?(Vp(),ba=r,Ta=a,ba.attachEvent("onpropertychange",jp)):e==="focusout"&&Vp()}function Ib(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Nl(Ta)}function Nb(e,r){if(e==="click")return Nl(r)}function Ub(e,r){if(e==="input"||e==="change")return Nl(r)}function Lb(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var ui=typeof Object.is=="function"?Object.is:Lb;function Ea(e,r){if(ui(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var a=Object.keys(e),u=Object.keys(r);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var f=a[u];if(!ai.call(r,f)||!ui(e[f],r[f]))return!1}return!0}function qp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Yp(e,r){var a=qp(e);e=0;for(var u;a;){if(a.nodeType===3){if(u=e+a.textContent.length,e<=r&&u>=r)return{node:a,offset:r-e};e=u}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=qp(a)}}function Wp(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?Wp(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function $p(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var r=Cl(e.document);r instanceof e.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)e=r.contentWindow;else break;r=Cl(e.document)}return r}function rh(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}var Pb=cr&&"documentMode"in document&&11>=document.documentMode,gs=null,nh=null,Aa=null,sh=!1;function Zp(e,r,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;sh||gs==null||gs!==Cl(u)||(u=gs,"selectionStart"in u&&rh(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Aa&&Ea(Aa,u)||(Aa=u,u=Eo(nh,"onSelect"),0<u.length&&(r=new Bl("onSelect","select",null,r,a),e.push({event:r,listeners:u}),r.target=gs)))}function wn(e,r){var a={};return a[e.toLowerCase()]=r.toLowerCase(),a["Webkit"+e]="webkit"+r,a["Moz"+e]="moz"+r,a}var ys={animationend:wn("Animation","AnimationEnd"),animationiteration:wn("Animation","AnimationIteration"),animationstart:wn("Animation","AnimationStart"),transitionrun:wn("Transition","TransitionRun"),transitionstart:wn("Transition","TransitionStart"),transitioncancel:wn("Transition","TransitionCancel"),transitionend:wn("Transition","TransitionEnd")},ah={},Kp={};cr&&(Kp=document.createElement("div").style,"AnimationEvent"in window||(delete ys.animationend.animation,delete ys.animationiteration.animation,delete ys.animationstart.animation),"TransitionEvent"in window||delete ys.transitionend.transition);function Cn(e){if(ah[e])return ah[e];if(!ys[e])return e;var r=ys[e],a;for(a in r)if(r.hasOwnProperty(a)&&a in Kp)return ah[e]=r[a];return e}var Qp=Cn("animationend"),Jp=Cn("animationiteration"),tm=Cn("animationstart"),Fb=Cn("transitionrun"),Gb=Cn("transitionstart"),zb=Cn("transitioncancel"),em=Cn("transitionend"),im=new Map,lh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");lh.push("scrollEnd");function Bi(e,r){im.set(e,r),An(r,[e])}var Ul=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},xi=[],vs=0,oh=0;function Ll(){for(var e=vs,r=oh=vs=0;r<e;){var a=xi[r];xi[r++]=null;var u=xi[r];xi[r++]=null;var f=xi[r];xi[r++]=null;var d=xi[r];if(xi[r++]=null,u!==null&&f!==null){var v=u.pending;v===null?f.next=f:(f.next=v.next,v.next=f),u.pending=f}d!==0&&rm(a,f,d)}}function Pl(e,r,a,u){xi[vs++]=e,xi[vs++]=r,xi[vs++]=a,xi[vs++]=u,oh|=u,e.lanes|=u,e=e.alternate,e!==null&&(e.lanes|=u)}function uh(e,r,a,u){return Pl(e,r,a,u),Fl(e)}function Rn(e,r){return Pl(e,null,null,r),Fl(e)}function rm(e,r,a){e.lanes|=a;var u=e.alternate;u!==null&&(u.lanes|=a);for(var f=!1,d=e.return;d!==null;)d.childLanes|=a,u=d.alternate,u!==null&&(u.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(f=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,f&&r!==null&&(f=31-j(a),e=d.hiddenUpdates,u=e[f],u===null?e[f]=[r]:u.push(r),r.lane=a|536870912),d):null}function Fl(e){if(50<qa)throw qa=0,vc=null,Error(n(185));for(var r=e.return;r!==null;)e=r,r=e.return;return e.tag===3?e.stateNode:null}var _s={};function Hb(e,r,a,u){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hi(e,r,a,u){return new Hb(e,r,a,u)}function hh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fr(e,r){var a=e.alternate;return a===null?(a=hi(e.tag,r,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=r,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,r=e.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function nm(e,r){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=r,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,r=a.dependencies,e.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),e}function Gl(e,r,a,u,f,d){var v=0;if(u=e,typeof e=="function")hh(e)&&(v=1);else if(typeof e=="string")v=q1(e,a,V.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case rt:return e=hi(31,a,r,f),e.elementType=rt,e.lanes=d,e;case w:return Mn(a.children,f,d,r);case A:v=8,f|=24;break;case C:return e=hi(12,a,r,f|2),e.elementType=C,e.lanes=d,e;case B:return e=hi(13,a,r,f),e.elementType=B,e.lanes=d,e;case H:return e=hi(19,a,r,f),e.elementType=H,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case O:v=10;break t;case U:v=9;break t;case L:v=11;break t;case D:v=14;break t;case q:v=16,u=null;break t}v=29,a=Error(n(130,e===null?"null":typeof e,"")),u=null}return r=hi(v,a,r,f),r.elementType=e,r.type=u,r.lanes=d,r}function Mn(e,r,a,u){return e=hi(7,e,u,r),e.lanes=a,e}function ch(e,r,a){return e=hi(6,e,null,r),e.lanes=a,e}function sm(e){var r=hi(18,null,null,0);return r.stateNode=e,r}function fh(e,r,a){return r=hi(4,e.children!==null?e.children:[],e.key,r),r.lanes=a,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}var am=new WeakMap;function bi(e,r){if(typeof e=="object"&&e!==null){var a=am.get(e);return a!==void 0?a:(r={value:e,source:r,stack:ue(r)},am.set(e,r),r)}return{value:e,source:r,stack:ue(r)}}var xs=[],bs=0,zl=null,Sa=0,Ti=[],Ei=0,zr=null,ji=1,qi="";function dr(e,r){xs[bs++]=Sa,xs[bs++]=zl,zl=e,Sa=r}function lm(e,r,a){Ti[Ei++]=ji,Ti[Ei++]=qi,Ti[Ei++]=zr,zr=e;var u=ji;e=qi;var f=32-j(u)-1;u&=~(1<<f),a+=1;var d=32-j(r)+f;if(30<d){var v=f-f%5;d=(u&(1<<v)-1).toString(32),u>>=v,f-=v,ji=1<<32-j(r)+f|a<<f|u,qi=d+e}else ji=1<<d|a<<f|u,qi=e}function dh(e){e.return!==null&&(dr(e,1),lm(e,1,0))}function ph(e){for(;e===zl;)zl=xs[--bs],xs[bs]=null,Sa=xs[--bs],xs[bs]=null;for(;e===zr;)zr=Ti[--Ei],Ti[Ei]=null,qi=Ti[--Ei],Ti[Ei]=null,ji=Ti[--Ei],Ti[Ei]=null}function om(e,r){Ti[Ei++]=ji,Ti[Ei++]=qi,Ti[Ei++]=zr,ji=r.id,qi=r.overflow,zr=e}var He=null,he=null,Wt=!1,Hr=null,Ai=!1,mh=Error(n(519));function kr(e){var r=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw wa(bi(r,e)),mh}function um(e){var r=e.stateNode,a=e.type,u=e.memoizedProps;switch(r[be]=e,r[ze]=u,a){case"dialog":Vt("cancel",r),Vt("close",r);break;case"iframe":case"object":case"embed":Vt("load",r);break;case"video":case"audio":for(a=0;a<Wa.length;a++)Vt(Wa[a],r);break;case"source":Vt("error",r);break;case"img":case"image":case"link":Vt("error",r),Vt("load",r);break;case"details":Vt("toggle",r);break;case"input":Vt("invalid",r),Tp(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Vt("invalid",r);break;case"textarea":Vt("invalid",r),Ap(r,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||u.suppressHydrationWarning===!0||wy(r.textContent,a)?(u.popover!=null&&(Vt("beforetoggle",r),Vt("toggle",r)),u.onScroll!=null&&Vt("scroll",r),u.onScrollEnd!=null&&Vt("scrollend",r),u.onClick!=null&&(r.onclick=hr),r=!0):r=!1,r||kr(e,!0)}function hm(e){for(He=e.return;He;)switch(He.tag){case 5:case 31:case 13:Ai=!1;return;case 27:case 3:Ai=!0;return;default:He=He.return}}function Ts(e){if(e!==He)return!1;if(!Wt)return hm(e),Wt=!0,!1;var r=e.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Ic(e.type,e.memoizedProps)),a=!a),a&&he&&kr(e),hm(e),r===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));he=Uy(e)}else if(r===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));he=Uy(e)}else r===27?(r=he,rn(e.type)?(e=Fc,Fc=null,he=e):he=r):he=He?wi(e.stateNode.nextSibling):null;return!0}function Dn(){he=He=null,Wt=!1}function gh(){var e=Hr;return e!==null&&(ri===null?ri=e:ri.push.apply(ri,e),Hr=null),e}function wa(e){Hr===null?Hr=[e]:Hr.push(e)}var yh=E(null),On=null,pr=null;function Xr(e,r,a){P(yh,r._currentValue),r._currentValue=a}function mr(e){e._currentValue=yh.current,I(yh)}function vh(e,r,a){for(;e!==null;){var u=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),e===a)break;e=e.return}}function _h(e,r,a,u){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var d=f.dependencies;if(d!==null){var v=f.child;d=d.firstContext;t:for(;d!==null;){var S=d;d=f;for(var F=0;F<r.length;F++)if(S.context===r[F]){d.lanes|=a,S=d.alternate,S!==null&&(S.lanes|=a),vh(d.return,a,e),u||(v=null);break t}d=S.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(n(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),vh(v,a,e),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===e){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function Es(e,r,a,u){e=null;for(var f=r,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(n(387));if(v=v.memoizedProps,v!==null){var S=f.type;ui(f.pendingProps.value,v.value)||(e!==null?e.push(S):e=[S])}}else if(f===ot.current){if(v=f.alternate,v===null)throw Error(n(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(Ja):e=[Ja])}f=f.return}e!==null&&_h(r,e,a,u),r.flags|=262144}function Hl(e){for(e=e.firstContext;e!==null;){if(!ui(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Bn(e){On=e,pr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ke(e){return cm(On,e)}function kl(e,r){return On===null&&Bn(e),cm(e,r)}function cm(e,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},pr===null){if(e===null)throw Error(n(308));pr=r,e.dependencies={lanes:0,firstContext:r},e.flags|=524288}else pr=pr.next=r;return a}var kb=typeof AbortController<"u"?AbortController:function(){var e=[],r=this.signal={aborted:!1,addEventListener:function(a,u){e.push(u)}};this.abort=function(){r.aborted=!0,e.forEach(function(a){return a()})}},Xb=s.unstable_scheduleCallback,Vb=s.unstable_NormalPriority,Se={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xh(){return{controller:new kb,data:new Map,refCount:0}}function Ca(e){e.refCount--,e.refCount===0&&Xb(Vb,function(){e.controller.abort()})}var Ra=null,bh=0,As=0,Ss=null;function jb(e,r){if(Ra===null){var a=Ra=[];bh=0,As=Ac(),Ss={status:"pending",value:void 0,then:function(u){a.push(u)}}}return bh++,r.then(fm,fm),r}function fm(){if(--bh===0&&Ra!==null){Ss!==null&&(Ss.status="fulfilled");var e=Ra;Ra=null,As=0,Ss=null;for(var r=0;r<e.length;r++)(0,e[r])()}}function qb(e,r){var a=[],u={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return e.then(function(){u.status="fulfilled",u.value=r;for(var f=0;f<a.length;f++)(0,a[f])(r)},function(f){for(u.status="rejected",u.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),u}var dm=T.S;T.S=function(e,r){Zg=vt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&jb(e,r),dm!==null&&dm(e,r)};var In=E(null);function Th(){var e=In.current;return e!==null?e:le.pooledCache}function Xl(e,r){r===null?P(In,In.current):P(In,r.pool)}function pm(){var e=Th();return e===null?null:{parent:Se._currentValue,pool:e}}var ws=Error(n(460)),Eh=Error(n(474)),Vl=Error(n(542)),jl={then:function(){}};function mm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function gm(e,r,a){switch(a=e[a],a===void 0?e.push(r):a!==r&&(r.then(hr,hr),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw e=r.reason,vm(e),e;default:if(typeof r.status=="string")r.then(hr,hr);else{if(e=le,e!==null&&100<e.shellSuspendCounter)throw Error(n(482));e=r,e.status="pending",e.then(function(u){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=u}},function(u){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw e=r.reason,vm(e),e}throw Un=r,ws}}function Nn(e){try{var r=e._init;return r(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Un=a,ws):a}}var Un=null;function ym(){if(Un===null)throw Error(n(459));var e=Un;return Un=null,e}function vm(e){if(e===ws||e===Vl)throw Error(n(483))}var Cs=null,Ma=0;function ql(e){var r=Ma;return Ma+=1,Cs===null&&(Cs=[]),gm(Cs,e,r)}function Da(e,r){r=r.props.ref,e.ref=r!==void 0?r:null}function Yl(e,r){throw r.$$typeof===x?Error(n(525)):(e=Object.prototype.toString.call(r),Error(n(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e)))}function _m(e){function r(X,G){if(e){var Y=X.deletions;Y===null?(X.deletions=[G],X.flags|=16):Y.push(G)}}function a(X,G){if(!e)return null;for(;G!==null;)r(X,G),G=G.sibling;return null}function u(X){for(var G=new Map;X!==null;)X.key!==null?G.set(X.key,X):G.set(X.index,X),X=X.sibling;return G}function f(X,G){return X=fr(X,G),X.index=0,X.sibling=null,X}function d(X,G,Y){return X.index=Y,e?(Y=X.alternate,Y!==null?(Y=Y.index,Y<G?(X.flags|=67108866,G):Y):(X.flags|=67108866,G)):(X.flags|=1048576,G)}function v(X){return e&&X.alternate===null&&(X.flags|=67108866),X}function S(X,G,Y,nt){return G===null||G.tag!==6?(G=ch(Y,X.mode,nt),G.return=X,G):(G=f(G,Y),G.return=X,G)}function F(X,G,Y,nt){var Ot=Y.type;return Ot===w?et(X,G,Y.props.children,nt,Y.key):G!==null&&(G.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===q&&Nn(Ot)===G.type)?(G=f(G,Y.props),Da(G,Y),G.return=X,G):(G=Gl(Y.type,Y.key,Y.props,null,X.mode,nt),Da(G,Y),G.return=X,G)}function W(X,G,Y,nt){return G===null||G.tag!==4||G.stateNode.containerInfo!==Y.containerInfo||G.stateNode.implementation!==Y.implementation?(G=fh(Y,X.mode,nt),G.return=X,G):(G=f(G,Y.children||[]),G.return=X,G)}function et(X,G,Y,nt,Ot){return G===null||G.tag!==7?(G=Mn(Y,X.mode,nt,Ot),G.return=X,G):(G=f(G,Y),G.return=X,G)}function st(X,G,Y){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=ch(""+G,X.mode,Y),G.return=X,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case _:return Y=Gl(G.type,G.key,G.props,null,X.mode,Y),Da(Y,G),Y.return=X,Y;case b:return G=fh(G,X.mode,Y),G.return=X,G;case q:return G=Nn(G),st(X,G,Y)}if(dt(G)||k(G))return G=Mn(G,X.mode,Y,null),G.return=X,G;if(typeof G.then=="function")return st(X,ql(G),Y);if(G.$$typeof===O)return st(X,kl(X,G),Y);Yl(X,G)}return null}function $(X,G,Y,nt){var Ot=G!==null?G.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Ot!==null?null:S(X,G,""+Y,nt);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case _:return Y.key===Ot?F(X,G,Y,nt):null;case b:return Y.key===Ot?W(X,G,Y,nt):null;case q:return Y=Nn(Y),$(X,G,Y,nt)}if(dt(Y)||k(Y))return Ot!==null?null:et(X,G,Y,nt,null);if(typeof Y.then=="function")return $(X,G,ql(Y),nt);if(Y.$$typeof===O)return $(X,G,kl(X,Y),nt);Yl(X,Y)}return null}function Q(X,G,Y,nt,Ot){if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return X=X.get(Y)||null,S(G,X,""+nt,Ot);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case _:return X=X.get(nt.key===null?Y:nt.key)||null,F(G,X,nt,Ot);case b:return X=X.get(nt.key===null?Y:nt.key)||null,W(G,X,nt,Ot);case q:return nt=Nn(nt),Q(X,G,Y,nt,Ot)}if(dt(nt)||k(nt))return X=X.get(Y)||null,et(G,X,nt,Ot,null);if(typeof nt.then=="function")return Q(X,G,Y,ql(nt),Ot);if(nt.$$typeof===O)return Q(X,G,Y,kl(G,nt),Ot);Yl(G,nt)}return null}function bt(X,G,Y,nt){for(var Ot=null,Kt=null,At=G,kt=G=0,Yt=null;At!==null&&kt<Y.length;kt++){At.index>kt?(Yt=At,At=null):Yt=At.sibling;var Qt=$(X,At,Y[kt],nt);if(Qt===null){At===null&&(At=Yt);break}e&&At&&Qt.alternate===null&&r(X,At),G=d(Qt,G,kt),Kt===null?Ot=Qt:Kt.sibling=Qt,Kt=Qt,At=Yt}if(kt===Y.length)return a(X,At),Wt&&dr(X,kt),Ot;if(At===null){for(;kt<Y.length;kt++)At=st(X,Y[kt],nt),At!==null&&(G=d(At,G,kt),Kt===null?Ot=At:Kt.sibling=At,Kt=At);return Wt&&dr(X,kt),Ot}for(At=u(At);kt<Y.length;kt++)Yt=Q(At,X,kt,Y[kt],nt),Yt!==null&&(e&&Yt.alternate!==null&&At.delete(Yt.key===null?kt:Yt.key),G=d(Yt,G,kt),Kt===null?Ot=Yt:Kt.sibling=Yt,Kt=Yt);return e&&At.forEach(function(on){return r(X,on)}),Wt&&dr(X,kt),Ot}function It(X,G,Y,nt){if(Y==null)throw Error(n(151));for(var Ot=null,Kt=null,At=G,kt=G=0,Yt=null,Qt=Y.next();At!==null&&!Qt.done;kt++,Qt=Y.next()){At.index>kt?(Yt=At,At=null):Yt=At.sibling;var on=$(X,At,Qt.value,nt);if(on===null){At===null&&(At=Yt);break}e&&At&&on.alternate===null&&r(X,At),G=d(on,G,kt),Kt===null?Ot=on:Kt.sibling=on,Kt=on,At=Yt}if(Qt.done)return a(X,At),Wt&&dr(X,kt),Ot;if(At===null){for(;!Qt.done;kt++,Qt=Y.next())Qt=st(X,Qt.value,nt),Qt!==null&&(G=d(Qt,G,kt),Kt===null?Ot=Qt:Kt.sibling=Qt,Kt=Qt);return Wt&&dr(X,kt),Ot}for(At=u(At);!Qt.done;kt++,Qt=Y.next())Qt=Q(At,X,kt,Qt.value,nt),Qt!==null&&(e&&Qt.alternate!==null&&At.delete(Qt.key===null?kt:Qt.key),G=d(Qt,G,kt),Kt===null?Ot=Qt:Kt.sibling=Qt,Kt=Qt);return e&&At.forEach(function(rT){return r(X,rT)}),Wt&&dr(X,kt),Ot}function ae(X,G,Y,nt){if(typeof Y=="object"&&Y!==null&&Y.type===w&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case _:t:{for(var Ot=Y.key;G!==null;){if(G.key===Ot){if(Ot=Y.type,Ot===w){if(G.tag===7){a(X,G.sibling),nt=f(G,Y.props.children),nt.return=X,X=nt;break t}}else if(G.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===q&&Nn(Ot)===G.type){a(X,G.sibling),nt=f(G,Y.props),Da(nt,Y),nt.return=X,X=nt;break t}a(X,G);break}else r(X,G);G=G.sibling}Y.type===w?(nt=Mn(Y.props.children,X.mode,nt,Y.key),nt.return=X,X=nt):(nt=Gl(Y.type,Y.key,Y.props,null,X.mode,nt),Da(nt,Y),nt.return=X,X=nt)}return v(X);case b:t:{for(Ot=Y.key;G!==null;){if(G.key===Ot)if(G.tag===4&&G.stateNode.containerInfo===Y.containerInfo&&G.stateNode.implementation===Y.implementation){a(X,G.sibling),nt=f(G,Y.children||[]),nt.return=X,X=nt;break t}else{a(X,G);break}else r(X,G);G=G.sibling}nt=fh(Y,X.mode,nt),nt.return=X,X=nt}return v(X);case q:return Y=Nn(Y),ae(X,G,Y,nt)}if(dt(Y))return bt(X,G,Y,nt);if(k(Y)){if(Ot=k(Y),typeof Ot!="function")throw Error(n(150));return Y=Ot.call(Y),It(X,G,Y,nt)}if(typeof Y.then=="function")return ae(X,G,ql(Y),nt);if(Y.$$typeof===O)return ae(X,G,kl(X,Y),nt);Yl(X,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,G!==null&&G.tag===6?(a(X,G.sibling),nt=f(G,Y),nt.return=X,X=nt):(a(X,G),nt=ch(Y,X.mode,nt),nt.return=X,X=nt),v(X)):a(X,G)}return function(X,G,Y,nt){try{Ma=0;var Ot=ae(X,G,Y,nt);return Cs=null,Ot}catch(At){if(At===ws||At===Vl)throw At;var Kt=hi(29,At,null,X.mode);return Kt.lanes=nt,Kt.return=X,Kt}finally{}}}var Ln=_m(!0),xm=_m(!1),Vr=!1;function Ah(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sh(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function jr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function qr(e,r,a){var u=e.updateQueue;if(u===null)return null;if(u=u.shared,(Jt&2)!==0){var f=u.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),u.pending=r,r=Fl(e),rm(e,null,a),r}return Pl(e,u,r,a),Fl(e)}function Oa(e,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var u=r.lanes;u&=e.pendingLanes,a|=u,r.lanes=a,Pr(e,a)}}function wh(e,r){var a=e.updateQueue,u=e.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?f=d=r:d=d.next=r}else f=d=r;a={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:u.shared,callbacks:u.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=r:e.next=r,a.lastBaseUpdate=r}var Ch=!1;function Ba(){if(Ch){var e=Ss;if(e!==null)throw e}}function Ia(e,r,a,u){Ch=!1;var f=e.updateQueue;Vr=!1;var d=f.firstBaseUpdate,v=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var F=S,W=F.next;F.next=null,v===null?d=W:v.next=W,v=F;var et=e.alternate;et!==null&&(et=et.updateQueue,S=et.lastBaseUpdate,S!==v&&(S===null?et.firstBaseUpdate=W:S.next=W,et.lastBaseUpdate=F))}if(d!==null){var st=f.baseState;v=0,et=W=F=null,S=d;do{var $=S.lane&-536870913,Q=$!==S.lane;if(Q?(qt&$)===$:(u&$)===$){$!==0&&$===As&&(Ch=!0),et!==null&&(et=et.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});t:{var bt=e,It=S;$=r;var ae=a;switch(It.tag){case 1:if(bt=It.payload,typeof bt=="function"){st=bt.call(ae,st,$);break t}st=bt;break t;case 3:bt.flags=bt.flags&-65537|128;case 0:if(bt=It.payload,$=typeof bt=="function"?bt.call(ae,st,$):bt,$==null)break t;st=y({},st,$);break t;case 2:Vr=!0}}$=S.callback,$!==null&&(e.flags|=64,Q&&(e.flags|=8192),Q=f.callbacks,Q===null?f.callbacks=[$]:Q.push($))}else Q={lane:$,tag:S.tag,payload:S.payload,callback:S.callback,next:null},et===null?(W=et=Q,F=st):et=et.next=Q,v|=$;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;Q=S,S=Q.next,Q.next=null,f.lastBaseUpdate=Q,f.shared.pending=null}}while(!0);et===null&&(F=st),f.baseState=F,f.firstBaseUpdate=W,f.lastBaseUpdate=et,d===null&&(f.shared.lanes=0),Kr|=v,e.lanes=v,e.memoizedState=st}}function bm(e,r){if(typeof e!="function")throw Error(n(191,e));e.call(r)}function Tm(e,r){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)bm(a[e],r)}var Rs=E(null),Wl=E(0);function Em(e,r){e=Ar,P(Wl,e),P(Rs,r),Ar=e|r.baseLanes}function Rh(){P(Wl,Ar),P(Rs,Rs.current)}function Mh(){Ar=Wl.current,I(Rs),I(Wl)}var ci=E(null),Si=null;function Yr(e){var r=e.alternate;P(Te,Te.current&1),P(ci,e),Si===null&&(r===null||Rs.current!==null||r.memoizedState!==null)&&(Si=e)}function Dh(e){P(Te,Te.current),P(ci,e),Si===null&&(Si=e)}function Am(e){e.tag===22?(P(Te,Te.current),P(ci,e),Si===null&&(Si=e)):Wr()}function Wr(){P(Te,Te.current),P(ci,ci.current)}function fi(e){I(ci),Si===e&&(Si=null),I(Te)}var Te=E(0);function $l(e){for(var r=e;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Lc(a)||Pc(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var gr=0,zt=null,ne=null,we=null,Zl=!1,Ms=!1,Pn=!1,Kl=0,Na=0,Ds=null,Yb=0;function _e(){throw Error(n(321))}function Oh(e,r){if(r===null)return!1;for(var a=0;a<r.length&&a<e.length;a++)if(!ui(e[a],r[a]))return!1;return!0}function Bh(e,r,a,u,f,d){return gr=d,zt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,T.H=e===null||e.memoizedState===null?lg:Yh,Pn=!1,d=a(u,f),Pn=!1,Ms&&(d=wm(r,a,u,f)),Sm(e),d}function Sm(e){T.H=Pa;var r=ne!==null&&ne.next!==null;if(gr=0,we=ne=zt=null,Zl=!1,Na=0,Ds=null,r)throw Error(n(300));e===null||Ce||(e=e.dependencies,e!==null&&Hl(e)&&(Ce=!0))}function wm(e,r,a,u){zt=e;var f=0;do{if(Ms&&(Ds=null),Na=0,Ms=!1,25<=f)throw Error(n(301));if(f+=1,we=ne=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}T.H=og,d=r(a,u)}while(Ms);return d}function Wb(){var e=T.H,r=e.useState()[0];return r=typeof r.then=="function"?Ua(r):r,e=e.useState()[0],(ne!==null?ne.memoizedState:null)!==e&&(zt.flags|=1024),r}function Ih(){var e=Kl!==0;return Kl=0,e}function Nh(e,r,a){r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~a}function Uh(e){if(Zl){for(e=e.memoizedState;e!==null;){var r=e.queue;r!==null&&(r.pending=null),e=e.next}Zl=!1}gr=0,we=ne=zt=null,Ms=!1,Na=Kl=0,Ds=null}function Ze(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return we===null?zt.memoizedState=we=e:we=we.next=e,we}function Ee(){if(ne===null){var e=zt.alternate;e=e!==null?e.memoizedState:null}else e=ne.next;var r=we===null?zt.memoizedState:we.next;if(r!==null)we=r,ne=e;else{if(e===null)throw zt.alternate===null?Error(n(467)):Error(n(310));ne=e,e={memoizedState:ne.memoizedState,baseState:ne.baseState,baseQueue:ne.baseQueue,queue:ne.queue,next:null},we===null?zt.memoizedState=we=e:we=we.next=e}return we}function Ql(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ua(e){var r=Na;return Na+=1,Ds===null&&(Ds=[]),e=gm(Ds,e,r),r=zt,(we===null?r.memoizedState:we.next)===null&&(r=r.alternate,T.H=r===null||r.memoizedState===null?lg:Yh),e}function Jl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ua(e);if(e.$$typeof===O)return ke(e)}throw Error(n(438,String(e)))}function Lh(e){var r=null,a=zt.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var u=zt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Ql(),zt.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(e),u=0;u<e;u++)a[u]=at;return r.index++,a}function yr(e,r){return typeof r=="function"?r(e):r}function to(e){var r=Ee();return Ph(r,ne,e)}function Ph(e,r,a){var u=e.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=a;var f=e.baseQueue,d=u.pending;if(d!==null){if(f!==null){var v=f.next;f.next=d.next,d.next=v}r.baseQueue=f=d,u.pending=null}if(d=e.baseState,f===null)e.memoizedState=d;else{r=f.next;var S=v=null,F=null,W=r,et=!1;do{var st=W.lane&-536870913;if(st!==W.lane?(qt&st)===st:(gr&st)===st){var $=W.revertLane;if($===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),st===As&&(et=!0);else if((gr&$)===$){W=W.next,$===As&&(et=!0);continue}else st={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},F===null?(S=F=st,v=d):F=F.next=st,zt.lanes|=$,Kr|=$;st=W.action,Pn&&a(d,st),d=W.hasEagerState?W.eagerState:a(d,st)}else $={lane:st,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},F===null?(S=F=$,v=d):F=F.next=$,zt.lanes|=st,Kr|=st;W=W.next}while(W!==null&&W!==r);if(F===null?v=d:F.next=S,!ui(d,e.memoizedState)&&(Ce=!0,et&&(a=Ss,a!==null)))throw a;e.memoizedState=d,e.baseState=v,e.baseQueue=F,u.lastRenderedState=d}return f===null&&(u.lanes=0),[e.memoizedState,u.dispatch]}function Fh(e){var r=Ee(),a=r.queue;if(a===null)throw Error(n(311));a.lastRenderedReducer=e;var u=a.dispatch,f=a.pending,d=r.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do d=e(d,v.action),v=v.next;while(v!==f);ui(d,r.memoizedState)||(Ce=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),a.lastRenderedState=d}return[d,u]}function Cm(e,r,a){var u=zt,f=Ee(),d=Wt;if(d){if(a===void 0)throw Error(n(407));a=a()}else a=r();var v=!ui((ne||f).memoizedState,a);if(v&&(f.memoizedState=a,Ce=!0),f=f.queue,Hh(Dm.bind(null,u,f,e),[e]),f.getSnapshot!==r||v||we!==null&&we.memoizedState.tag&1){if(u.flags|=2048,Os(9,{destroy:void 0},Mm.bind(null,u,f,a,r),null),le===null)throw Error(n(349));d||(gr&127)!==0||Rm(u,r,a)}return a}function Rm(e,r,a){e.flags|=16384,e={getSnapshot:r,value:a},r=zt.updateQueue,r===null?(r=Ql(),zt.updateQueue=r,r.stores=[e]):(a=r.stores,a===null?r.stores=[e]:a.push(e))}function Mm(e,r,a,u){r.value=a,r.getSnapshot=u,Om(r)&&Bm(e)}function Dm(e,r,a){return a(function(){Om(r)&&Bm(e)})}function Om(e){var r=e.getSnapshot;e=e.value;try{var a=r();return!ui(e,a)}catch{return!0}}function Bm(e){var r=Rn(e,2);r!==null&&ni(r,e,2)}function Gh(e){var r=Ze();if(typeof e=="function"){var a=e;if(e=a(),Pn){li(!0);try{a()}finally{li(!1)}}}return r.memoizedState=r.baseState=e,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yr,lastRenderedState:e},r}function Im(e,r,a,u){return e.baseState=a,Ph(e,ne,typeof u=="function"?u:yr)}function $b(e,r,a,u,f){if(ro(e))throw Error(n(485));if(e=r.action,e!==null){var d={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};T.T!==null?a(!0):d.isTransition=!1,u(d),a=r.pending,a===null?(d.next=r.pending=d,Nm(r,d)):(d.next=a.next,r.pending=a.next=d)}}function Nm(e,r){var a=r.action,u=r.payload,f=e.state;if(r.isTransition){var d=T.T,v={};T.T=v;try{var S=a(f,u),F=T.S;F!==null&&F(v,S),Um(e,r,S)}catch(W){zh(e,r,W)}finally{d!==null&&v.types!==null&&(d.types=v.types),T.T=d}}else try{d=a(f,u),Um(e,r,d)}catch(W){zh(e,r,W)}}function Um(e,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){Lm(e,r,u)},function(u){return zh(e,r,u)}):Lm(e,r,a)}function Lm(e,r,a){r.status="fulfilled",r.value=a,Pm(r),e.state=a,r=e.pending,r!==null&&(a=r.next,a===r?e.pending=null:(a=a.next,r.next=a,Nm(e,a)))}function zh(e,r,a){var u=e.pending;if(e.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=a,Pm(r),r=r.next;while(r!==u)}e.action=null}function Pm(e){e=e.listeners;for(var r=0;r<e.length;r++)(0,e[r])()}function Fm(e,r){return r}function Gm(e,r){if(Wt){var a=le.formState;if(a!==null){t:{var u=zt;if(Wt){if(he){e:{for(var f=he,d=Ai;f.nodeType!==8;){if(!d){f=null;break e}if(f=wi(f.nextSibling),f===null){f=null;break e}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){he=wi(f.nextSibling),u=f.data==="F!";break t}}kr(u)}u=!1}u&&(r=a[0])}}return a=Ze(),a.memoizedState=a.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fm,lastRenderedState:r},a.queue=u,a=ng.bind(null,zt,u),u.dispatch=a,u=Gh(!1),d=qh.bind(null,zt,!1,u.queue),u=Ze(),f={state:r,dispatch:null,action:e,pending:null},u.queue=f,a=$b.bind(null,zt,f,d,a),f.dispatch=a,u.memoizedState=e,[r,a,!1]}function zm(e){var r=Ee();return Hm(r,ne,e)}function Hm(e,r,a){if(r=Ph(e,r,Fm)[0],e=to(yr)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=Ua(r)}catch(v){throw v===ws?Vl:v}else u=r;r=Ee();var f=r.queue,d=f.dispatch;return a!==r.memoizedState&&(zt.flags|=2048,Os(9,{destroy:void 0},Zb.bind(null,f,a),null)),[u,d,e]}function Zb(e,r){e.action=r}function km(e){var r=Ee(),a=ne;if(a!==null)return Hm(r,a,e);Ee(),r=r.memoizedState,a=Ee();var u=a.queue.dispatch;return a.memoizedState=e,[r,u,!1]}function Os(e,r,a,u){return e={tag:e,create:a,deps:u,inst:r,next:null},r=zt.updateQueue,r===null&&(r=Ql(),zt.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=e.next=e:(u=a.next,a.next=e,e.next=u,r.lastEffect=e),e}function Xm(){return Ee().memoizedState}function eo(e,r,a,u){var f=Ze();zt.flags|=e,f.memoizedState=Os(1|r,{destroy:void 0},a,u===void 0?null:u)}function io(e,r,a,u){var f=Ee();u=u===void 0?null:u;var d=f.memoizedState.inst;ne!==null&&u!==null&&Oh(u,ne.memoizedState.deps)?f.memoizedState=Os(r,d,a,u):(zt.flags|=e,f.memoizedState=Os(1|r,d,a,u))}function Vm(e,r){eo(8390656,8,e,r)}function Hh(e,r){io(2048,8,e,r)}function Kb(e){zt.flags|=4;var r=zt.updateQueue;if(r===null)r=Ql(),zt.updateQueue=r,r.events=[e];else{var a=r.events;a===null?r.events=[e]:a.push(e)}}function jm(e){var r=Ee().memoizedState;return Kb({ref:r,nextImpl:e}),function(){if((Jt&2)!==0)throw Error(n(440));return r.impl.apply(void 0,arguments)}}function qm(e,r){return io(4,2,e,r)}function Ym(e,r){return io(4,4,e,r)}function Wm(e,r){if(typeof r=="function"){e=e();var a=r(e);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function $m(e,r,a){a=a!=null?a.concat([e]):null,io(4,4,Wm.bind(null,r,e),a)}function kh(){}function Zm(e,r){var a=Ee();r=r===void 0?null:r;var u=a.memoizedState;return r!==null&&Oh(r,u[1])?u[0]:(a.memoizedState=[e,r],e)}function Km(e,r){var a=Ee();r=r===void 0?null:r;var u=a.memoizedState;if(r!==null&&Oh(r,u[1]))return u[0];if(u=e(),Pn){li(!0);try{e()}finally{li(!1)}}return a.memoizedState=[u,r],u}function Xh(e,r,a){return a===void 0||(gr&1073741824)!==0&&(qt&261930)===0?e.memoizedState=r:(e.memoizedState=a,e=Qg(),zt.lanes|=e,Kr|=e,a)}function Qm(e,r,a,u){return ui(a,r)?a:Rs.current!==null?(e=Xh(e,a,u),ui(e,r)||(Ce=!0),e):(gr&42)===0||(gr&1073741824)!==0&&(qt&261930)===0?(Ce=!0,e.memoizedState=a):(e=Qg(),zt.lanes|=e,Kr|=e,r)}function Jm(e,r,a,u,f){var d=R.p;R.p=d!==0&&8>d?d:8;var v=T.T,S={};T.T=S,qh(e,!1,r,a);try{var F=f(),W=T.S;if(W!==null&&W(S,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var et=qb(F,u);La(e,r,et,mi(e))}else La(e,r,u,mi(e))}catch(st){La(e,r,{then:function(){},status:"rejected",reason:st},mi())}finally{R.p=d,v!==null&&S.types!==null&&(v.types=S.types),T.T=v}}function Qb(){}function Vh(e,r,a,u){if(e.tag!==5)throw Error(n(476));var f=tg(e).queue;Jm(e,f,r,M,a===null?Qb:function(){return eg(e),a(u)})}function tg(e){var r=e.memoizedState;if(r!==null)return r;r={memoizedState:M,baseState:M,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yr,lastRenderedState:M},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yr,lastRenderedState:a},next:null},e.memoizedState=r,e=e.alternate,e!==null&&(e.memoizedState=r),r}function eg(e){var r=tg(e);r.next===null&&(r=e.alternate.memoizedState),La(e,r.next.queue,{},mi())}function jh(){return ke(Ja)}function ig(){return Ee().memoizedState}function rg(){return Ee().memoizedState}function Jb(e){for(var r=e.return;r!==null;){switch(r.tag){case 24:case 3:var a=mi();e=jr(a);var u=qr(r,e,a);u!==null&&(ni(u,r,a),Oa(u,r,a)),r={cache:xh()},e.payload=r;return}r=r.return}}function t1(e,r,a){var u=mi();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ro(e)?sg(r,a):(a=uh(e,r,a,u),a!==null&&(ni(a,e,u),ag(a,r,u)))}function ng(e,r,a){var u=mi();La(e,r,a,u)}function La(e,r,a,u){var f={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ro(e))sg(r,f);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var v=r.lastRenderedState,S=d(v,a);if(f.hasEagerState=!0,f.eagerState=S,ui(S,v))return Pl(e,r,f,0),le===null&&Ll(),!1}catch{}finally{}if(a=uh(e,r,f,u),a!==null)return ni(a,e,u),ag(a,r,u),!0}return!1}function qh(e,r,a,u){if(u={lane:2,revertLane:Ac(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},ro(e)){if(r)throw Error(n(479))}else r=uh(e,a,u,2),r!==null&&ni(r,e,2)}function ro(e){var r=e.alternate;return e===zt||r!==null&&r===zt}function sg(e,r){Ms=Zl=!0;var a=e.pending;a===null?r.next=r:(r.next=a.next,a.next=r),e.pending=r}function ag(e,r,a){if((a&4194048)!==0){var u=r.lanes;u&=e.pendingLanes,a|=u,r.lanes=a,Pr(e,a)}}var Pa={readContext:ke,use:Jl,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useLayoutEffect:_e,useInsertionEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useSyncExternalStore:_e,useId:_e,useHostTransitionStatus:_e,useFormState:_e,useActionState:_e,useOptimistic:_e,useMemoCache:_e,useCacheRefresh:_e};Pa.useEffectEvent=_e;var lg={readContext:ke,use:Jl,useCallback:function(e,r){return Ze().memoizedState=[e,r===void 0?null:r],e},useContext:ke,useEffect:Vm,useImperativeHandle:function(e,r,a){a=a!=null?a.concat([e]):null,eo(4194308,4,Wm.bind(null,r,e),a)},useLayoutEffect:function(e,r){return eo(4194308,4,e,r)},useInsertionEffect:function(e,r){eo(4,2,e,r)},useMemo:function(e,r){var a=Ze();r=r===void 0?null:r;var u=e();if(Pn){li(!0);try{e()}finally{li(!1)}}return a.memoizedState=[u,r],u},useReducer:function(e,r,a){var u=Ze();if(a!==void 0){var f=a(r);if(Pn){li(!0);try{a(r)}finally{li(!1)}}}else f=r;return u.memoizedState=u.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},u.queue=e,e=e.dispatch=t1.bind(null,zt,e),[u.memoizedState,e]},useRef:function(e){var r=Ze();return e={current:e},r.memoizedState=e},useState:function(e){e=Gh(e);var r=e.queue,a=ng.bind(null,zt,r);return r.dispatch=a,[e.memoizedState,a]},useDebugValue:kh,useDeferredValue:function(e,r){var a=Ze();return Xh(a,e,r)},useTransition:function(){var e=Gh(!1);return e=Jm.bind(null,zt,e.queue,!0,!1),Ze().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,r,a){var u=zt,f=Ze();if(Wt){if(a===void 0)throw Error(n(407));a=a()}else{if(a=r(),le===null)throw Error(n(349));(qt&127)!==0||Rm(u,r,a)}f.memoizedState=a;var d={value:a,getSnapshot:r};return f.queue=d,Vm(Dm.bind(null,u,d,e),[e]),u.flags|=2048,Os(9,{destroy:void 0},Mm.bind(null,u,d,a,r),null),a},useId:function(){var e=Ze(),r=le.identifierPrefix;if(Wt){var a=qi,u=ji;a=(u&~(1<<32-j(u)-1)).toString(32)+a,r="_"+r+"R_"+a,a=Kl++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=Yb++,r="_"+r+"r_"+a.toString(32)+"_";return e.memoizedState=r},useHostTransitionStatus:jh,useFormState:Gm,useActionState:Gm,useOptimistic:function(e){var r=Ze();r.memoizedState=r.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=qh.bind(null,zt,!0,a),a.dispatch=r,[e,r]},useMemoCache:Lh,useCacheRefresh:function(){return Ze().memoizedState=Jb.bind(null,zt)},useEffectEvent:function(e){var r=Ze(),a={impl:e};return r.memoizedState=a,function(){if((Jt&2)!==0)throw Error(n(440));return a.impl.apply(void 0,arguments)}}},Yh={readContext:ke,use:Jl,useCallback:Zm,useContext:ke,useEffect:Hh,useImperativeHandle:$m,useInsertionEffect:qm,useLayoutEffect:Ym,useMemo:Km,useReducer:to,useRef:Xm,useState:function(){return to(yr)},useDebugValue:kh,useDeferredValue:function(e,r){var a=Ee();return Qm(a,ne.memoizedState,e,r)},useTransition:function(){var e=to(yr)[0],r=Ee().memoizedState;return[typeof e=="boolean"?e:Ua(e),r]},useSyncExternalStore:Cm,useId:ig,useHostTransitionStatus:jh,useFormState:zm,useActionState:zm,useOptimistic:function(e,r){var a=Ee();return Im(a,ne,e,r)},useMemoCache:Lh,useCacheRefresh:rg};Yh.useEffectEvent=jm;var og={readContext:ke,use:Jl,useCallback:Zm,useContext:ke,useEffect:Hh,useImperativeHandle:$m,useInsertionEffect:qm,useLayoutEffect:Ym,useMemo:Km,useReducer:Fh,useRef:Xm,useState:function(){return Fh(yr)},useDebugValue:kh,useDeferredValue:function(e,r){var a=Ee();return ne===null?Xh(a,e,r):Qm(a,ne.memoizedState,e,r)},useTransition:function(){var e=Fh(yr)[0],r=Ee().memoizedState;return[typeof e=="boolean"?e:Ua(e),r]},useSyncExternalStore:Cm,useId:ig,useHostTransitionStatus:jh,useFormState:km,useActionState:km,useOptimistic:function(e,r){var a=Ee();return ne!==null?Im(a,ne,e,r):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Lh,useCacheRefresh:rg};og.useEffectEvent=jm;function Wh(e,r,a,u){r=e.memoizedState,a=a(u,r),a=a==null?r:y({},r,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var $h={enqueueSetState:function(e,r,a){e=e._reactInternals;var u=mi(),f=jr(u);f.payload=r,a!=null&&(f.callback=a),r=qr(e,f,u),r!==null&&(ni(r,e,u),Oa(r,e,u))},enqueueReplaceState:function(e,r,a){e=e._reactInternals;var u=mi(),f=jr(u);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=qr(e,f,u),r!==null&&(ni(r,e,u),Oa(r,e,u))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var a=mi(),u=jr(a);u.tag=2,r!=null&&(u.callback=r),r=qr(e,u,a),r!==null&&(ni(r,e,a),Oa(r,e,a))}};function ug(e,r,a,u,f,d,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(u,d,v):r.prototype&&r.prototype.isPureReactComponent?!Ea(a,u)||!Ea(f,d):!0}function hg(e,r,a,u){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,u),r.state!==e&&$h.enqueueReplaceState(r,r.state,null)}function Fn(e,r){var a=r;if("ref"in r){a={};for(var u in r)u!=="ref"&&(a[u]=r[u])}if(e=e.defaultProps){a===r&&(a=y({},a));for(var f in e)a[f]===void 0&&(a[f]=e[f])}return a}function cg(e){Ul(e)}function fg(e){console.error(e)}function dg(e){Ul(e)}function no(e,r){try{var a=e.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function pg(e,r,a){try{var u=e.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Zh(e,r,a){return a=jr(a),a.tag=3,a.payload={element:null},a.callback=function(){no(e,r)},a}function mg(e){return e=jr(e),e.tag=3,e}function gg(e,r,a,u){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=u.value;e.payload=function(){return f(d)},e.callback=function(){pg(r,a,u)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){pg(r,a,u),typeof f!="function"&&(Qr===null?Qr=new Set([this]):Qr.add(this));var S=u.stack;this.componentDidCatch(u.value,{componentStack:S!==null?S:""})})}function e1(e,r,a,u,f){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=a.alternate,r!==null&&Es(r,a,f,!0),a=ci.current,a!==null){switch(a.tag){case 31:case 13:return Si===null?yo():a.alternate===null&&xe===0&&(xe=3),a.flags&=-257,a.flags|=65536,a.lanes=f,u===jl?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([u]):r.add(u),bc(e,u,f)),!1;case 22:return a.flags|=65536,u===jl?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([u]):a.add(u)),bc(e,u,f)),!1}throw Error(n(435,a.tag))}return bc(e,u,f),yo(),!1}if(Wt)return r=ci.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,u!==mh&&(e=Error(n(422),{cause:u}),wa(bi(e,a)))):(u!==mh&&(r=Error(n(423),{cause:u}),wa(bi(r,a))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,u=bi(u,a),f=Zh(e.stateNode,u,f),wh(e,f),xe!==4&&(xe=2)),!1;var d=Error(n(520),{cause:u});if(d=bi(d,a),ja===null?ja=[d]:ja.push(d),xe!==4&&(xe=2),r===null)return!0;u=bi(u,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,e=f&-f,a.lanes|=e,e=Zh(a.stateNode,u,e),wh(a,e),!1;case 1:if(r=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Qr===null||!Qr.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=mg(f),gg(f,e,a,u),wh(a,f),!1}a=a.return}while(a!==null);return!1}var Kh=Error(n(461)),Ce=!1;function Xe(e,r,a,u){r.child=e===null?xm(r,null,a,u):Ln(r,e.child,a,u)}function yg(e,r,a,u,f){a=a.render;var d=r.ref;if("ref"in u){var v={};for(var S in u)S!=="ref"&&(v[S]=u[S])}else v=u;return Bn(r),u=Bh(e,r,a,v,d,f),S=Ih(),e!==null&&!Ce?(Nh(e,r,f),vr(e,r,f)):(Wt&&S&&dh(r),r.flags|=1,Xe(e,r,u,f),r.child)}function vg(e,r,a,u,f){if(e===null){var d=a.type;return typeof d=="function"&&!hh(d)&&d.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=d,_g(e,r,d,u,f)):(e=Gl(a.type,null,u,r,r.mode,f),e.ref=r.ref,e.return=r,r.child=e)}if(d=e.child,!sc(e,f)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:Ea,a(v,u)&&e.ref===r.ref)return vr(e,r,f)}return r.flags|=1,e=fr(d,u),e.ref=r.ref,e.return=r,r.child=e}function _g(e,r,a,u,f){if(e!==null){var d=e.memoizedProps;if(Ea(d,u)&&e.ref===r.ref)if(Ce=!1,r.pendingProps=u=d,sc(e,f))(e.flags&131072)!==0&&(Ce=!0);else return r.lanes=e.lanes,vr(e,r,f)}return Qh(e,r,a,u,f)}function xg(e,r,a,u){var f=u.children,d=e!==null?e.memoizedState:null;if(e===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,e!==null){for(u=r.child=e.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~d}else u=0,r.child=null;return bg(e,r,d,a,u)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},e!==null&&Xl(r,d!==null?d.cachePool:null),d!==null?Em(r,d):Rh(),Am(r);else return u=r.lanes=536870912,bg(e,r,d!==null?d.baseLanes|a:a,a,u)}else d!==null?(Xl(r,d.cachePool),Em(r,d),Wr(),r.memoizedState=null):(e!==null&&Xl(r,null),Rh(),Wr());return Xe(e,r,f,a),r.child}function Fa(e,r){return e!==null&&e.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function bg(e,r,a,u,f){var d=Th();return d=d===null?null:{parent:Se._currentValue,pool:d},r.memoizedState={baseLanes:a,cachePool:d},e!==null&&Xl(r,null),Rh(),Am(r),e!==null&&Es(e,r,u,!0),r.childLanes=f,null}function so(e,r){return r=lo({mode:r.mode,children:r.children},e.mode),r.ref=e.ref,e.child=r,r.return=e,r}function Tg(e,r,a){return Ln(r,e.child,null,a),e=so(r,r.pendingProps),e.flags|=2,fi(r),r.memoizedState=null,e}function i1(e,r,a){var u=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,e===null){if(Wt){if(u.mode==="hidden")return e=so(r,u),r.lanes=536870912,Fa(null,e);if(Dh(r),(e=he)?(e=Ny(e,Ai),e=e!==null&&e.data==="&"?e:null,e!==null&&(r.memoizedState={dehydrated:e,treeContext:zr!==null?{id:ji,overflow:qi}:null,retryLane:536870912,hydrationErrors:null},a=sm(e),a.return=r,r.child=a,He=r,he=null)):e=null,e===null)throw kr(r);return r.lanes=536870912,null}return so(r,u)}var d=e.memoizedState;if(d!==null){var v=d.dehydrated;if(Dh(r),f)if(r.flags&256)r.flags&=-257,r=Tg(e,r,a);else if(r.memoizedState!==null)r.child=e.child,r.flags|=128,r=null;else throw Error(n(558));else if(Ce||Es(e,r,a,!1),f=(a&e.childLanes)!==0,Ce||f){if(u=le,u!==null&&(v=ss(u,a),v!==0&&v!==d.retryLane))throw d.retryLane=v,Rn(e,v),ni(u,e,v),Kh;yo(),r=Tg(e,r,a)}else e=d.treeContext,he=wi(v.nextSibling),He=r,Wt=!0,Hr=null,Ai=!1,e!==null&&om(r,e),r=so(r,u),r.flags|=4096;return r}return e=fr(e.child,{mode:u.mode,children:u.children}),e.ref=r.ref,r.child=e,e.return=r,e}function ao(e,r){var a=r.ref;if(a===null)e!==null&&e.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(n(284));(e===null||e.ref!==a)&&(r.flags|=4194816)}}function Qh(e,r,a,u,f){return Bn(r),a=Bh(e,r,a,u,void 0,f),u=Ih(),e!==null&&!Ce?(Nh(e,r,f),vr(e,r,f)):(Wt&&u&&dh(r),r.flags|=1,Xe(e,r,a,f),r.child)}function Eg(e,r,a,u,f,d){return Bn(r),r.updateQueue=null,a=wm(r,u,a,f),Sm(e),u=Ih(),e!==null&&!Ce?(Nh(e,r,d),vr(e,r,d)):(Wt&&u&&dh(r),r.flags|=1,Xe(e,r,a,d),r.child)}function Ag(e,r,a,u,f){if(Bn(r),r.stateNode===null){var d=_s,v=a.contextType;typeof v=="object"&&v!==null&&(d=ke(v)),d=new a(u,d),r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=$h,r.stateNode=d,d._reactInternals=r,d=r.stateNode,d.props=u,d.state=r.memoizedState,d.refs={},Ah(r),v=a.contextType,d.context=typeof v=="object"&&v!==null?ke(v):_s,d.state=r.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Wh(r,a,v,u),d.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&$h.enqueueReplaceState(d,d.state,null),Ia(r,u,d,f),Ba(),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(e===null){d=r.stateNode;var S=r.memoizedProps,F=Fn(a,S);d.props=F;var W=d.context,et=a.contextType;v=_s,typeof et=="object"&&et!==null&&(v=ke(et));var st=a.getDerivedStateFromProps;et=typeof st=="function"||typeof d.getSnapshotBeforeUpdate=="function",S=r.pendingProps!==S,et||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(S||W!==v)&&hg(r,d,u,v),Vr=!1;var $=r.memoizedState;d.state=$,Ia(r,u,d,f),Ba(),W=r.memoizedState,S||$!==W||Vr?(typeof st=="function"&&(Wh(r,a,st,u),W=r.memoizedState),(F=Vr||ug(r,a,F,u,$,W,v))?(et||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(r.flags|=4194308)):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=W),d.props=u,d.state=W,d.context=v,u=F):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{d=r.stateNode,Sh(e,r),v=r.memoizedProps,et=Fn(a,v),d.props=et,st=r.pendingProps,$=d.context,W=a.contextType,F=_s,typeof W=="object"&&W!==null&&(F=ke(W)),S=a.getDerivedStateFromProps,(W=typeof S=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==st||$!==F)&&hg(r,d,u,F),Vr=!1,$=r.memoizedState,d.state=$,Ia(r,u,d,f),Ba();var Q=r.memoizedState;v!==st||$!==Q||Vr||e!==null&&e.dependencies!==null&&Hl(e.dependencies)?(typeof S=="function"&&(Wh(r,a,S,u),Q=r.memoizedState),(et=Vr||ug(r,a,et,u,$,Q,F)||e!==null&&e.dependencies!==null&&Hl(e.dependencies))?(W||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(u,Q,F),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(u,Q,F)),typeof d.componentDidUpdate=="function"&&(r.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&$===e.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&$===e.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=Q),d.props=u,d.state=Q,d.context=F,u=et):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&$===e.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&$===e.memoizedState||(r.flags|=1024),u=!1)}return d=u,ao(e,r),u=(r.flags&128)!==0,d||u?(d=r.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:d.render(),r.flags|=1,e!==null&&u?(r.child=Ln(r,e.child,null,f),r.child=Ln(r,null,a,f)):Xe(e,r,a,f),r.memoizedState=d.state,e=r.child):e=vr(e,r,f),e}function Sg(e,r,a,u){return Dn(),r.flags|=256,Xe(e,r,a,u),r.child}var Jh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function tc(e){return{baseLanes:e,cachePool:pm()}}function ec(e,r,a){return e=e!==null?e.childLanes&~a:0,r&&(e|=pi),e}function wg(e,r,a){var u=r.pendingProps,f=!1,d=(r.flags&128)!==0,v;if((v=d)||(v=e!==null&&e.memoizedState===null?!1:(Te.current&2)!==0),v&&(f=!0,r.flags&=-129),v=(r.flags&32)!==0,r.flags&=-33,e===null){if(Wt){if(f?Yr(r):Wr(),(e=he)?(e=Ny(e,Ai),e=e!==null&&e.data!=="&"?e:null,e!==null&&(r.memoizedState={dehydrated:e,treeContext:zr!==null?{id:ji,overflow:qi}:null,retryLane:536870912,hydrationErrors:null},a=sm(e),a.return=r,r.child=a,He=r,he=null)):e=null,e===null)throw kr(r);return Pc(e)?r.lanes=32:r.lanes=536870912,null}var S=u.children;return u=u.fallback,f?(Wr(),f=r.mode,S=lo({mode:"hidden",children:S},f),u=Mn(u,f,a,null),S.return=r,u.return=r,S.sibling=u,r.child=S,u=r.child,u.memoizedState=tc(a),u.childLanes=ec(e,v,a),r.memoizedState=Jh,Fa(null,u)):(Yr(r),ic(r,S))}var F=e.memoizedState;if(F!==null&&(S=F.dehydrated,S!==null)){if(d)r.flags&256?(Yr(r),r.flags&=-257,r=rc(e,r,a)):r.memoizedState!==null?(Wr(),r.child=e.child,r.flags|=128,r=null):(Wr(),S=u.fallback,f=r.mode,u=lo({mode:"visible",children:u.children},f),S=Mn(S,f,a,null),S.flags|=2,u.return=r,S.return=r,u.sibling=S,r.child=u,Ln(r,e.child,null,a),u=r.child,u.memoizedState=tc(a),u.childLanes=ec(e,v,a),r.memoizedState=Jh,r=Fa(null,u));else if(Yr(r),Pc(S)){if(v=S.nextSibling&&S.nextSibling.dataset,v)var W=v.dgst;v=W,u=Error(n(419)),u.stack="",u.digest=v,wa({value:u,source:null,stack:null}),r=rc(e,r,a)}else if(Ce||Es(e,r,a,!1),v=(a&e.childLanes)!==0,Ce||v){if(v=le,v!==null&&(u=ss(v,a),u!==0&&u!==F.retryLane))throw F.retryLane=u,Rn(e,u),ni(v,e,u),Kh;Lc(S)||yo(),r=rc(e,r,a)}else Lc(S)?(r.flags|=192,r.child=e.child,r=null):(e=F.treeContext,he=wi(S.nextSibling),He=r,Wt=!0,Hr=null,Ai=!1,e!==null&&om(r,e),r=ic(r,u.children),r.flags|=4096);return r}return f?(Wr(),S=u.fallback,f=r.mode,F=e.child,W=F.sibling,u=fr(F,{mode:"hidden",children:u.children}),u.subtreeFlags=F.subtreeFlags&65011712,W!==null?S=fr(W,S):(S=Mn(S,f,a,null),S.flags|=2),S.return=r,u.return=r,u.sibling=S,r.child=u,Fa(null,u),u=r.child,S=e.child.memoizedState,S===null?S=tc(a):(f=S.cachePool,f!==null?(F=Se._currentValue,f=f.parent!==F?{parent:F,pool:F}:f):f=pm(),S={baseLanes:S.baseLanes|a,cachePool:f}),u.memoizedState=S,u.childLanes=ec(e,v,a),r.memoizedState=Jh,Fa(e.child,u)):(Yr(r),a=e.child,e=a.sibling,a=fr(a,{mode:"visible",children:u.children}),a.return=r,a.sibling=null,e!==null&&(v=r.deletions,v===null?(r.deletions=[e],r.flags|=16):v.push(e)),r.child=a,r.memoizedState=null,a)}function ic(e,r){return r=lo({mode:"visible",children:r},e.mode),r.return=e,e.child=r}function lo(e,r){return e=hi(22,e,null,r),e.lanes=0,e}function rc(e,r,a){return Ln(r,e.child,null,a),e=ic(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function Cg(e,r,a){e.lanes|=r;var u=e.alternate;u!==null&&(u.lanes|=r),vh(e.return,r,a)}function nc(e,r,a,u,f,d){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:f,treeForkCount:d}:(v.isBackwards=r,v.rendering=null,v.renderingStartTime=0,v.last=u,v.tail=a,v.tailMode=f,v.treeForkCount=d)}function Rg(e,r,a){var u=r.pendingProps,f=u.revealOrder,d=u.tail;u=u.children;var v=Te.current,S=(v&2)!==0;if(S?(v=v&1|2,r.flags|=128):v&=1,P(Te,v),Xe(e,r,u,a),u=Wt?Sa:0,!S&&e!==null&&(e.flags&128)!==0)t:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Cg(e,a,r);else if(e.tag===19)Cg(e,a,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break t;for(;e.sibling===null;){if(e.return===null||e.return===r)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(a=r.child,f=null;a!==null;)e=a.alternate,e!==null&&$l(e)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),nc(r,!1,f,a,d,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(e=f.alternate,e!==null&&$l(e)===null){r.child=f;break}e=f.sibling,f.sibling=a,a=f,f=e}nc(r,!0,a,null,d,u);break;case"together":nc(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function vr(e,r,a){if(e!==null&&(r.dependencies=e.dependencies),Kr|=r.lanes,(a&r.childLanes)===0)if(e!==null){if(Es(e,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(e!==null&&r.child!==e.child)throw Error(n(153));if(r.child!==null){for(e=r.child,a=fr(e,e.pendingProps),r.child=a,a.return=r;e.sibling!==null;)e=e.sibling,a=a.sibling=fr(e,e.pendingProps),a.return=r;a.sibling=null}return r.child}function sc(e,r){return(e.lanes&r)!==0?!0:(e=e.dependencies,!!(e!==null&&Hl(e)))}function r1(e,r,a){switch(r.tag){case 3:ft(r,r.stateNode.containerInfo),Xr(r,Se,e.memoizedState.cache),Dn();break;case 27:case 5:ut(r);break;case 4:ft(r,r.stateNode.containerInfo);break;case 10:Xr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Dh(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(Yr(r),r.flags|=128,null):(a&r.child.childLanes)!==0?wg(e,r,a):(Yr(r),e=vr(e,r,a),e!==null?e.sibling:null);Yr(r);break;case 19:var f=(e.flags&128)!==0;if(u=(a&r.childLanes)!==0,u||(Es(e,r,a,!1),u=(a&r.childLanes)!==0),f){if(u)return Rg(e,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),P(Te,Te.current),u)break;return null;case 22:return r.lanes=0,xg(e,r,a,r.pendingProps);case 24:Xr(r,Se,e.memoizedState.cache)}return vr(e,r,a)}function Mg(e,r,a){if(e!==null)if(e.memoizedProps!==r.pendingProps)Ce=!0;else{if(!sc(e,a)&&(r.flags&128)===0)return Ce=!1,r1(e,r,a);Ce=(e.flags&131072)!==0}else Ce=!1,Wt&&(r.flags&1048576)!==0&&lm(r,Sa,r.index);switch(r.lanes=0,r.tag){case 16:t:{var u=r.pendingProps;if(e=Nn(r.elementType),r.type=e,typeof e=="function")hh(e)?(u=Fn(e,u),r.tag=1,r=Ag(null,r,e,u,a)):(r.tag=0,r=Qh(null,r,e,u,a));else{if(e!=null){var f=e.$$typeof;if(f===L){r.tag=11,r=yg(null,r,e,u,a);break t}else if(f===D){r.tag=14,r=vg(null,r,e,u,a);break t}}throw r=J(e)||e,Error(n(306,r,""))}}return r;case 0:return Qh(e,r,r.type,r.pendingProps,a);case 1:return u=r.type,f=Fn(u,r.pendingProps),Ag(e,r,u,f,a);case 3:t:{if(ft(r,r.stateNode.containerInfo),e===null)throw Error(n(387));u=r.pendingProps;var d=r.memoizedState;f=d.element,Sh(e,r),Ia(r,u,null,a);var v=r.memoizedState;if(u=v.cache,Xr(r,Se,u),u!==d.cache&&_h(r,[Se],a,!0),Ba(),u=v.element,d.isDehydrated)if(d={element:u,isDehydrated:!1,cache:v.cache},r.updateQueue.baseState=d,r.memoizedState=d,r.flags&256){r=Sg(e,r,u,a);break t}else if(u!==f){f=bi(Error(n(424)),r),wa(f),r=Sg(e,r,u,a);break t}else{switch(e=r.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(he=wi(e.firstChild),He=r,Wt=!0,Hr=null,Ai=!0,a=xm(r,null,u,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Dn(),u===f){r=vr(e,r,a);break t}Xe(e,r,u,a)}r=r.child}return r;case 26:return ao(e,r),e===null?(a=zy(r.type,null,r.pendingProps,null))?r.memoizedState=a:Wt||(a=r.type,e=r.pendingProps,u=Ao(lt.current).createElement(a),u[be]=r,u[ze]=e,Ve(u,a,e),Ne(u),r.stateNode=u):r.memoizedState=zy(r.type,e.memoizedProps,r.pendingProps,e.memoizedState),null;case 27:return ut(r),e===null&&Wt&&(u=r.stateNode=Py(r.type,r.pendingProps,lt.current),He=r,Ai=!0,f=he,rn(r.type)?(Fc=f,he=wi(u.firstChild)):he=f),Xe(e,r,r.pendingProps.children,a),ao(e,r),e===null&&(r.flags|=4194304),r.child;case 5:return e===null&&Wt&&((f=u=he)&&(u=I1(u,r.type,r.pendingProps,Ai),u!==null?(r.stateNode=u,He=r,he=wi(u.firstChild),Ai=!1,f=!0):f=!1),f||kr(r)),ut(r),f=r.type,d=r.pendingProps,v=e!==null?e.memoizedProps:null,u=d.children,Ic(f,d)?u=null:v!==null&&Ic(f,v)&&(r.flags|=32),r.memoizedState!==null&&(f=Bh(e,r,Wb,null,null,a),Ja._currentValue=f),ao(e,r),Xe(e,r,u,a),r.child;case 6:return e===null&&Wt&&((e=a=he)&&(a=N1(a,r.pendingProps,Ai),a!==null?(r.stateNode=a,He=r,he=null,e=!0):e=!1),e||kr(r)),null;case 13:return wg(e,r,a);case 4:return ft(r,r.stateNode.containerInfo),u=r.pendingProps,e===null?r.child=Ln(r,null,u,a):Xe(e,r,u,a),r.child;case 11:return yg(e,r,r.type,r.pendingProps,a);case 7:return Xe(e,r,r.pendingProps,a),r.child;case 8:return Xe(e,r,r.pendingProps.children,a),r.child;case 12:return Xe(e,r,r.pendingProps.children,a),r.child;case 10:return u=r.pendingProps,Xr(r,r.type,u.value),Xe(e,r,u.children,a),r.child;case 9:return f=r.type._context,u=r.pendingProps.children,Bn(r),f=ke(f),u=u(f),r.flags|=1,Xe(e,r,u,a),r.child;case 14:return vg(e,r,r.type,r.pendingProps,a);case 15:return _g(e,r,r.type,r.pendingProps,a);case 19:return Rg(e,r,a);case 31:return i1(e,r,a);case 22:return xg(e,r,a,r.pendingProps);case 24:return Bn(r),u=ke(Se),e===null?(f=Th(),f===null&&(f=le,d=xh(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),r.memoizedState={parent:u,cache:f},Ah(r),Xr(r,Se,f)):((e.lanes&a)!==0&&(Sh(e,r),Ia(r,null,null,a),Ba()),f=e.memoizedState,d=r.memoizedState,f.parent!==u?(f={parent:u,cache:u},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Xr(r,Se,u)):(u=d.cache,Xr(r,Se,u),u!==f.cache&&_h(r,[Se],a,!0))),Xe(e,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(n(156,r.tag))}function _r(e){e.flags|=4}function ac(e,r,a,u,f){if((r=(e.mode&32)!==0)&&(r=!1),r){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(iy())e.flags|=8192;else throw Un=jl,Eh}else e.flags&=-16777217}function Dg(e,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!jy(r))if(iy())e.flags|=8192;else throw Un=jl,Eh}function oo(e,r){r!==null&&(e.flags|=4),e.flags&16384&&(r=e.tag!==22?ar():536870912,e.lanes|=r,Us|=r)}function Ga(e,r){if(!Wt)switch(e.tailMode){case"hidden":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:u.sibling=null}}function ce(e){var r=e.alternate!==null&&e.alternate.child===e.child,a=0,u=0;if(r)for(var f=e.child;f!==null;)a|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)a|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=u,e.childLanes=a,r}function n1(e,r,a){var u=r.pendingProps;switch(ph(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ce(r),null;case 1:return ce(r),null;case 3:return a=r.stateNode,u=null,e!==null&&(u=e.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),mr(Se),ct(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ts(r)?_r(r):e===null||e.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,gh())),ce(r),null;case 26:var f=r.type,d=r.memoizedState;return e===null?(_r(r),d!==null?(ce(r),Dg(r,d)):(ce(r),ac(r,f,null,u,a))):d?d!==e.memoizedState?(_r(r),ce(r),Dg(r,d)):(ce(r),r.flags&=-16777217):(e=e.memoizedProps,e!==u&&_r(r),ce(r),ac(r,f,e,u,a)),null;case 27:if(yt(r),a=lt.current,f=r.type,e!==null&&r.stateNode!=null)e.memoizedProps!==u&&_r(r);else{if(!u){if(r.stateNode===null)throw Error(n(166));return ce(r),null}e=V.current,Ts(r)?um(r):(e=Py(f,u,a),r.stateNode=e,_r(r))}return ce(r),null;case 5:if(yt(r),f=r.type,e!==null&&r.stateNode!=null)e.memoizedProps!==u&&_r(r);else{if(!u){if(r.stateNode===null)throw Error(n(166));return ce(r),null}if(d=V.current,Ts(r))um(r);else{var v=Ao(lt.current);switch(d){case 1:d=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=v.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof u.is=="string"?v.createElement("select",{is:u.is}):v.createElement("select"),u.multiple?d.multiple=!0:u.size&&(d.size=u.size);break;default:d=typeof u.is=="string"?v.createElement(f,{is:u.is}):v.createElement(f)}}d[be]=r,d[ze]=u;t:for(v=r.child;v!==null;){if(v.tag===5||v.tag===6)d.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===r)break t;for(;v.sibling===null;){if(v.return===null||v.return===r)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}r.stateNode=d;t:switch(Ve(d,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break t;case"img":u=!0;break t;default:u=!1}u&&_r(r)}}return ce(r),ac(r,r.type,e===null?null:e.memoizedProps,r.pendingProps,a),null;case 6:if(e&&r.stateNode!=null)e.memoizedProps!==u&&_r(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(n(166));if(e=lt.current,Ts(r)){if(e=r.stateNode,a=r.memoizedProps,u=null,f=He,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}e[be]=r,e=!!(e.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||wy(e.nodeValue,a)),e||kr(r,!0)}else e=Ao(e).createTextNode(u),e[be]=r,r.stateNode=e}return ce(r),null;case 31:if(a=r.memoizedState,e===null||e.memoizedState!==null){if(u=Ts(r),a!==null){if(e===null){if(!u)throw Error(n(318));if(e=r.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(557));e[be]=r}else Dn(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ce(r),e=!1}else a=gh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return r.flags&256?(fi(r),r):(fi(r),null);if((r.flags&128)!==0)throw Error(n(558))}return ce(r),null;case 13:if(u=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=Ts(r),u!==null&&u.dehydrated!==null){if(e===null){if(!f)throw Error(n(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));f[be]=r}else Dn(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ce(r),f=!1}else f=gh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(fi(r),r):(fi(r),null)}return fi(r),(r.flags&128)!==0?(r.lanes=a,r):(a=u!==null,e=e!==null&&e.memoizedState!==null,a&&(u=r.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),d=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(d=u.memoizedState.cachePool.pool),d!==f&&(u.flags|=2048)),a!==e&&a&&(r.child.flags|=8192),oo(r,r.updateQueue),ce(r),null);case 4:return ct(),e===null&&Rc(r.stateNode.containerInfo),ce(r),null;case 10:return mr(r.type),ce(r),null;case 19:if(I(Te),u=r.memoizedState,u===null)return ce(r),null;if(f=(r.flags&128)!==0,d=u.rendering,d===null)if(f)Ga(u,!1);else{if(xe!==0||e!==null&&(e.flags&128)!==0)for(e=r.child;e!==null;){if(d=$l(e),d!==null){for(r.flags|=128,Ga(u,!1),e=d.updateQueue,r.updateQueue=e,oo(r,e),r.subtreeFlags=0,e=a,a=r.child;a!==null;)nm(a,e),a=a.sibling;return P(Te,Te.current&1|2),Wt&&dr(r,u.treeForkCount),r.child}e=e.sibling}u.tail!==null&&vt()>po&&(r.flags|=128,f=!0,Ga(u,!1),r.lanes=4194304)}else{if(!f)if(e=$l(d),e!==null){if(r.flags|=128,f=!0,e=e.updateQueue,r.updateQueue=e,oo(r,e),Ga(u,!0),u.tail===null&&u.tailMode==="hidden"&&!d.alternate&&!Wt)return ce(r),null}else 2*vt()-u.renderingStartTime>po&&a!==536870912&&(r.flags|=128,f=!0,Ga(u,!1),r.lanes=4194304);u.isBackwards?(d.sibling=r.child,r.child=d):(e=u.last,e!==null?e.sibling=d:r.child=d,u.last=d)}return u.tail!==null?(e=u.tail,u.rendering=e,u.tail=e.sibling,u.renderingStartTime=vt(),e.sibling=null,a=Te.current,P(Te,f?a&1|2:a&1),Wt&&dr(r,u.treeForkCount),e):(ce(r),null);case 22:case 23:return fi(r),Mh(),u=r.memoizedState!==null,e!==null?e.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(a&536870912)!==0&&(r.flags&128)===0&&(ce(r),r.subtreeFlags&6&&(r.flags|=8192)):ce(r),a=r.updateQueue,a!==null&&oo(r,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==a&&(r.flags|=2048),e!==null&&I(In),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),mr(Se),ce(r),null;case 25:return null;case 30:return null}throw Error(n(156,r.tag))}function s1(e,r){switch(ph(r),r.tag){case 1:return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return mr(Se),ct(),e=r.flags,(e&65536)!==0&&(e&128)===0?(r.flags=e&-65537|128,r):null;case 26:case 27:case 5:return yt(r),null;case 31:if(r.memoizedState!==null){if(fi(r),r.alternate===null)throw Error(n(340));Dn()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 13:if(fi(r),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(n(340));Dn()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return I(Te),null;case 4:return ct(),null;case 10:return mr(r.type),null;case 22:case 23:return fi(r),Mh(),e!==null&&I(In),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 24:return mr(Se),null;case 25:return null;default:return null}}function Og(e,r){switch(ph(r),r.tag){case 3:mr(Se),ct();break;case 26:case 27:case 5:yt(r);break;case 4:ct();break;case 31:r.memoizedState!==null&&fi(r);break;case 13:fi(r);break;case 19:I(Te);break;case 10:mr(r.type);break;case 22:case 23:fi(r),Mh(),e!==null&&I(In);break;case 24:mr(Se)}}function za(e,r){try{var a=r.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var f=u.next;a=f;do{if((a.tag&e)===e){u=void 0;var d=a.create,v=a.inst;u=d(),v.destroy=u}a=a.next}while(a!==f)}}catch(S){ie(r,r.return,S)}}function $r(e,r,a){try{var u=r.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var d=f.next;u=d;do{if((u.tag&e)===e){var v=u.inst,S=v.destroy;if(S!==void 0){v.destroy=void 0,f=r;var F=a,W=S;try{W()}catch(et){ie(f,F,et)}}}u=u.next}while(u!==d)}}catch(et){ie(r,r.return,et)}}function Bg(e){var r=e.updateQueue;if(r!==null){var a=e.stateNode;try{Tm(r,a)}catch(u){ie(e,e.return,u)}}}function Ig(e,r,a){a.props=Fn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(u){ie(e,r,u)}}function Ha(e,r){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var u=e.stateNode;break;case 30:u=e.stateNode;break;default:u=e.stateNode}typeof a=="function"?e.refCleanup=a(u):a.current=u}}catch(f){ie(e,r,f)}}function Yi(e,r){var a=e.ref,u=e.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(f){ie(e,r,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){ie(e,r,f)}else a.current=null}function Ng(e){var r=e.type,a=e.memoizedProps,u=e.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break t;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(f){ie(e,e.return,f)}}function lc(e,r,a){try{var u=e.stateNode;C1(u,e.type,a,r),u[ze]=r}catch(f){ie(e,e.return,f)}}function Ug(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&rn(e.type)||e.tag===4}function oc(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Ug(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&rn(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function uc(e,r,a){var u=e.tag;if(u===5||u===6)e=e.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(e),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=hr));else if(u!==4&&(u===27&&rn(e.type)&&(a=e.stateNode,r=null),e=e.child,e!==null))for(uc(e,r,a),e=e.sibling;e!==null;)uc(e,r,a),e=e.sibling}function uo(e,r,a){var u=e.tag;if(u===5||u===6)e=e.stateNode,r?a.insertBefore(e,r):a.appendChild(e);else if(u!==4&&(u===27&&rn(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(uo(e,r,a),e=e.sibling;e!==null;)uo(e,r,a),e=e.sibling}function Lg(e){var r=e.stateNode,a=e.memoizedProps;try{for(var u=e.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Ve(r,u,a),r[be]=e,r[ze]=a}catch(d){ie(e,e.return,d)}}var xr=!1,Re=!1,hc=!1,Pg=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function a1(e,r){if(e=e.containerInfo,Oc=Oo,e=$p(e),rh(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var f=u.anchorOffset,d=u.focusNode;u=u.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var v=0,S=-1,F=-1,W=0,et=0,st=e,$=null;e:for(;;){for(var Q;st!==a||f!==0&&st.nodeType!==3||(S=v+f),st!==d||u!==0&&st.nodeType!==3||(F=v+u),st.nodeType===3&&(v+=st.nodeValue.length),(Q=st.firstChild)!==null;)$=st,st=Q;for(;;){if(st===e)break e;if($===a&&++W===f&&(S=v),$===d&&++et===u&&(F=v),(Q=st.nextSibling)!==null)break;st=$,$=st.parentNode}st=Q}a=S===-1||F===-1?null:{start:S,end:F}}else a=null}a=a||{start:0,end:0}}else a=null;for(Bc={focusedElem:e,selectionRange:a},Oo=!1,Ue=r;Ue!==null;)if(r=Ue,e=r.child,(r.subtreeFlags&1028)!==0&&e!==null)e.return=r,Ue=e;else for(;Ue!==null;){switch(r=Ue,d=r.alternate,e=r.flags,r.tag){case 0:if((e&4)!==0&&(e=r.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)f=e[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=r,f=d.memoizedProps,d=d.memoizedState,u=a.stateNode;try{var bt=Fn(a.type,f);e=u.getSnapshotBeforeUpdate(bt,d),u.__reactInternalSnapshotBeforeUpdate=e}catch(It){ie(a,a.return,It)}}break;case 3:if((e&1024)!==0){if(e=r.stateNode.containerInfo,a=e.nodeType,a===9)Uc(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Uc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(n(163))}if(e=r.sibling,e!==null){e.return=r.return,Ue=e;break}Ue=r.return}}function Fg(e,r,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:Tr(e,a),u&4&&za(5,a);break;case 1:if(Tr(e,a),u&4)if(e=a.stateNode,r===null)try{e.componentDidMount()}catch(v){ie(a,a.return,v)}else{var f=Fn(a.type,r.memoizedProps);r=r.memoizedState;try{e.componentDidUpdate(f,r,e.__reactInternalSnapshotBeforeUpdate)}catch(v){ie(a,a.return,v)}}u&64&&Bg(a),u&512&&Ha(a,a.return);break;case 3:if(Tr(e,a),u&64&&(e=a.updateQueue,e!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Tm(e,r)}catch(v){ie(a,a.return,v)}}break;case 27:r===null&&u&4&&Lg(a);case 26:case 5:Tr(e,a),r===null&&u&4&&Ng(a),u&512&&Ha(a,a.return);break;case 12:Tr(e,a);break;case 31:Tr(e,a),u&4&&Hg(e,a);break;case 13:Tr(e,a),u&4&&kg(e,a),u&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=m1.bind(null,a),U1(e,a))));break;case 22:if(u=a.memoizedState!==null||xr,!u){r=r!==null&&r.memoizedState!==null||Re,f=xr;var d=Re;xr=u,(Re=r)&&!d?Er(e,a,(a.subtreeFlags&8772)!==0):Tr(e,a),xr=f,Re=d}break;case 30:break;default:Tr(e,a)}}function Gg(e){var r=e.alternate;r!==null&&(e.alternate=null,Gg(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&pa(r)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var me=null,ti=!1;function br(e,r,a){for(a=a.child;a!==null;)zg(e,r,a),a=a.sibling}function zg(e,r,a){if(Ge&&typeof Ge.onCommitFiberUnmount=="function")try{Ge.onCommitFiberUnmount(Tn,a)}catch{}switch(a.tag){case 26:Re||Yi(a,r),br(e,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Re||Yi(a,r);var u=me,f=ti;rn(a.type)&&(me=a.stateNode,ti=!1),br(e,r,a),Za(a.stateNode),me=u,ti=f;break;case 5:Re||Yi(a,r);case 6:if(u=me,f=ti,me=null,br(e,r,a),me=u,ti=f,me!==null)if(ti)try{(me.nodeType===9?me.body:me.nodeName==="HTML"?me.ownerDocument.body:me).removeChild(a.stateNode)}catch(d){ie(a,r,d)}else try{me.removeChild(a.stateNode)}catch(d){ie(a,r,d)}break;case 18:me!==null&&(ti?(e=me,By(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Xs(e)):By(me,a.stateNode));break;case 4:u=me,f=ti,me=a.stateNode.containerInfo,ti=!0,br(e,r,a),me=u,ti=f;break;case 0:case 11:case 14:case 15:$r(2,a,r),Re||$r(4,a,r),br(e,r,a);break;case 1:Re||(Yi(a,r),u=a.stateNode,typeof u.componentWillUnmount=="function"&&Ig(a,r,u)),br(e,r,a);break;case 21:br(e,r,a);break;case 22:Re=(u=Re)||a.memoizedState!==null,br(e,r,a),Re=u;break;default:br(e,r,a)}}function Hg(e,r){if(r.memoizedState===null&&(e=r.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Xs(e)}catch(a){ie(r,r.return,a)}}}function kg(e,r){if(r.memoizedState===null&&(e=r.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Xs(e)}catch(a){ie(r,r.return,a)}}function l1(e){switch(e.tag){case 31:case 13:case 19:var r=e.stateNode;return r===null&&(r=e.stateNode=new Pg),r;case 22:return e=e.stateNode,r=e._retryCache,r===null&&(r=e._retryCache=new Pg),r;default:throw Error(n(435,e.tag))}}function ho(e,r){var a=l1(e);r.forEach(function(u){if(!a.has(u)){a.add(u);var f=g1.bind(null,e,u);u.then(f,f)}})}function ei(e,r){var a=r.deletions;if(a!==null)for(var u=0;u<a.length;u++){var f=a[u],d=e,v=r,S=v;t:for(;S!==null;){switch(S.tag){case 27:if(rn(S.type)){me=S.stateNode,ti=!1;break t}break;case 5:me=S.stateNode,ti=!1;break t;case 3:case 4:me=S.stateNode.containerInfo,ti=!0;break t}S=S.return}if(me===null)throw Error(n(160));zg(d,v,f),me=null,ti=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Xg(r,e),r=r.sibling}var Ii=null;function Xg(e,r){var a=e.alternate,u=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ei(r,e),ii(e),u&4&&($r(3,e,e.return),za(3,e),$r(5,e,e.return));break;case 1:ei(r,e),ii(e),u&512&&(Re||a===null||Yi(a,a.return)),u&64&&xr&&(e=e.updateQueue,e!==null&&(u=e.callbacks,u!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var f=Ii;if(ei(r,e),ii(e),u&512&&(Re||a===null||Yi(a,a.return)),u&4){var d=a!==null?a.memoizedState:null;if(u=e.memoizedState,a===null)if(u===null)if(e.stateNode===null){t:{u=e.type,a=e.memoizedProps,f=f.ownerDocument||f;e:switch(u){case"title":d=f.getElementsByTagName("title")[0],(!d||d[Vi]||d[be]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(u),f.head.insertBefore(d,f.querySelector("head > title"))),Ve(d,u,a),d[be]=e,Ne(d),u=d;break t;case"link":var v=Xy("link","href",f).get(u+(a.href||""));if(v){for(var S=0;S<v.length;S++)if(d=v[S],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(S,1);break e}}d=f.createElement(u),Ve(d,u,a),f.head.appendChild(d);break;case"meta":if(v=Xy("meta","content",f).get(u+(a.content||""))){for(S=0;S<v.length;S++)if(d=v[S],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(S,1);break e}}d=f.createElement(u),Ve(d,u,a),f.head.appendChild(d);break;default:throw Error(n(468,u))}d[be]=e,Ne(d),u=d}e.stateNode=u}else Vy(f,e.type,e.stateNode);else e.stateNode=ky(f,u,e.memoizedProps);else d!==u?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,u===null?Vy(f,e.type,e.stateNode):ky(f,u,e.memoizedProps)):u===null&&e.stateNode!==null&&lc(e,e.memoizedProps,a.memoizedProps)}break;case 27:ei(r,e),ii(e),u&512&&(Re||a===null||Yi(a,a.return)),a!==null&&u&4&&lc(e,e.memoizedProps,a.memoizedProps);break;case 5:if(ei(r,e),ii(e),u&512&&(Re||a===null||Yi(a,a.return)),e.flags&32){f=e.stateNode;try{fs(f,"")}catch(bt){ie(e,e.return,bt)}}u&4&&e.stateNode!=null&&(f=e.memoizedProps,lc(e,f,a!==null?a.memoizedProps:f)),u&1024&&(hc=!0);break;case 6:if(ei(r,e),ii(e),u&4){if(e.stateNode===null)throw Error(n(162));u=e.memoizedProps,a=e.stateNode;try{a.nodeValue=u}catch(bt){ie(e,e.return,bt)}}break;case 3:if(Co=null,f=Ii,Ii=So(r.containerInfo),ei(r,e),Ii=f,ii(e),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Xs(r.containerInfo)}catch(bt){ie(e,e.return,bt)}hc&&(hc=!1,Vg(e));break;case 4:u=Ii,Ii=So(e.stateNode.containerInfo),ei(r,e),ii(e),Ii=u;break;case 12:ei(r,e),ii(e);break;case 31:ei(r,e),ii(e),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,ho(e,u)));break;case 13:ei(r,e),ii(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(fo=vt()),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,ho(e,u)));break;case 22:f=e.memoizedState!==null;var F=a!==null&&a.memoizedState!==null,W=xr,et=Re;if(xr=W||f,Re=et||F,ei(r,e),Re=et,xr=W,ii(e),u&8192)t:for(r=e.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(a===null||F||xr||Re||Gn(e)),a=null,r=e;;){if(r.tag===5||r.tag===26){if(a===null){F=a=r;try{if(d=F.stateNode,f)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{S=F.stateNode;var st=F.memoizedProps.style,$=st!=null&&st.hasOwnProperty("display")?st.display:null;S.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(bt){ie(F,F.return,bt)}}}else if(r.tag===6){if(a===null){F=r;try{F.stateNode.nodeValue=f?"":F.memoizedProps}catch(bt){ie(F,F.return,bt)}}}else if(r.tag===18){if(a===null){F=r;try{var Q=F.stateNode;f?Iy(Q,!0):Iy(F.stateNode,!1)}catch(bt){ie(F,F.return,bt)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===e)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break t;for(;r.sibling===null;){if(r.return===null||r.return===e)break t;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=e.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,ho(e,a))));break;case 19:ei(r,e),ii(e),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,ho(e,u)));break;case 30:break;case 21:break;default:ei(r,e),ii(e)}}function ii(e){var r=e.flags;if(r&2){try{for(var a,u=e.return;u!==null;){if(Ug(u)){a=u;break}u=u.return}if(a==null)throw Error(n(160));switch(a.tag){case 27:var f=a.stateNode,d=oc(e);uo(e,d,f);break;case 5:var v=a.stateNode;a.flags&32&&(fs(v,""),a.flags&=-33);var S=oc(e);uo(e,S,v);break;case 3:case 4:var F=a.stateNode.containerInfo,W=oc(e);uc(e,W,F);break;default:throw Error(n(161))}}catch(et){ie(e,e.return,et)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function Vg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var r=e;Vg(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),e=e.sibling}}function Tr(e,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Fg(e,r.alternate,r),r=r.sibling}function Gn(e){for(e=e.child;e!==null;){var r=e;switch(r.tag){case 0:case 11:case 14:case 15:$r(4,r,r.return),Gn(r);break;case 1:Yi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Ig(r,r.return,a),Gn(r);break;case 27:Za(r.stateNode);case 26:case 5:Yi(r,r.return),Gn(r);break;case 22:r.memoizedState===null&&Gn(r);break;case 30:Gn(r);break;default:Gn(r)}e=e.sibling}}function Er(e,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,f=e,d=r,v=d.flags;switch(d.tag){case 0:case 11:case 15:Er(f,d,a),za(4,d);break;case 1:if(Er(f,d,a),u=d,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(W){ie(u,u.return,W)}if(u=d,f=u.updateQueue,f!==null){var S=u.stateNode;try{var F=f.shared.hiddenCallbacks;if(F!==null)for(f.shared.hiddenCallbacks=null,f=0;f<F.length;f++)bm(F[f],S)}catch(W){ie(u,u.return,W)}}a&&v&64&&Bg(d),Ha(d,d.return);break;case 27:Lg(d);case 26:case 5:Er(f,d,a),a&&u===null&&v&4&&Ng(d),Ha(d,d.return);break;case 12:Er(f,d,a);break;case 31:Er(f,d,a),a&&v&4&&Hg(f,d);break;case 13:Er(f,d,a),a&&v&4&&kg(f,d);break;case 22:d.memoizedState===null&&Er(f,d,a),Ha(d,d.return);break;case 30:break;default:Er(f,d,a)}r=r.sibling}}function cc(e,r){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(e=r.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Ca(a))}function fc(e,r){e=null,r.alternate!==null&&(e=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==e&&(r.refCount++,e!=null&&Ca(e))}function Ni(e,r,a,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)jg(e,r,a,u),r=r.sibling}function jg(e,r,a,u){var f=r.flags;switch(r.tag){case 0:case 11:case 15:Ni(e,r,a,u),f&2048&&za(9,r);break;case 1:Ni(e,r,a,u);break;case 3:Ni(e,r,a,u),f&2048&&(e=null,r.alternate!==null&&(e=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==e&&(r.refCount++,e!=null&&Ca(e)));break;case 12:if(f&2048){Ni(e,r,a,u),e=r.stateNode;try{var d=r.memoizedProps,v=d.id,S=d.onPostCommit;typeof S=="function"&&S(v,r.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(F){ie(r,r.return,F)}}else Ni(e,r,a,u);break;case 31:Ni(e,r,a,u);break;case 13:Ni(e,r,a,u);break;case 23:break;case 22:d=r.stateNode,v=r.alternate,r.memoizedState!==null?d._visibility&2?Ni(e,r,a,u):ka(e,r):d._visibility&2?Ni(e,r,a,u):(d._visibility|=2,Bs(e,r,a,u,(r.subtreeFlags&10256)!==0||!1)),f&2048&&cc(v,r);break;case 24:Ni(e,r,a,u),f&2048&&fc(r.alternate,r);break;default:Ni(e,r,a,u)}}function Bs(e,r,a,u,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var d=e,v=r,S=a,F=u,W=v.flags;switch(v.tag){case 0:case 11:case 15:Bs(d,v,S,F,f),za(8,v);break;case 23:break;case 22:var et=v.stateNode;v.memoizedState!==null?et._visibility&2?Bs(d,v,S,F,f):ka(d,v):(et._visibility|=2,Bs(d,v,S,F,f)),f&&W&2048&&cc(v.alternate,v);break;case 24:Bs(d,v,S,F,f),f&&W&2048&&fc(v.alternate,v);break;default:Bs(d,v,S,F,f)}r=r.sibling}}function ka(e,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=e,u=r,f=u.flags;switch(u.tag){case 22:ka(a,u),f&2048&&cc(u.alternate,u);break;case 24:ka(a,u),f&2048&&fc(u.alternate,u);break;default:ka(a,u)}r=r.sibling}}var Xa=8192;function Is(e,r,a){if(e.subtreeFlags&Xa)for(e=e.child;e!==null;)qg(e,r,a),e=e.sibling}function qg(e,r,a){switch(e.tag){case 26:Is(e,r,a),e.flags&Xa&&e.memoizedState!==null&&Y1(a,Ii,e.memoizedState,e.memoizedProps);break;case 5:Is(e,r,a);break;case 3:case 4:var u=Ii;Ii=So(e.stateNode.containerInfo),Is(e,r,a),Ii=u;break;case 22:e.memoizedState===null&&(u=e.alternate,u!==null&&u.memoizedState!==null?(u=Xa,Xa=16777216,Is(e,r,a),Xa=u):Is(e,r,a));break;default:Is(e,r,a)}}function Yg(e){var r=e.alternate;if(r!==null&&(e=r.child,e!==null)){r.child=null;do r=e.sibling,e.sibling=null,e=r;while(e!==null)}}function Va(e){var r=e.deletions;if((e.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];Ue=u,$g(u,e)}Yg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Wg(e),e=e.sibling}function Wg(e){switch(e.tag){case 0:case 11:case 15:Va(e),e.flags&2048&&$r(9,e,e.return);break;case 3:Va(e);break;case 12:Va(e);break;case 22:var r=e.stateNode;e.memoizedState!==null&&r._visibility&2&&(e.return===null||e.return.tag!==13)?(r._visibility&=-3,co(e)):Va(e);break;default:Va(e)}}function co(e){var r=e.deletions;if((e.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];Ue=u,$g(u,e)}Yg(e)}for(e=e.child;e!==null;){switch(r=e,r.tag){case 0:case 11:case 15:$r(8,r,r.return),co(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,co(r));break;default:co(r)}e=e.sibling}}function $g(e,r){for(;Ue!==null;){var a=Ue;switch(a.tag){case 0:case 11:case 15:$r(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ca(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Ue=u;else t:for(a=e;Ue!==null;){u=Ue;var f=u.sibling,d=u.return;if(Gg(u),u===a){Ue=null;break t}if(f!==null){f.return=d,Ue=f;break t}Ue=d}}}var o1={getCacheForType:function(e){var r=ke(Se),a=r.data.get(e);return a===void 0&&(a=e(),r.data.set(e,a)),a},cacheSignal:function(){return ke(Se).controller.signal}},u1=typeof WeakMap=="function"?WeakMap:Map,Jt=0,le=null,Xt=null,qt=0,ee=0,di=null,Zr=!1,Ns=!1,dc=!1,Ar=0,xe=0,Kr=0,zn=0,pc=0,pi=0,Us=0,ja=null,ri=null,mc=!1,fo=0,Zg=0,po=1/0,mo=null,Qr=null,Oe=0,Jr=null,Ls=null,Sr=0,gc=0,yc=null,Kg=null,qa=0,vc=null;function mi(){return(Jt&2)!==0&&qt!==0?qt&-qt:T.T!==null?Ac():as()}function Qg(){if(pi===0)if((qt&536870912)===0||Wt){var e=Pt;Pt<<=1,(Pt&3932160)===0&&(Pt=262144),pi=e}else pi=536870912;return e=ci.current,e!==null&&(e.flags|=32),pi}function ni(e,r,a){(e===le&&(ee===2||ee===9)||e.cancelPendingCommit!==null)&&(Ps(e,0),tn(e,qt,pi,!1)),Lr(e,a),((Jt&2)===0||e!==le)&&(e===le&&((Jt&2)===0&&(zn|=a),xe===4&&tn(e,qt,pi,!1)),Wi(e))}function Jg(e,r,a){if((Jt&6)!==0)throw Error(n(327));var u=!a&&(r&127)===0&&(r&e.expiredLanes)===0||Qe(e,r),f=u?f1(e,r):xc(e,r,!0),d=u;do{if(f===0){Ns&&!u&&tn(e,r,0,!1);break}else{if(a=e.current.alternate,d&&!h1(a)){f=xc(e,r,!1),d=!1;continue}if(f===2){if(d=r,e.errorRecoveryDisabledLanes&d)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){r=v;t:{var S=e;f=ja;var F=S.current.memoizedState.isDehydrated;if(F&&(Ps(S,v).flags|=256),v=xc(S,v,!1),v!==2){if(dc&&!F){S.errorRecoveryDisabledLanes|=d,zn|=d,f=4;break t}d=ri,ri=f,d!==null&&(ri===null?ri=d:ri.push.apply(ri,d))}f=v}if(d=!1,f!==2)continue}}if(f===1){Ps(e,0),tn(e,r,0,!0);break}t:{switch(u=e,d=f,d){case 0:case 1:throw Error(n(345));case 4:if((r&4194048)!==r)break;case 6:tn(u,r,pi,!Zr);break t;case 2:ri=null;break;case 3:case 5:break;default:throw Error(n(329))}if((r&62914560)===r&&(f=fo+300-vt(),10<f)){if(tn(u,r,pi,!Zr),Ie(u,0,!0)!==0)break t;Sr=r,u.timeoutHandle=Dy(ty.bind(null,u,a,ri,mo,mc,r,pi,zn,Us,Zr,d,"Throttled",-0,0),f);break t}ty(u,a,ri,mo,mc,r,pi,zn,Us,Zr,d,null,-0,0)}}break}while(!0);Wi(e)}function ty(e,r,a,u,f,d,v,S,F,W,et,st,$,Q){if(e.timeoutHandle=-1,st=r.subtreeFlags,st&8192||(st&16785408)===16785408){st={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:hr},qg(r,d,st);var bt=(d&62914560)===d?fo-vt():(d&4194048)===d?Zg-vt():0;if(bt=W1(st,bt),bt!==null){Sr=d,e.cancelPendingCommit=bt(oy.bind(null,e,r,d,a,u,f,v,S,F,et,st,null,$,Q)),tn(e,d,v,!W);return}}oy(e,r,d,a,u,f,v,S,F)}function h1(e){for(var r=e;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var f=a[u],d=f.getSnapshot;f=f.value;try{if(!ui(d(),f))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function tn(e,r,a,u){r&=~pc,r&=~zn,e.suspendedLanes|=r,e.pingedLanes&=~r,u&&(e.warmLanes|=r),u=e.expirationTimes;for(var f=r;0<f;){var d=31-j(f),v=1<<d;u[d]=-1,f&=~v}a!==0&&ca(e,a,r)}function go(){return(Jt&6)===0?(Ya(0),!1):!0}function _c(){if(Xt!==null){if(ee===0)var e=Xt.return;else e=Xt,pr=On=null,Uh(e),Cs=null,Ma=0,e=Xt;for(;e!==null;)Og(e.alternate,e),e=e.return;Xt=null}}function Ps(e,r){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,D1(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Sr=0,_c(),le=e,Xt=a=fr(e.current,null),qt=r,ee=0,di=null,Zr=!1,Ns=Qe(e,r),dc=!1,Us=pi=pc=zn=Kr=xe=0,ri=ja=null,mc=!1,(r&8)!==0&&(r|=r&32);var u=e.entangledLanes;if(u!==0)for(e=e.entanglements,u&=r;0<u;){var f=31-j(u),d=1<<f;r|=e[f],u&=~d}return Ar=r,Ll(),a}function ey(e,r){zt=null,T.H=Pa,r===ws||r===Vl?(r=ym(),ee=3):r===Eh?(r=ym(),ee=4):ee=r===Kh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,di=r,Xt===null&&(xe=1,no(e,bi(r,e.current)))}function iy(){var e=ci.current;return e===null?!0:(qt&4194048)===qt?Si===null:(qt&62914560)===qt||(qt&536870912)!==0?e===Si:!1}function ry(){var e=T.H;return T.H=Pa,e===null?Pa:e}function ny(){var e=T.A;return T.A=o1,e}function yo(){xe=4,Zr||(qt&4194048)!==qt&&ci.current!==null||(Ns=!0),(Kr&134217727)===0&&(zn&134217727)===0||le===null||tn(le,qt,pi,!1)}function xc(e,r,a){var u=Jt;Jt|=2;var f=ry(),d=ny();(le!==e||qt!==r)&&(mo=null,Ps(e,r)),r=!1;var v=xe;t:do try{if(ee!==0&&Xt!==null){var S=Xt,F=di;switch(ee){case 8:_c(),v=6;break t;case 3:case 2:case 9:case 6:ci.current===null&&(r=!0);var W=ee;if(ee=0,di=null,Fs(e,S,F,W),a&&Ns){v=0;break t}break;default:W=ee,ee=0,di=null,Fs(e,S,F,W)}}c1(),v=xe;break}catch(et){ey(e,et)}while(!0);return r&&e.shellSuspendCounter++,pr=On=null,Jt=u,T.H=f,T.A=d,Xt===null&&(le=null,qt=0,Ll()),v}function c1(){for(;Xt!==null;)sy(Xt)}function f1(e,r){var a=Jt;Jt|=2;var u=ry(),f=ny();le!==e||qt!==r?(mo=null,po=vt()+500,Ps(e,r)):Ns=Qe(e,r);t:do try{if(ee!==0&&Xt!==null){r=Xt;var d=di;e:switch(ee){case 1:ee=0,di=null,Fs(e,r,d,1);break;case 2:case 9:if(mm(d)){ee=0,di=null,ay(r);break}r=function(){ee!==2&&ee!==9||le!==e||(ee=7),Wi(e)},d.then(r,r);break t;case 3:ee=7;break t;case 4:ee=5;break t;case 7:mm(d)?(ee=0,di=null,ay(r)):(ee=0,di=null,Fs(e,r,d,7));break;case 5:var v=null;switch(Xt.tag){case 26:v=Xt.memoizedState;case 5:case 27:var S=Xt;if(v?jy(v):S.stateNode.complete){ee=0,di=null;var F=S.sibling;if(F!==null)Xt=F;else{var W=S.return;W!==null?(Xt=W,vo(W)):Xt=null}break e}}ee=0,di=null,Fs(e,r,d,5);break;case 6:ee=0,di=null,Fs(e,r,d,6);break;case 8:_c(),xe=6;break t;default:throw Error(n(462))}}d1();break}catch(et){ey(e,et)}while(!0);return pr=On=null,T.H=u,T.A=f,Jt=a,Xt!==null?0:(le=null,qt=0,Ll(),xe)}function d1(){for(;Xt!==null&&!Ut();)sy(Xt)}function sy(e){var r=Mg(e.alternate,e,Ar);e.memoizedProps=e.pendingProps,r===null?vo(e):Xt=r}function ay(e){var r=e,a=r.alternate;switch(r.tag){case 15:case 0:r=Eg(a,r,r.pendingProps,r.type,void 0,qt);break;case 11:r=Eg(a,r,r.pendingProps,r.type.render,r.ref,qt);break;case 5:Uh(r);default:Og(a,r),r=Xt=nm(r,Ar),r=Mg(a,r,Ar)}e.memoizedProps=e.pendingProps,r===null?vo(e):Xt=r}function Fs(e,r,a,u){pr=On=null,Uh(r),Cs=null,Ma=0;var f=r.return;try{if(e1(e,f,r,a,qt)){xe=1,no(e,bi(a,e.current)),Xt=null;return}}catch(d){if(f!==null)throw Xt=f,d;xe=1,no(e,bi(a,e.current)),Xt=null;return}r.flags&32768?(Wt||u===1?e=!0:Ns||(qt&536870912)!==0?e=!1:(Zr=e=!0,(u===2||u===9||u===3||u===6)&&(u=ci.current,u!==null&&u.tag===13&&(u.flags|=16384))),ly(r,e)):vo(r)}function vo(e){var r=e;do{if((r.flags&32768)!==0){ly(r,Zr);return}e=r.return;var a=n1(r.alternate,r,Ar);if(a!==null){Xt=a;return}if(r=r.sibling,r!==null){Xt=r;return}Xt=r=e}while(r!==null);xe===0&&(xe=5)}function ly(e,r){do{var a=s1(e.alternate,e);if(a!==null){a.flags&=32767,Xt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(e=e.sibling,e!==null)){Xt=e;return}Xt=e=a}while(e!==null);xe=6,Xt=null}function oy(e,r,a,u,f,d,v,S,F){e.cancelPendingCommit=null;do _o();while(Oe!==0);if((Jt&6)!==0)throw Error(n(327));if(r!==null){if(r===e.current)throw Error(n(177));if(d=r.lanes|r.childLanes,d|=oh,Al(e,a,d,v,S,F),e===le&&(Xt=le=null,qt=0),Ls=r,Jr=e,Sr=a,gc=d,yc=f,Kg=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,y1(rs,function(){return dy(),null})):(e.callbackNode=null,e.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=T.T,T.T=null,f=R.p,R.p=2,v=Jt,Jt|=4;try{a1(e,r,a)}finally{Jt=v,R.p=f,T.T=u}}Oe=1,uy(),hy(),cy()}}function uy(){if(Oe===1){Oe=0;var e=Jr,r=Ls,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=T.T,T.T=null;var u=R.p;R.p=2;var f=Jt;Jt|=4;try{Xg(r,e);var d=Bc,v=$p(e.containerInfo),S=d.focusedElem,F=d.selectionRange;if(v!==S&&S&&S.ownerDocument&&Wp(S.ownerDocument.documentElement,S)){if(F!==null&&rh(S)){var W=F.start,et=F.end;if(et===void 0&&(et=W),"selectionStart"in S)S.selectionStart=W,S.selectionEnd=Math.min(et,S.value.length);else{var st=S.ownerDocument||document,$=st&&st.defaultView||window;if($.getSelection){var Q=$.getSelection(),bt=S.textContent.length,It=Math.min(F.start,bt),ae=F.end===void 0?It:Math.min(F.end,bt);!Q.extend&&It>ae&&(v=ae,ae=It,It=v);var X=Yp(S,It),G=Yp(S,ae);if(X&&G&&(Q.rangeCount!==1||Q.anchorNode!==X.node||Q.anchorOffset!==X.offset||Q.focusNode!==G.node||Q.focusOffset!==G.offset)){var Y=st.createRange();Y.setStart(X.node,X.offset),Q.removeAllRanges(),It>ae?(Q.addRange(Y),Q.extend(G.node,G.offset)):(Y.setEnd(G.node,G.offset),Q.addRange(Y))}}}}for(st=[],Q=S;Q=Q.parentNode;)Q.nodeType===1&&st.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<st.length;S++){var nt=st[S];nt.element.scrollLeft=nt.left,nt.element.scrollTop=nt.top}}Oo=!!Oc,Bc=Oc=null}finally{Jt=f,R.p=u,T.T=a}}e.current=r,Oe=2}}function hy(){if(Oe===2){Oe=0;var e=Jr,r=Ls,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=T.T,T.T=null;var u=R.p;R.p=2;var f=Jt;Jt|=4;try{Fg(e,r.alternate,r)}finally{Jt=f,R.p=u,T.T=a}}Oe=3}}function cy(){if(Oe===4||Oe===3){Oe=0,Bt();var e=Jr,r=Ls,a=Sr,u=Kg;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Oe=5:(Oe=0,Ls=Jr=null,fy(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(Qr=null),En(a),r=r.stateNode,Ge&&typeof Ge.onCommitFiberRoot=="function")try{Ge.onCommitFiberRoot(Tn,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=T.T,f=R.p,R.p=2,T.T=null;try{for(var d=e.onRecoverableError,v=0;v<u.length;v++){var S=u[v];d(S.value,{componentStack:S.stack})}}finally{T.T=r,R.p=f}}(Sr&3)!==0&&_o(),Wi(e),f=e.pendingLanes,(a&261930)!==0&&(f&42)!==0?e===vc?qa++:(qa=0,vc=e):qa=0,Ya(0)}}function fy(e,r){(e.pooledCacheLanes&=r)===0&&(r=e.pooledCache,r!=null&&(e.pooledCache=null,Ca(r)))}function _o(){return uy(),hy(),cy(),dy()}function dy(){if(Oe!==5)return!1;var e=Jr,r=gc;gc=0;var a=En(Sr),u=T.T,f=R.p;try{R.p=32>a?32:a,T.T=null,a=yc,yc=null;var d=Jr,v=Sr;if(Oe=0,Ls=Jr=null,Sr=0,(Jt&6)!==0)throw Error(n(331));var S=Jt;if(Jt|=4,Wg(d.current),jg(d,d.current,v,a),Jt=S,Ya(0,!1),Ge&&typeof Ge.onPostCommitFiberRoot=="function")try{Ge.onPostCommitFiberRoot(Tn,d)}catch{}return!0}finally{R.p=f,T.T=u,fy(e,r)}}function py(e,r,a){r=bi(a,r),r=Zh(e.stateNode,r,2),e=qr(e,r,2),e!==null&&(Lr(e,2),Wi(e))}function ie(e,r,a){if(e.tag===3)py(e,e,a);else for(;r!==null;){if(r.tag===3){py(r,e,a);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Qr===null||!Qr.has(u))){e=bi(a,e),a=mg(2),u=qr(r,a,2),u!==null&&(gg(a,u,r,e),Lr(u,2),Wi(u));break}}r=r.return}}function bc(e,r,a){var u=e.pingCache;if(u===null){u=e.pingCache=new u1;var f=new Set;u.set(r,f)}else f=u.get(r),f===void 0&&(f=new Set,u.set(r,f));f.has(a)||(dc=!0,f.add(a),e=p1.bind(null,e,r,a),r.then(e,e))}function p1(e,r,a){var u=e.pingCache;u!==null&&u.delete(r),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,le===e&&(qt&a)===a&&(xe===4||xe===3&&(qt&62914560)===qt&&300>vt()-fo?(Jt&2)===0&&Ps(e,0):pc|=a,Us===qt&&(Us=0)),Wi(e)}function my(e,r){r===0&&(r=ar()),e=Rn(e,r),e!==null&&(Lr(e,r),Wi(e))}function m1(e){var r=e.memoizedState,a=0;r!==null&&(a=r.retryLane),my(e,a)}function g1(e,r){var a=0;switch(e.tag){case 31:case 13:var u=e.stateNode,f=e.memoizedState;f!==null&&(a=f.retryLane);break;case 19:u=e.stateNode;break;case 22:u=e.stateNode._retryCache;break;default:throw Error(n(314))}u!==null&&u.delete(r),my(e,a)}function y1(e,r){return xt(e,r)}var xo=null,Gs=null,Tc=!1,bo=!1,Ec=!1,en=0;function Wi(e){e!==Gs&&e.next===null&&(Gs===null?xo=Gs=e:Gs=Gs.next=e),bo=!0,Tc||(Tc=!0,_1())}function Ya(e,r){if(!Ec&&bo){Ec=!0;do for(var a=!1,u=xo;u!==null;){if(e!==0){var f=u.pendingLanes;if(f===0)var d=0;else{var v=u.suspendedLanes,S=u.pingedLanes;d=(1<<31-j(42|e)+1)-1,d&=f&~(v&~S),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,_y(u,d))}else d=qt,d=Ie(u,u===le?d:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(d&3)===0||Qe(u,d)||(a=!0,_y(u,d));u=u.next}while(a);Ec=!1}}function v1(){gy()}function gy(){bo=Tc=!1;var e=0;en!==0&&M1()&&(e=en);for(var r=vt(),a=null,u=xo;u!==null;){var f=u.next,d=yy(u,r);d===0?(u.next=null,a===null?xo=f:a.next=f,f===null&&(Gs=a)):(a=u,(e!==0||(d&3)!==0)&&(bo=!0)),u=f}Oe!==0&&Oe!==5||Ya(e),en!==0&&(en=0)}function yy(e,r){for(var a=e.suspendedLanes,u=e.pingedLanes,f=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var v=31-j(d),S=1<<v,F=f[v];F===-1?((S&a)===0||(S&u)!==0)&&(f[v]=ha(S,r)):F<=r&&(e.expiredLanes|=S),d&=~S}if(r=le,a=qt,a=Ie(e,e===r?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),u=e.callbackNode,a===0||e===r&&(ee===2||ee===9)||e.cancelPendingCommit!==null)return u!==null&&u!==null&&Rt(u),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Qe(e,a)){if(r=a&-a,r===e.callbackPriority)return r;switch(u!==null&&Rt(u),En(a)){case 2:case 8:a=ua;break;case 32:a=rs;break;case 268435456:a=ns;break;default:a=rs}return u=vy.bind(null,e),a=xt(a,u),e.callbackPriority=r,e.callbackNode=a,r}return u!==null&&u!==null&&Rt(u),e.callbackPriority=2,e.callbackNode=null,2}function vy(e,r){if(Oe!==0&&Oe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(_o()&&e.callbackNode!==a)return null;var u=qt;return u=Ie(e,e===le?u:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),u===0?null:(Jg(e,u,r),yy(e,vt()),e.callbackNode!=null&&e.callbackNode===a?vy.bind(null,e):null)}function _y(e,r){if(_o())return null;Jg(e,r,!0)}function _1(){O1(function(){(Jt&6)!==0?xt(Ur,v1):gy()})}function Ac(){if(en===0){var e=As;e===0&&(e=te,te<<=1,(te&261888)===0&&(te=256)),en=e}return en}function xy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Rl(""+e)}function by(e,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,e.id&&a.setAttribute("form",e.id),r.parentNode.insertBefore(a,r),e=new FormData(e),a.parentNode.removeChild(a),e}function x1(e,r,a,u,f){if(r==="submit"&&a&&a.stateNode===f){var d=xy((f[ze]||null).action),v=u.submitter;v&&(r=(r=v[ze]||null)?xy(r.formAction):v.getAttribute("formAction"),r!==null&&(d=r,v=null));var S=new Bl("action","action",null,u,f);e.push({event:S,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(en!==0){var F=v?by(f,v):new FormData(f);Vh(a,{pending:!0,data:F,method:f.method,action:d},null,F)}}else typeof d=="function"&&(S.preventDefault(),F=v?by(f,v):new FormData(f),Vh(a,{pending:!0,data:F,method:f.method,action:d},d,F))},currentTarget:f}]})}}for(var Sc=0;Sc<lh.length;Sc++){var wc=lh[Sc],b1=wc.toLowerCase(),T1=wc[0].toUpperCase()+wc.slice(1);Bi(b1,"on"+T1)}Bi(Qp,"onAnimationEnd"),Bi(Jp,"onAnimationIteration"),Bi(tm,"onAnimationStart"),Bi("dblclick","onDoubleClick"),Bi("focusin","onFocus"),Bi("focusout","onBlur"),Bi(Fb,"onTransitionRun"),Bi(Gb,"onTransitionStart"),Bi(zb,"onTransitionCancel"),Bi(em,"onTransitionEnd"),hs("onMouseEnter",["mouseout","mouseover"]),hs("onMouseLeave",["mouseout","mouseover"]),hs("onPointerEnter",["pointerout","pointerover"]),hs("onPointerLeave",["pointerout","pointerover"]),An("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),An("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),An("onBeforeInput",["compositionend","keypress","textInput","paste"]),An("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),An("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),An("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wa));function Ty(e,r){r=(r&4)!==0;for(var a=0;a<e.length;a++){var u=e[a],f=u.event;u=u.listeners;t:{var d=void 0;if(r)for(var v=u.length-1;0<=v;v--){var S=u[v],F=S.instance,W=S.currentTarget;if(S=S.listener,F!==d&&f.isPropagationStopped())break t;d=S,f.currentTarget=W;try{d(f)}catch(et){Ul(et)}f.currentTarget=null,d=F}else for(v=0;v<u.length;v++){if(S=u[v],F=S.instance,W=S.currentTarget,S=S.listener,F!==d&&f.isPropagationStopped())break t;d=S,f.currentTarget=W;try{d(f)}catch(et){Ul(et)}f.currentTarget=null,d=F}}}}function Vt(e,r){var a=r[ls];a===void 0&&(a=r[ls]=new Set);var u=e+"__bubble";a.has(u)||(Ey(r,e,2,!1),a.add(u))}function Cc(e,r,a){var u=0;r&&(u|=4),Ey(a,e,u,r)}var To="_reactListening"+Math.random().toString(36).slice(2);function Rc(e){if(!e[To]){e[To]=!0,gp.forEach(function(a){a!=="selectionchange"&&(E1.has(a)||Cc(a,!1,e),Cc(a,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[To]||(r[To]=!0,Cc("selectionchange",!1,r))}}function Ey(e,r,a,u){switch(Qy(r)){case 2:var f=K1;break;case 8:f=Q1;break;default:f=Xc}a=f.bind(null,r,a,e),f=void 0,!Wu||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),u?f!==void 0?e.addEventListener(r,a,{capture:!0,passive:f}):e.addEventListener(r,a,!0):f!==void 0?e.addEventListener(r,a,{passive:f}):e.addEventListener(r,a,!1)}function Mc(e,r,a,u,f){var d=u;if((r&1)===0&&(r&2)===0&&u!==null)t:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var S=u.stateNode.containerInfo;if(S===f)break;if(v===4)for(v=u.return;v!==null;){var F=v.tag;if((F===3||F===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;S!==null;){if(v=or(S),v===null)return;if(F=v.tag,F===5||F===6||F===26||F===27){u=d=v;continue t}S=S.parentNode}}u=u.return}Rp(function(){var W=d,et=qu(a),st=[];t:{var $=im.get(e);if($!==void 0){var Q=Bl,bt=e;switch(e){case"keypress":if(Dl(a)===0)break t;case"keydown":case"keyup":Q=gb;break;case"focusin":bt="focus",Q=Qu;break;case"focusout":bt="blur",Q=Qu;break;case"beforeblur":case"afterblur":Q=Qu;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Op;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=nb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=_b;break;case Qp:case Jp:case tm:Q=lb;break;case em:Q=bb;break;case"scroll":case"scrollend":Q=ib;break;case"wheel":Q=Eb;break;case"copy":case"cut":case"paste":Q=ub;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=Ip;break;case"toggle":case"beforetoggle":Q=Sb}var It=(r&4)!==0,ae=!It&&(e==="scroll"||e==="scrollend"),X=It?$!==null?$+"Capture":null:$;It=[];for(var G=W,Y;G!==null;){var nt=G;if(Y=nt.stateNode,nt=nt.tag,nt!==5&&nt!==26&&nt!==27||Y===null||X===null||(nt=ga(G,X),nt!=null&&It.push($a(G,nt,Y))),ae)break;G=G.return}0<It.length&&($=new Q($,bt,null,a,et),st.push({event:$,listeners:It}))}}if((r&7)===0){t:{if($=e==="mouseover"||e==="pointerover",Q=e==="mouseout"||e==="pointerout",$&&a!==ju&&(bt=a.relatedTarget||a.fromElement)&&(or(bt)||bt[Xi]))break t;if((Q||$)&&($=et.window===et?et:($=et.ownerDocument)?$.defaultView||$.parentWindow:window,Q?(bt=a.relatedTarget||a.toElement,Q=W,bt=bt?or(bt):null,bt!==null&&(ae=o(bt),It=bt.tag,bt!==ae||It!==5&&It!==27&&It!==6)&&(bt=null)):(Q=null,bt=W),Q!==bt)){if(It=Op,nt="onMouseLeave",X="onMouseEnter",G="mouse",(e==="pointerout"||e==="pointerover")&&(It=Ip,nt="onPointerLeave",X="onPointerEnter",G="pointer"),ae=Q==null?$:ma(Q),Y=bt==null?$:ma(bt),$=new It(nt,G+"leave",Q,a,et),$.target=ae,$.relatedTarget=Y,nt=null,or(et)===W&&(It=new It(X,G+"enter",bt,a,et),It.target=Y,It.relatedTarget=ae,nt=It),ae=nt,Q&&bt)e:{for(It=A1,X=Q,G=bt,Y=0,nt=X;nt;nt=It(nt))Y++;nt=0;for(var Ot=G;Ot;Ot=It(Ot))nt++;for(;0<Y-nt;)X=It(X),Y--;for(;0<nt-Y;)G=It(G),nt--;for(;Y--;){if(X===G||G!==null&&X===G.alternate){It=X;break e}X=It(X),G=It(G)}It=null}else It=null;Q!==null&&Ay(st,$,Q,It,!1),bt!==null&&ae!==null&&Ay(st,ae,bt,It,!0)}}t:{if($=W?ma(W):window,Q=$.nodeName&&$.nodeName.toLowerCase(),Q==="select"||Q==="input"&&$.type==="file")var Kt=Hp;else if(Gp($))if(kp)Kt=Ub;else{Kt=Ib;var At=Bb}else Q=$.nodeName,!Q||Q.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?W&&Vu(W.elementType)&&(Kt=Hp):Kt=Nb;if(Kt&&(Kt=Kt(e,W))){zp(st,Kt,a,et);break t}At&&At(e,$,W),e==="focusout"&&W&&$.type==="number"&&W.memoizedProps.value!=null&&Xu($,"number",$.value)}switch(At=W?ma(W):window,e){case"focusin":(Gp(At)||At.contentEditable==="true")&&(gs=At,nh=W,Aa=null);break;case"focusout":Aa=nh=gs=null;break;case"mousedown":sh=!0;break;case"contextmenu":case"mouseup":case"dragend":sh=!1,Zp(st,a,et);break;case"selectionchange":if(Pb)break;case"keydown":case"keyup":Zp(st,a,et)}var kt;if(th)t:{switch(e){case"compositionstart":var Yt="onCompositionStart";break t;case"compositionend":Yt="onCompositionEnd";break t;case"compositionupdate":Yt="onCompositionUpdate";break t}Yt=void 0}else ms?Pp(e,a)&&(Yt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Yt="onCompositionStart");Yt&&(Np&&a.locale!=="ko"&&(ms||Yt!=="onCompositionStart"?Yt==="onCompositionEnd"&&ms&&(kt=Mp()):(Gr=et,$u="value"in Gr?Gr.value:Gr.textContent,ms=!0)),At=Eo(W,Yt),0<At.length&&(Yt=new Bp(Yt,e,null,a,et),st.push({event:Yt,listeners:At}),kt?Yt.data=kt:(kt=Fp(a),kt!==null&&(Yt.data=kt)))),(kt=Cb?Rb(e,a):Mb(e,a))&&(Yt=Eo(W,"onBeforeInput"),0<Yt.length&&(At=new Bp("onBeforeInput","beforeinput",null,a,et),st.push({event:At,listeners:Yt}),At.data=kt)),x1(st,e,W,a,et)}Ty(st,r)})}function $a(e,r,a){return{instance:e,listener:r,currentTarget:a}}function Eo(e,r){for(var a=r+"Capture",u=[];e!==null;){var f=e,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=ga(e,a),f!=null&&u.unshift($a(e,f,d)),f=ga(e,r),f!=null&&u.push($a(e,f,d))),e.tag===3)return u;e=e.return}return[]}function A1(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ay(e,r,a,u,f){for(var d=r._reactName,v=[];a!==null&&a!==u;){var S=a,F=S.alternate,W=S.stateNode;if(S=S.tag,F!==null&&F===u)break;S!==5&&S!==26&&S!==27||W===null||(F=W,f?(W=ga(a,d),W!=null&&v.unshift($a(a,W,F))):f||(W=ga(a,d),W!=null&&v.push($a(a,W,F)))),a=a.return}v.length!==0&&e.push({event:r,listeners:v})}var S1=/\r\n?/g,w1=/\u0000|\uFFFD/g;function Sy(e){return(typeof e=="string"?e:""+e).replace(S1,`
`).replace(w1,"")}function wy(e,r){return r=Sy(r),Sy(e)===r}function se(e,r,a,u,f,d){switch(a){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||fs(e,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&fs(e,""+u);break;case"className":wl(e,"class",u);break;case"tabIndex":wl(e,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":wl(e,a,u);break;case"style":wp(e,u,d);break;case"data":if(r!=="object"){wl(e,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||a!=="href")){e.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){e.removeAttribute(a);break}u=Rl(""+u),e.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(r!=="input"&&se(e,r,"name",f.name,f,null),se(e,r,"formEncType",f.formEncType,f,null),se(e,r,"formMethod",f.formMethod,f,null),se(e,r,"formTarget",f.formTarget,f,null)):(se(e,r,"encType",f.encType,f,null),se(e,r,"method",f.method,f,null),se(e,r,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){e.removeAttribute(a);break}u=Rl(""+u),e.setAttribute(a,u);break;case"onClick":u!=null&&(e.onclick=hr);break;case"onScroll":u!=null&&Vt("scroll",e);break;case"onScrollEnd":u!=null&&Vt("scrollend",e);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(a=u.__html,a!=null){if(f.children!=null)throw Error(n(60));e.innerHTML=a}}break;case"multiple":e.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":e.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){e.removeAttribute("xlink:href");break}a=Rl(""+u),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?e.setAttribute(a,""+u):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":u===!0?e.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?e.setAttribute(a,u):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?e.setAttribute(a,u):e.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?e.removeAttribute(a):e.setAttribute(a,u);break;case"popover":Vt("beforetoggle",e),Vt("toggle",e),Sl(e,"popover",u);break;case"xlinkActuate":ur(e,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":ur(e,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":ur(e,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":ur(e,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":ur(e,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":ur(e,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":ur(e,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":ur(e,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":ur(e,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Sl(e,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=tb.get(a)||a,Sl(e,a,u))}}function Dc(e,r,a,u,f,d){switch(a){case"style":wp(e,u,d);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(a=u.__html,a!=null){if(f.children!=null)throw Error(n(60));e.innerHTML=a}}break;case"children":typeof u=="string"?fs(e,u):(typeof u=="number"||typeof u=="bigint")&&fs(e,""+u);break;case"onScroll":u!=null&&Vt("scroll",e);break;case"onScrollEnd":u!=null&&Vt("scrollend",e);break;case"onClick":u!=null&&(e.onclick=hr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yp.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),r=a.slice(2,f?a.length-7:void 0),d=e[ze]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(r,d,f),typeof u=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(r,u,f);break t}a in e?e[a]=u:u===!0?e.setAttribute(a,""):Sl(e,a,u)}}}function Ve(e,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Vt("error",e),Vt("load",e);var u=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:se(e,r,d,v,a,null)}}f&&se(e,r,"srcSet",a.srcSet,a,null),u&&se(e,r,"src",a.src,a,null);return;case"input":Vt("invalid",e);var S=d=v=f=null,F=null,W=null;for(u in a)if(a.hasOwnProperty(u)){var et=a[u];if(et!=null)switch(u){case"name":f=et;break;case"type":v=et;break;case"checked":F=et;break;case"defaultChecked":W=et;break;case"value":d=et;break;case"defaultValue":S=et;break;case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(n(137,r));break;default:se(e,r,u,et,a,null)}}Tp(e,d,S,F,W,v,f,!1);return;case"select":Vt("invalid",e),u=v=d=null;for(f in a)if(a.hasOwnProperty(f)&&(S=a[f],S!=null))switch(f){case"value":d=S;break;case"defaultValue":v=S;break;case"multiple":u=S;default:se(e,r,f,S,a,null)}r=d,a=v,e.multiple=!!u,r!=null?cs(e,!!u,r,!1):a!=null&&cs(e,!!u,a,!0);return;case"textarea":Vt("invalid",e),d=f=u=null;for(v in a)if(a.hasOwnProperty(v)&&(S=a[v],S!=null))switch(v){case"value":u=S;break;case"defaultValue":f=S;break;case"children":d=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(n(91));break;default:se(e,r,v,S,a,null)}Ap(e,u,f,d);return;case"option":for(F in a)if(a.hasOwnProperty(F)&&(u=a[F],u!=null))switch(F){case"selected":e.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:se(e,r,F,u,a,null)}return;case"dialog":Vt("beforetoggle",e),Vt("toggle",e),Vt("cancel",e),Vt("close",e);break;case"iframe":case"object":Vt("load",e);break;case"video":case"audio":for(u=0;u<Wa.length;u++)Vt(Wa[u],e);break;case"image":Vt("error",e),Vt("load",e);break;case"details":Vt("toggle",e);break;case"embed":case"source":case"link":Vt("error",e),Vt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in a)if(a.hasOwnProperty(W)&&(u=a[W],u!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:se(e,r,W,u,a,null)}return;default:if(Vu(r)){for(et in a)a.hasOwnProperty(et)&&(u=a[et],u!==void 0&&Dc(e,r,et,u,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(u=a[S],u!=null&&se(e,r,S,u,a,null))}function C1(e,r,a,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,v=null,S=null,F=null,W=null,et=null;for(Q in a){var st=a[Q];if(a.hasOwnProperty(Q)&&st!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":F=st;default:u.hasOwnProperty(Q)||se(e,r,Q,null,u,st)}}for(var $ in u){var Q=u[$];if(st=a[$],u.hasOwnProperty($)&&(Q!=null||st!=null))switch($){case"type":d=Q;break;case"name":f=Q;break;case"checked":W=Q;break;case"defaultChecked":et=Q;break;case"value":v=Q;break;case"defaultValue":S=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(n(137,r));break;default:Q!==st&&se(e,r,$,Q,u,st)}}ku(e,v,S,F,W,et,d,f);return;case"select":Q=v=S=$=null;for(d in a)if(F=a[d],a.hasOwnProperty(d)&&F!=null)switch(d){case"value":break;case"multiple":Q=F;default:u.hasOwnProperty(d)||se(e,r,d,null,u,F)}for(f in u)if(d=u[f],F=a[f],u.hasOwnProperty(f)&&(d!=null||F!=null))switch(f){case"value":$=d;break;case"defaultValue":S=d;break;case"multiple":v=d;default:d!==F&&se(e,r,f,d,u,F)}r=S,a=v,u=Q,$!=null?cs(e,!!a,$,!1):!!u!=!!a&&(r!=null?cs(e,!!a,r,!0):cs(e,!!a,a?[]:"",!1));return;case"textarea":Q=$=null;for(S in a)if(f=a[S],a.hasOwnProperty(S)&&f!=null&&!u.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:se(e,r,S,null,u,f)}for(v in u)if(f=u[v],d=a[v],u.hasOwnProperty(v)&&(f!=null||d!=null))switch(v){case"value":$=f;break;case"defaultValue":Q=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(n(91));break;default:f!==d&&se(e,r,v,f,u,d)}Ep(e,$,Q);return;case"option":for(var bt in a)if($=a[bt],a.hasOwnProperty(bt)&&$!=null&&!u.hasOwnProperty(bt))switch(bt){case"selected":e.selected=!1;break;default:se(e,r,bt,null,u,$)}for(F in u)if($=u[F],Q=a[F],u.hasOwnProperty(F)&&$!==Q&&($!=null||Q!=null))switch(F){case"selected":e.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:se(e,r,F,$,u,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var It in a)$=a[It],a.hasOwnProperty(It)&&$!=null&&!u.hasOwnProperty(It)&&se(e,r,It,null,u,$);for(W in u)if($=u[W],Q=a[W],u.hasOwnProperty(W)&&$!==Q&&($!=null||Q!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(n(137,r));break;default:se(e,r,W,$,u,Q)}return;default:if(Vu(r)){for(var ae in a)$=a[ae],a.hasOwnProperty(ae)&&$!==void 0&&!u.hasOwnProperty(ae)&&Dc(e,r,ae,void 0,u,$);for(et in u)$=u[et],Q=a[et],!u.hasOwnProperty(et)||$===Q||$===void 0&&Q===void 0||Dc(e,r,et,$,u,Q);return}}for(var X in a)$=a[X],a.hasOwnProperty(X)&&$!=null&&!u.hasOwnProperty(X)&&se(e,r,X,null,u,$);for(st in u)$=u[st],Q=a[st],!u.hasOwnProperty(st)||$===Q||$==null&&Q==null||se(e,r,st,$,u,Q)}function Cy(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function R1(){if(typeof performance.getEntriesByType=="function"){for(var e=0,r=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var f=a[u],d=f.transferSize,v=f.initiatorType,S=f.duration;if(d&&S&&Cy(v)){for(v=0,S=f.responseEnd,u+=1;u<a.length;u++){var F=a[u],W=F.startTime;if(W>S)break;var et=F.transferSize,st=F.initiatorType;et&&Cy(st)&&(F=F.responseEnd,v+=et*(F<S?1:(S-W)/(F-W)))}if(--u,r+=8*(d+v)/(f.duration/1e3),e++,10<e)break}}if(0<e)return r/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Oc=null,Bc=null;function Ao(e){return e.nodeType===9?e:e.ownerDocument}function Ry(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function My(e,r){if(e===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&r==="foreignObject"?0:e}function Ic(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Nc=null;function M1(){var e=window.event;return e&&e.type==="popstate"?e===Nc?!1:(Nc=e,!0):(Nc=null,!1)}var Dy=typeof setTimeout=="function"?setTimeout:void 0,D1=typeof clearTimeout=="function"?clearTimeout:void 0,Oy=typeof Promise=="function"?Promise:void 0,O1=typeof queueMicrotask=="function"?queueMicrotask:typeof Oy<"u"?function(e){return Oy.resolve(null).then(e).catch(B1)}:Dy;function B1(e){setTimeout(function(){throw e})}function rn(e){return e==="head"}function By(e,r){var a=r,u=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(u===0){e.removeChild(f),Xs(r);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")Za(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Za(a);for(var d=a.firstChild;d;){var v=d.nextSibling,S=d.nodeName;d[Vi]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=v}}else a==="body"&&Za(e.ownerDocument.body);a=f}while(a);Xs(r)}function Iy(e,r){var a=e;e=0;do{var u=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=u}while(a)}function Uc(e){var r=e.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Uc(a),pa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function I1(e,r,a,u){for(;e.nodeType===1;){var f=a;if(e.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(u){if(!e[Vi])switch(r){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(r==="input"&&e.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=wi(e.nextSibling),e===null)break}return null}function N1(e,r,a){if(r==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=wi(e.nextSibling),e===null))return null;return e}function Ny(e,r){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=wi(e.nextSibling),e===null))return null;return e}function Lc(e){return e.data==="$?"||e.data==="$~"}function Pc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function U1(e,r){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=r;else if(e.data!=="$?"||a.readyState!=="loading")r();else{var u=function(){r(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),e._reactRetry=u}}function wi(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return e}var Fc=null;function Uy(e){e=e.nextSibling;for(var r=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(r===0)return wi(e.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}e=e.nextSibling}return null}function Ly(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return e;r--}else a!=="/$"&&a!=="/&"||r++}e=e.previousSibling}return null}function Py(e,r,a){switch(r=Ao(a),e){case"html":if(e=r.documentElement,!e)throw Error(n(452));return e;case"head":if(e=r.head,!e)throw Error(n(453));return e;case"body":if(e=r.body,!e)throw Error(n(454));return e;default:throw Error(n(451))}}function Za(e){for(var r=e.attributes;r.length;)e.removeAttributeNode(r[0]);pa(e)}var Ci=new Map,Fy=new Set;function So(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var wr=R.d;R.d={f:L1,r:P1,D:F1,C:G1,L:z1,m:H1,X:X1,S:k1,M:V1};function L1(){var e=wr.f(),r=go();return e||r}function P1(e){var r=os(e);r!==null&&r.tag===5&&r.type==="form"?eg(r):wr.r(e)}var zs=typeof document>"u"?null:document;function Gy(e,r,a){var u=zs;if(u&&typeof r=="string"&&r){var f=_i(r);f='link[rel="'+e+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),Fy.has(f)||(Fy.add(f),e={rel:e,crossOrigin:a,href:r},u.querySelector(f)===null&&(r=u.createElement("link"),Ve(r,"link",e),Ne(r),u.head.appendChild(r)))}}function F1(e){wr.D(e),Gy("dns-prefetch",e,null)}function G1(e,r){wr.C(e,r),Gy("preconnect",e,r)}function z1(e,r,a){wr.L(e,r,a);var u=zs;if(u&&e&&r){var f='link[rel="preload"][as="'+_i(r)+'"]';r==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+_i(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+_i(a.imageSizes)+'"]')):f+='[href="'+_i(e)+'"]';var d=f;switch(r){case"style":d=Hs(e);break;case"script":d=ks(e)}Ci.has(d)||(e=y({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:e,as:r},a),Ci.set(d,e),u.querySelector(f)!==null||r==="style"&&u.querySelector(Ka(d))||r==="script"&&u.querySelector(Qa(d))||(r=u.createElement("link"),Ve(r,"link",e),Ne(r),u.head.appendChild(r)))}}function H1(e,r){wr.m(e,r);var a=zs;if(a&&e){var u=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+_i(u)+'"][href="'+_i(e)+'"]',d=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=ks(e)}if(!Ci.has(d)&&(e=y({rel:"modulepreload",href:e},r),Ci.set(d,e),a.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Qa(d)))return}u=a.createElement("link"),Ve(u,"link",e),Ne(u),a.head.appendChild(u)}}}function k1(e,r,a){wr.S(e,r,a);var u=zs;if(u&&e){var f=us(u).hoistableStyles,d=Hs(e);r=r||"default";var v=f.get(d);if(!v){var S={loading:0,preload:null};if(v=u.querySelector(Ka(d)))S.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":r},a),(a=Ci.get(d))&&Gc(e,a);var F=v=u.createElement("link");Ne(F),Ve(F,"link",e),F._p=new Promise(function(W,et){F.onload=W,F.onerror=et}),F.addEventListener("load",function(){S.loading|=1}),F.addEventListener("error",function(){S.loading|=2}),S.loading|=4,wo(v,r,u)}v={type:"stylesheet",instance:v,count:1,state:S},f.set(d,v)}}}function X1(e,r){wr.X(e,r);var a=zs;if(a&&e){var u=us(a).hoistableScripts,f=ks(e),d=u.get(f);d||(d=a.querySelector(Qa(f)),d||(e=y({src:e,async:!0},r),(r=Ci.get(f))&&zc(e,r),d=a.createElement("script"),Ne(d),Ve(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},u.set(f,d))}}function V1(e,r){wr.M(e,r);var a=zs;if(a&&e){var u=us(a).hoistableScripts,f=ks(e),d=u.get(f);d||(d=a.querySelector(Qa(f)),d||(e=y({src:e,async:!0,type:"module"},r),(r=Ci.get(f))&&zc(e,r),d=a.createElement("script"),Ne(d),Ve(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},u.set(f,d))}}function zy(e,r,a,u){var f=(f=lt.current)?So(f):null;if(!f)throw Error(n(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Hs(a.href),a=us(f).hoistableStyles,u=a.get(r),u||(u={type:"style",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Hs(a.href);var d=us(f).hoistableStyles,v=d.get(e);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,v),(d=f.querySelector(Ka(e)))&&!d._p&&(v.instance=d,v.state.loading=5),Ci.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ci.set(e,a),d||j1(f,e,a,v.state))),r&&u===null)throw Error(n(528,""));return v}if(r&&u!==null)throw Error(n(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ks(a),a=us(f).hoistableScripts,u=a.get(r),u||(u={type:"script",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,e))}}function Hs(e){return'href="'+_i(e)+'"'}function Ka(e){return'link[rel="stylesheet"]['+e+"]"}function Hy(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function j1(e,r,a,u){e.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=e.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),Ve(r,"link",a),Ne(r),e.head.appendChild(r))}function ks(e){return'[src="'+_i(e)+'"]'}function Qa(e){return"script[async]"+e}function ky(e,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var u=e.querySelector('style[data-href~="'+_i(a.href)+'"]');if(u)return r.instance=u,Ne(u),u;var f=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(e.ownerDocument||e).createElement("style"),Ne(u),Ve(u,"style",f),wo(u,a.precedence,e),r.instance=u;case"stylesheet":f=Hs(a.href);var d=e.querySelector(Ka(f));if(d)return r.state.loading|=4,r.instance=d,Ne(d),d;u=Hy(a),(f=Ci.get(f))&&Gc(u,f),d=(e.ownerDocument||e).createElement("link"),Ne(d);var v=d;return v._p=new Promise(function(S,F){v.onload=S,v.onerror=F}),Ve(d,"link",u),r.state.loading|=4,wo(d,a.precedence,e),r.instance=d;case"script":return d=ks(a.src),(f=e.querySelector(Qa(d)))?(r.instance=f,Ne(f),f):(u=a,(f=Ci.get(d))&&(u=y({},a),zc(u,f)),e=e.ownerDocument||e,f=e.createElement("script"),Ne(f),Ve(f,"link",u),e.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(n(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,wo(u,a.precedence,e));return r.instance}function wo(e,r,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,d=f,v=0;v<u.length;v++){var S=u[v];if(S.dataset.precedence===r)d=S;else if(d!==f)break}d?d.parentNode.insertBefore(e,d.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(e,r.firstChild))}function Gc(e,r){e.crossOrigin==null&&(e.crossOrigin=r.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=r.referrerPolicy),e.title==null&&(e.title=r.title)}function zc(e,r){e.crossOrigin==null&&(e.crossOrigin=r.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=r.referrerPolicy),e.integrity==null&&(e.integrity=r.integrity)}var Co=null;function Xy(e,r,a){if(Co===null){var u=new Map,f=Co=new Map;f.set(a,u)}else f=Co,u=f.get(a),u||(u=new Map,f.set(a,u));if(u.has(e))return u;for(u.set(e,null),a=a.getElementsByTagName(e),f=0;f<a.length;f++){var d=a[f];if(!(d[Vi]||d[be]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(r)||"";v=e+v;var S=u.get(v);S?S.push(d):u.set(v,[d])}}return u}function Vy(e,r,a){e=e.ownerDocument||e,e.head.insertBefore(a,r==="title"?e.querySelector("head > title"):null)}function q1(e,r,a){if(a===1||r.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return e=r.disabled,typeof r.precedence=="string"&&e==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function jy(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Y1(e,r,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Hs(u.href),d=r.querySelector(Ka(f));if(d){r=d._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(e.count++,e=Ro.bind(e),r.then(e,e)),a.state.loading|=4,a.instance=d,Ne(d);return}d=r.ownerDocument||r,u=Hy(u),(f=Ci.get(f))&&Gc(u,f),d=d.createElement("link"),Ne(d);var v=d;v._p=new Promise(function(S,F){v.onload=S,v.onerror=F}),Ve(d,"link",u),a.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Ro.bind(e),r.addEventListener("load",a),r.addEventListener("error",a))}}var Hc=0;function W1(e,r){return e.stylesheets&&e.count===0&&Do(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var u=setTimeout(function(){if(e.stylesheets&&Do(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+r);0<e.imgBytes&&Hc===0&&(Hc=62500*R1());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Do(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>Hc?50:800)+r);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function Ro(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Do(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Mo=null;function Do(e,r){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Mo=new Map,r.forEach($1,e),Mo=null,Ro.call(e))}function $1(e,r){if(!(r.state.loading&4)){var a=Mo.get(e);if(a)var u=a.get(null);else{a=new Map,Mo.set(e,a);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var v=f[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),u=v)}u&&a.set(null,u)}f=r.instance,v=f.getAttribute("data-precedence"),d=a.get(v)||u,d===u&&a.set(null,f),a.set(v,f),this.count++,u=Ro.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),d?d.parentNode.insertBefore(f,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),r.state.loading|=4}}var Ja={$$typeof:O,Provider:null,Consumer:null,_currentValue:M,_currentValue2:M,_threadCount:0};function Z1(e,r,a,u,f,d,v,S,F){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$e(0),this.hiddenUpdates=$e(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function qy(e,r,a,u,f,d,v,S,F,W,et,st){return e=new Z1(e,r,a,v,F,W,et,st,S),r=1,d===!0&&(r|=24),d=hi(3,null,null,r),e.current=d,d.stateNode=e,r=xh(),r.refCount++,e.pooledCache=r,r.refCount++,d.memoizedState={element:u,isDehydrated:a,cache:r},Ah(d),e}function Yy(e){return e?(e=_s,e):_s}function Wy(e,r,a,u,f,d){f=Yy(f),u.context===null?u.context=f:u.pendingContext=f,u=jr(r),u.payload={element:a},d=d===void 0?null:d,d!==null&&(u.callback=d),a=qr(e,u,r),a!==null&&(ni(a,e,r),Oa(a,e,r))}function $y(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<r?a:r}}function kc(e,r){$y(e,r),(e=e.alternate)&&$y(e,r)}function Zy(e){if(e.tag===13||e.tag===31){var r=Rn(e,67108864);r!==null&&ni(r,e,67108864),kc(e,67108864)}}function Ky(e){if(e.tag===13||e.tag===31){var r=mi();r=Fr(r);var a=Rn(e,r);a!==null&&ni(a,e,r),kc(e,r)}}var Oo=!0;function K1(e,r,a,u){var f=T.T;T.T=null;var d=R.p;try{R.p=2,Xc(e,r,a,u)}finally{R.p=d,T.T=f}}function Q1(e,r,a,u){var f=T.T;T.T=null;var d=R.p;try{R.p=8,Xc(e,r,a,u)}finally{R.p=d,T.T=f}}function Xc(e,r,a,u){if(Oo){var f=Vc(u);if(f===null)Mc(e,r,u,Bo,a),Jy(e,u);else if(tT(f,e,r,a,u))u.stopPropagation();else if(Jy(e,u),r&4&&-1<J1.indexOf(e)){for(;f!==null;){var d=os(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=We(d.pendingLanes);if(v!==0){var S=d;for(S.pendingLanes|=2,S.entangledLanes|=2;v;){var F=1<<31-j(v);S.entanglements[1]|=F,v&=~F}Wi(d),(Jt&6)===0&&(po=vt()+500,Ya(0))}}break;case 31:case 13:S=Rn(d,2),S!==null&&ni(S,d,2),go(),kc(d,2)}if(d=Vc(u),d===null&&Mc(e,r,u,Bo,a),d===f)break;f=d}f!==null&&u.stopPropagation()}else Mc(e,r,u,null,a)}}function Vc(e){return e=qu(e),jc(e)}var Bo=null;function jc(e){if(Bo=null,e=or(e),e!==null){var r=o(e);if(r===null)e=null;else{var a=r.tag;if(a===13){if(e=h(r),e!==null)return e;e=null}else if(a===31){if(e=c(r),e!==null)return e;e=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null)}}return Bo=e,null}function Qy(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pe()){case Ur:return 2;case ua:return 8;case rs:case bn:return 32;case ns:return 268435456;default:return 32}default:return 32}}var qc=!1,nn=null,sn=null,an=null,tl=new Map,el=new Map,ln=[],J1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Jy(e,r){switch(e){case"focusin":case"focusout":nn=null;break;case"dragenter":case"dragleave":sn=null;break;case"mouseover":case"mouseout":an=null;break;case"pointerover":case"pointerout":tl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":el.delete(r.pointerId)}}function il(e,r,a,u,f,d){return e===null||e.nativeEvent!==d?(e={blockedOn:r,domEventName:a,eventSystemFlags:u,nativeEvent:d,targetContainers:[f]},r!==null&&(r=os(r),r!==null&&Zy(r)),e):(e.eventSystemFlags|=u,r=e.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),e)}function tT(e,r,a,u,f){switch(r){case"focusin":return nn=il(nn,e,r,a,u,f),!0;case"dragenter":return sn=il(sn,e,r,a,u,f),!0;case"mouseover":return an=il(an,e,r,a,u,f),!0;case"pointerover":var d=f.pointerId;return tl.set(d,il(tl.get(d)||null,e,r,a,u,f)),!0;case"gotpointercapture":return d=f.pointerId,el.set(d,il(el.get(d)||null,e,r,a,u,f)),!0}return!1}function t0(e){var r=or(e.target);if(r!==null){var a=o(r);if(a!==null){if(r=a.tag,r===13){if(r=h(a),r!==null){e.blockedOn=r,fa(e.priority,function(){Ky(a)});return}}else if(r===31){if(r=c(a),r!==null){e.blockedOn=r,fa(e.priority,function(){Ky(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Io(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var a=Vc(e.nativeEvent);if(a===null){a=e.nativeEvent;var u=new a.constructor(a.type,a);ju=u,a.target.dispatchEvent(u),ju=null}else return r=os(a),r!==null&&Zy(r),e.blockedOn=a,!1;r.shift()}return!0}function e0(e,r,a){Io(e)&&a.delete(r)}function eT(){qc=!1,nn!==null&&Io(nn)&&(nn=null),sn!==null&&Io(sn)&&(sn=null),an!==null&&Io(an)&&(an=null),tl.forEach(e0),el.forEach(e0)}function No(e,r){e.blockedOn===r&&(e.blockedOn=null,qc||(qc=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,eT)))}var Uo=null;function i0(e){Uo!==e&&(Uo=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Uo===e&&(Uo=null);for(var r=0;r<e.length;r+=3){var a=e[r],u=e[r+1],f=e[r+2];if(typeof u!="function"){if(jc(u||a)===null)continue;break}var d=os(a);d!==null&&(e.splice(r,3),r-=3,Vh(d,{pending:!0,data:f,method:a.method,action:u},u,f))}}))}function Xs(e){function r(F){return No(F,e)}nn!==null&&No(nn,e),sn!==null&&No(sn,e),an!==null&&No(an,e),tl.forEach(r),el.forEach(r);for(var a=0;a<ln.length;a++){var u=ln[a];u.blockedOn===e&&(u.blockedOn=null)}for(;0<ln.length&&(a=ln[0],a.blockedOn===null);)t0(a),a.blockedOn===null&&ln.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var f=a[u],d=a[u+1],v=f[ze]||null;if(typeof d=="function")v||i0(a);else if(v){var S=null;if(d&&d.hasAttribute("formAction")){if(f=d,v=d[ze]||null)S=v.formAction;else if(jc(f)!==null)continue}else S=v.action;typeof S=="function"?a[u+1]=S:(a.splice(u,3),u-=3),i0(a)}}}function r0(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function Yc(e){this._internalRoot=e}Lo.prototype.render=Yc.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(n(409));var a=r.current,u=mi();Wy(a,u,e,r,null,null)},Lo.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;Wy(e.current,2,null,e,null,null),go(),r[Xi]=null}};function Lo(e){this._internalRoot=e}Lo.prototype.unstable_scheduleHydration=function(e){if(e){var r=as();e={blockedOn:null,target:e,priority:r};for(var a=0;a<ln.length&&r!==0&&r<ln[a].priority;a++);ln.splice(a,0,e),a===0&&t0(e)}};var n0=t.version;if(n0!=="19.2.0")throw Error(n(527,n0,"19.2.0"));R.findDOMNode=function(e){var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(n(188)):(e=Object.keys(e).join(","),Error(n(268,e)));return e=m(r),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var iT={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:T,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Po=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Po.isDisabled&&Po.supportsFiber)try{Tn=Po.inject(iT),Ge=Po}catch{}}return nl.createRoot=function(e,r){if(!l(e))throw Error(n(299));var a=!1,u="",f=cg,d=fg,v=dg;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(d=r.onCaughtError),r.onRecoverableError!==void 0&&(v=r.onRecoverableError)),r=qy(e,1,!1,null,null,a,u,null,f,d,v,r0),e[Xi]=r.current,Rc(e),new Yc(r)},nl.hydrateRoot=function(e,r,a){if(!l(e))throw Error(n(299));var u=!1,f="",d=cg,v=fg,S=dg,F=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.formState!==void 0&&(F=a.formState)),r=qy(e,1,!0,r,a??null,u,f,F,d,v,S,r0),r.context=Yy(null),a=r.current,u=mi(),u=Fr(u),f=jr(u),f.callback=null,qr(a,f,u),a=u,r.current.lanes=a,Lr(r,a),Wi(r),e[Xi]=r.current,Rc(e),new Lo(r)},nl.version="19.2.0",nl}var p0;function dT(){if(p0)return Zc.exports;p0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Zc.exports=fT(),Zc.exports}var pT=dT(),es=(s=>(s[s.WEBGL_LEGACY=0]="WEBGL_LEGACY",s[s.WEBGL=1]="WEBGL",s[s.WEBGL2=2]="WEBGL2",s))(es||{}),b_=(s=>(s[s.UNKNOWN=0]="UNKNOWN",s[s.WEBGL=1]="WEBGL",s[s.CANVAS=2]="CANVAS",s))(b_||{}),bd=(s=>(s[s.COLOR=16384]="COLOR",s[s.DEPTH=256]="DEPTH",s[s.STENCIL=1024]="STENCIL",s))(bd||{}),Nt=(s=>(s[s.NORMAL=0]="NORMAL",s[s.ADD=1]="ADD",s[s.MULTIPLY=2]="MULTIPLY",s[s.SCREEN=3]="SCREEN",s[s.OVERLAY=4]="OVERLAY",s[s.DARKEN=5]="DARKEN",s[s.LIGHTEN=6]="LIGHTEN",s[s.COLOR_DODGE=7]="COLOR_DODGE",s[s.COLOR_BURN=8]="COLOR_BURN",s[s.HARD_LIGHT=9]="HARD_LIGHT",s[s.SOFT_LIGHT=10]="SOFT_LIGHT",s[s.DIFFERENCE=11]="DIFFERENCE",s[s.EXCLUSION=12]="EXCLUSION",s[s.HUE=13]="HUE",s[s.SATURATION=14]="SATURATION",s[s.COLOR=15]="COLOR",s[s.LUMINOSITY=16]="LUMINOSITY",s[s.NORMAL_NPM=17]="NORMAL_NPM",s[s.ADD_NPM=18]="ADD_NPM",s[s.SCREEN_NPM=19]="SCREEN_NPM",s[s.NONE=20]="NONE",s[s.SRC_OVER=0]="SRC_OVER",s[s.SRC_IN=21]="SRC_IN",s[s.SRC_OUT=22]="SRC_OUT",s[s.SRC_ATOP=23]="SRC_ATOP",s[s.DST_OVER=24]="DST_OVER",s[s.DST_IN=25]="DST_IN",s[s.DST_OUT=26]="DST_OUT",s[s.DST_ATOP=27]="DST_ATOP",s[s.ERASE=26]="ERASE",s[s.SUBTRACT=28]="SUBTRACT",s[s.XOR=29]="XOR",s))(Nt||{}),er=(s=>(s[s.POINTS=0]="POINTS",s[s.LINES=1]="LINES",s[s.LINE_LOOP=2]="LINE_LOOP",s[s.LINE_STRIP=3]="LINE_STRIP",s[s.TRIANGLES=4]="TRIANGLES",s[s.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",s[s.TRIANGLE_FAN=6]="TRIANGLE_FAN",s))(er||{}),ht=(s=>(s[s.RGBA=6408]="RGBA",s[s.RGB=6407]="RGB",s[s.RG=33319]="RG",s[s.RED=6403]="RED",s[s.RGBA_INTEGER=36249]="RGBA_INTEGER",s[s.RGB_INTEGER=36248]="RGB_INTEGER",s[s.RG_INTEGER=33320]="RG_INTEGER",s[s.RED_INTEGER=36244]="RED_INTEGER",s[s.ALPHA=6406]="ALPHA",s[s.LUMINANCE=6409]="LUMINANCE",s[s.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",s[s.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",s[s.DEPTH_STENCIL=34041]="DEPTH_STENCIL",s))(ht||{}),Js=(s=>(s[s.TEXTURE_2D=3553]="TEXTURE_2D",s[s.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",s[s.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",s[s.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",s[s.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",s[s.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",s[s.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",s))(Js||{}),Dt=(s=>(s[s.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",s[s.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",s[s.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",s[s.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",s[s.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",s[s.UNSIGNED_INT=5125]="UNSIGNED_INT",s[s.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",s[s.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",s[s.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",s[s.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",s[s.BYTE=5120]="BYTE",s[s.SHORT=5122]="SHORT",s[s.INT=5124]="INT",s[s.FLOAT=5126]="FLOAT",s[s.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",s[s.HALF_FLOAT=36193]="HALF_FLOAT",s))(Dt||{}),mt=(s=>(s[s.FLOAT=0]="FLOAT",s[s.INT=1]="INT",s[s.UINT=2]="UINT",s))(mt||{}),Mr=(s=>(s[s.NEAREST=0]="NEAREST",s[s.LINEAR=1]="LINEAR",s))(Mr||{}),yn=(s=>(s[s.CLAMP=33071]="CLAMP",s[s.REPEAT=10497]="REPEAT",s[s.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",s))(yn||{}),nr=(s=>(s[s.OFF=0]="OFF",s[s.POW2=1]="POW2",s[s.ON=2]="ON",s[s.ON_MANUAL=3]="ON_MANUAL",s))(nr||{}),si=(s=>(s[s.NPM=0]="NPM",s[s.UNPACK=1]="UNPACK",s[s.PMA=2]="PMA",s[s.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",s[s.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",s[s.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",s))(si||{}),tr=(s=>(s[s.NO=0]="NO",s[s.YES=1]="YES",s[s.AUTO=2]="AUTO",s[s.BLEND=0]="BLEND",s[s.CLEAR=1]="CLEAR",s[s.BLIT=2]="BLIT",s))(tr||{}),sp=(s=>(s[s.AUTO=0]="AUTO",s[s.MANUAL=1]="MANUAL",s))(sp||{}),Mi=(s=>(s.LOW="lowp",s.MEDIUM="mediump",s.HIGH="highp",s))(Mi||{}),Be=(s=>(s[s.NONE=0]="NONE",s[s.SCISSOR=1]="SCISSOR",s[s.STENCIL=2]="STENCIL",s[s.SPRITE=3]="SPRITE",s[s.COLOR=4]="COLOR",s))(Be||{}),De=(s=>(s[s.NONE=0]="NONE",s[s.LOW=2]="LOW",s[s.MEDIUM=4]="MEDIUM",s[s.HIGH=8]="HIGH",s))(De||{}),ir=(s=>(s[s.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",s[s.ARRAY_BUFFER=34962]="ARRAY_BUFFER",s[s.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",s))(ir||{});const mT={createCanvas:(s,t)=>{const i=document.createElement("canvas");return i.width=s,i.height=t,i},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(s,t)=>fetch(s,t),parseXML:s=>new DOMParser().parseFromString(s,"text/xml")},gt={ADAPTER:mT,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var tf=/iPhone/i,m0=/iPod/i,g0=/iPad/i,y0=/\biOS-universal(?:.+)Mac\b/i,ef=/\bAndroid(?:.+)Mobile\b/i,v0=/Android/i,Vs=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Fo=/Silk/i,Cr=/Windows Phone/i,_0=/\bWindows(?:.+)ARM\b/i,x0=/BlackBerry/i,b0=/BB10/i,T0=/Opera Mini/i,E0=/\b(CriOS|Chrome)(?:.+)Mobile/i,A0=/Mobile(?:.+)Firefox\b/i,S0=function(s){return typeof s<"u"&&s.platform==="MacIntel"&&typeof s.maxTouchPoints=="number"&&s.maxTouchPoints>1&&typeof MSStream>"u"};function gT(s){return function(t){return t.test(s)}}function w0(s){var t={userAgent:"",platform:"",maxTouchPoints:0};!s&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof s=="string"?t.userAgent=s:s&&s.userAgent&&(t={userAgent:s.userAgent,platform:s.platform,maxTouchPoints:s.maxTouchPoints||0});var i=t.userAgent,n=i.split("[FBAN");typeof n[1]<"u"&&(i=n[0]),n=i.split("Twitter"),typeof n[1]<"u"&&(i=n[0]);var l=gT(i),o={apple:{phone:l(tf)&&!l(Cr),ipod:l(m0),tablet:!l(tf)&&(l(g0)||S0(t))&&!l(Cr),universal:l(y0),device:(l(tf)||l(m0)||l(g0)||l(y0)||S0(t))&&!l(Cr)},amazon:{phone:l(Vs),tablet:!l(Vs)&&l(Fo),device:l(Vs)||l(Fo)},android:{phone:!l(Cr)&&l(Vs)||!l(Cr)&&l(ef),tablet:!l(Cr)&&!l(Vs)&&!l(ef)&&(l(Fo)||l(v0)),device:!l(Cr)&&(l(Vs)||l(Fo)||l(ef)||l(v0))||l(/\bokhttp\b/i)},windows:{phone:l(Cr),tablet:l(_0),device:l(Cr)||l(_0)},other:{blackberry:l(x0),blackberry10:l(b0),opera:l(T0),firefox:l(A0),chrome:l(E0),device:l(x0)||l(b0)||l(T0)||l(A0)||l(E0)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}const yT=w0.default??w0,Dr=yT(globalThis.navigator);gt.RETINA_PREFIX=/@([0-9\.]+)x/;gt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var rf={exports:{}},C0;function vT(){return C0||(C0=1,(function(s){var t=Object.prototype.hasOwnProperty,i="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(i=!1));function l(p,m,g){this.fn=p,this.context=m,this.once=g||!1}function o(p,m,g,y,x){if(typeof g!="function")throw new TypeError("The listener must be a function");var _=new l(g,y||p,x),b=i?i+m:m;return p._events[b]?p._events[b].fn?p._events[b]=[p._events[b],_]:p._events[b].push(_):(p._events[b]=_,p._eventsCount++),p}function h(p,m){--p._eventsCount===0?p._events=new n:delete p._events[m]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var m=[],g,y;if(this._eventsCount===0)return m;for(y in g=this._events)t.call(g,y)&&m.push(i?y.slice(1):y);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(g)):m},c.prototype.listeners=function(m){var g=i?i+m:m,y=this._events[g];if(!y)return[];if(y.fn)return[y.fn];for(var x=0,_=y.length,b=new Array(_);x<_;x++)b[x]=y[x].fn;return b},c.prototype.listenerCount=function(m){var g=i?i+m:m,y=this._events[g];return y?y.fn?1:y.length:0},c.prototype.emit=function(m,g,y,x,_,b){var w=i?i+m:m;if(!this._events[w])return!1;var A=this._events[w],C=arguments.length,U,O;if(A.fn){switch(A.once&&this.removeListener(m,A.fn,void 0,!0),C){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,g),!0;case 3:return A.fn.call(A.context,g,y),!0;case 4:return A.fn.call(A.context,g,y,x),!0;case 5:return A.fn.call(A.context,g,y,x,_),!0;case 6:return A.fn.call(A.context,g,y,x,_,b),!0}for(O=1,U=new Array(C-1);O<C;O++)U[O-1]=arguments[O];A.fn.apply(A.context,U)}else{var L=A.length,B;for(O=0;O<L;O++)switch(A[O].once&&this.removeListener(m,A[O].fn,void 0,!0),C){case 1:A[O].fn.call(A[O].context);break;case 2:A[O].fn.call(A[O].context,g);break;case 3:A[O].fn.call(A[O].context,g,y);break;case 4:A[O].fn.call(A[O].context,g,y,x);break;default:if(!U)for(B=1,U=new Array(C-1);B<C;B++)U[B-1]=arguments[B];A[O].fn.apply(A[O].context,U)}}return!0},c.prototype.on=function(m,g,y){return o(this,m,g,y,!1)},c.prototype.once=function(m,g,y){return o(this,m,g,y,!0)},c.prototype.removeListener=function(m,g,y,x){var _=i?i+m:m;if(!this._events[_])return this;if(!g)return h(this,_),this;var b=this._events[_];if(b.fn)b.fn===g&&(!x||b.once)&&(!y||b.context===y)&&h(this,_);else{for(var w=0,A=[],C=b.length;w<C;w++)(b[w].fn!==g||x&&!b[w].once||y&&b[w].context!==y)&&A.push(b[w]);A.length?this._events[_]=A.length===1?A[0]:A:h(this,_)}return this},c.prototype.removeAllListeners=function(m){var g;return m?(g=i?i+m:m,this._events[g]&&h(this,g)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=i,c.EventEmitter=c,s.exports=c})(rf)),rf.exports}var _T=vT();const xl=x_(_T);var Go={exports:{}},R0;function xT(){if(R0)return Go.exports;R0=1,Go.exports=s,Go.exports.default=s;function s(T,R,M){M=M||2;var z=R&&R.length,N=z?R[0]*M:T.length,E=t(T,0,N,M,!0),I=[];if(!E||E.next===E.prev)return I;var P,V,tt,lt,ot,ft,ct;if(z&&(E=p(T,R,E,M)),T.length>80*M){P=tt=T[0],V=lt=T[1];for(var ut=M;ut<N;ut+=M)ot=T[ut],ft=T[ut+1],ot<P&&(P=ot),ft<V&&(V=ft),ot>tt&&(tt=ot),ft>lt&&(lt=ft);ct=Math.max(tt-P,lt-V),ct=ct!==0?32767/ct:0}return n(E,I,M,P,V,ct,0),I}function t(T,R,M,z,N){var E,I;if(N===dt(T,R,M,z)>0)for(E=R;E<M;E+=z)I=k(E,T[E],T[E+1],I);else for(E=M-z;E>=R;E-=z)I=k(E,T[E],T[E+1],I);return I&&L(I,I.next)&&(Z(I),I=I.next),I}function i(T,R){if(!T)return T;R||(R=T);var M=T,z;do if(z=!1,!M.steiner&&(L(M,M.next)||O(M.prev,M,M.next)===0)){if(Z(M),M=R=M.prev,M===M.next)break;z=!0}else M=M.next;while(z||M!==R);return R}function n(T,R,M,z,N,E,I){if(T){!I&&E&&_(T,z,N,E);for(var P=T,V,tt;T.prev!==T.next;){if(V=T.prev,tt=T.next,E?o(T,z,N,E):l(T)){R.push(V.i/M|0),R.push(T.i/M|0),R.push(tt.i/M|0),Z(T),T=tt.next,P=tt.next;continue}if(T=tt,T===P){I?I===1?(T=h(i(T),R,M),n(T,R,M,z,N,E,2)):I===2&&c(T,R,M,z,N,E):n(i(T),R,M,z,N,E,1);break}}}}function l(T){var R=T.prev,M=T,z=T.next;if(O(R,M,z)>=0)return!1;for(var N=R.x,E=M.x,I=z.x,P=R.y,V=M.y,tt=z.y,lt=N<E?N<I?N:I:E<I?E:I,ot=P<V?P<tt?P:tt:V<tt?V:tt,ft=N>E?N>I?N:I:E>I?E:I,ct=P>V?P>tt?P:tt:V>tt?V:tt,ut=z.next;ut!==R;){if(ut.x>=lt&&ut.x<=ft&&ut.y>=ot&&ut.y<=ct&&C(N,P,E,V,I,tt,ut.x,ut.y)&&O(ut.prev,ut,ut.next)>=0)return!1;ut=ut.next}return!0}function o(T,R,M,z){var N=T.prev,E=T,I=T.next;if(O(N,E,I)>=0)return!1;for(var P=N.x,V=E.x,tt=I.x,lt=N.y,ot=E.y,ft=I.y,ct=P<V?P<tt?P:tt:V<tt?V:tt,ut=lt<ot?lt<ft?lt:ft:ot<ft?ot:ft,yt=P>V?P>tt?P:tt:V>tt?V:tt,Tt=lt>ot?lt>ft?lt:ft:ot>ft?ot:ft,Mt=w(ct,ut,R,M,z),Lt=w(yt,Tt,R,M,z),Et=T.prevZ,_t=T.nextZ;Et&&Et.z>=Mt&&_t&&_t.z<=Lt;){if(Et.x>=ct&&Et.x<=yt&&Et.y>=ut&&Et.y<=Tt&&Et!==N&&Et!==I&&C(P,lt,V,ot,tt,ft,Et.x,Et.y)&&O(Et.prev,Et,Et.next)>=0||(Et=Et.prevZ,_t.x>=ct&&_t.x<=yt&&_t.y>=ut&&_t.y<=Tt&&_t!==N&&_t!==I&&C(P,lt,V,ot,tt,ft,_t.x,_t.y)&&O(_t.prev,_t,_t.next)>=0))return!1;_t=_t.nextZ}for(;Et&&Et.z>=Mt;){if(Et.x>=ct&&Et.x<=yt&&Et.y>=ut&&Et.y<=Tt&&Et!==N&&Et!==I&&C(P,lt,V,ot,tt,ft,Et.x,Et.y)&&O(Et.prev,Et,Et.next)>=0)return!1;Et=Et.prevZ}for(;_t&&_t.z<=Lt;){if(_t.x>=ct&&_t.x<=yt&&_t.y>=ut&&_t.y<=Tt&&_t!==N&&_t!==I&&C(P,lt,V,ot,tt,ft,_t.x,_t.y)&&O(_t.prev,_t,_t.next)>=0)return!1;_t=_t.nextZ}return!0}function h(T,R,M){var z=T;do{var N=z.prev,E=z.next.next;!L(N,E)&&B(N,z,z.next,E)&&rt(N,E)&&rt(E,N)&&(R.push(N.i/M|0),R.push(z.i/M|0),R.push(E.i/M|0),Z(z),Z(z.next),z=T=E),z=z.next}while(z!==T);return i(z)}function c(T,R,M,z,N,E){var I=T;do{for(var P=I.next.next;P!==I.prev;){if(I.i!==P.i&&U(I,P)){var V=it(I,P);I=i(I,I.next),V=i(V,V.next),n(I,R,M,z,N,E,0),n(V,R,M,z,N,E,0);return}P=P.next}I=I.next}while(I!==T)}function p(T,R,M,z){var N=[],E,I,P,V,tt;for(E=0,I=R.length;E<I;E++)P=R[E]*z,V=E<I-1?R[E+1]*z:T.length,tt=t(T,P,V,z,!1),tt===tt.next&&(tt.steiner=!0),N.push(A(tt));for(N.sort(m),E=0;E<N.length;E++)M=g(N[E],M);return M}function m(T,R){return T.x-R.x}function g(T,R){var M=y(T,R);if(!M)return R;var z=it(M,T);return i(z,z.next),i(M,M.next)}function y(T,R){var M=R,z=T.x,N=T.y,E=-1/0,I;do{if(N<=M.y&&N>=M.next.y&&M.next.y!==M.y){var P=M.x+(N-M.y)*(M.next.x-M.x)/(M.next.y-M.y);if(P<=z&&P>E&&(E=P,I=M.x<M.next.x?M:M.next,P===z))return I}M=M.next}while(M!==R);if(!I)return null;var V=I,tt=I.x,lt=I.y,ot=1/0,ft;M=I;do z>=M.x&&M.x>=tt&&z!==M.x&&C(N<lt?z:E,N,tt,lt,N<lt?E:z,N,M.x,M.y)&&(ft=Math.abs(N-M.y)/(z-M.x),rt(M,T)&&(ft<ot||ft===ot&&(M.x>I.x||M.x===I.x&&x(I,M)))&&(I=M,ot=ft)),M=M.next;while(M!==V);return I}function x(T,R){return O(T.prev,T,R.prev)<0&&O(R.next,T,T.next)<0}function _(T,R,M,z){var N=T;do N.z===0&&(N.z=w(N.x,N.y,R,M,z)),N.prevZ=N.prev,N.nextZ=N.next,N=N.next;while(N!==T);N.prevZ.nextZ=null,N.prevZ=null,b(N)}function b(T){var R,M,z,N,E,I,P,V,tt=1;do{for(M=T,T=null,E=null,I=0;M;){for(I++,z=M,P=0,R=0;R<tt&&(P++,z=z.nextZ,!!z);R++);for(V=tt;P>0||V>0&&z;)P!==0&&(V===0||!z||M.z<=z.z)?(N=M,M=M.nextZ,P--):(N=z,z=z.nextZ,V--),E?E.nextZ=N:T=N,N.prevZ=E,E=N;M=z}E.nextZ=null,tt*=2}while(I>1);return T}function w(T,R,M,z,N){return T=(T-M)*N|0,R=(R-z)*N|0,T=(T|T<<8)&16711935,T=(T|T<<4)&252645135,T=(T|T<<2)&858993459,T=(T|T<<1)&1431655765,R=(R|R<<8)&16711935,R=(R|R<<4)&252645135,R=(R|R<<2)&858993459,R=(R|R<<1)&1431655765,T|R<<1}function A(T){var R=T,M=T;do(R.x<M.x||R.x===M.x&&R.y<M.y)&&(M=R),R=R.next;while(R!==T);return M}function C(T,R,M,z,N,E,I,P){return(N-I)*(R-P)>=(T-I)*(E-P)&&(T-I)*(z-P)>=(M-I)*(R-P)&&(M-I)*(E-P)>=(N-I)*(z-P)}function U(T,R){return T.next.i!==R.i&&T.prev.i!==R.i&&!q(T,R)&&(rt(T,R)&&rt(R,T)&&at(T,R)&&(O(T.prev,T,R.prev)||O(T,R.prev,R))||L(T,R)&&O(T.prev,T,T.next)>0&&O(R.prev,R,R.next)>0)}function O(T,R,M){return(R.y-T.y)*(M.x-R.x)-(R.x-T.x)*(M.y-R.y)}function L(T,R){return T.x===R.x&&T.y===R.y}function B(T,R,M,z){var N=D(O(T,R,M)),E=D(O(T,R,z)),I=D(O(M,z,T)),P=D(O(M,z,R));return!!(N!==E&&I!==P||N===0&&H(T,M,R)||E===0&&H(T,z,R)||I===0&&H(M,T,z)||P===0&&H(M,R,z))}function H(T,R,M){return R.x<=Math.max(T.x,M.x)&&R.x>=Math.min(T.x,M.x)&&R.y<=Math.max(T.y,M.y)&&R.y>=Math.min(T.y,M.y)}function D(T){return T>0?1:T<0?-1:0}function q(T,R){var M=T;do{if(M.i!==T.i&&M.next.i!==T.i&&M.i!==R.i&&M.next.i!==R.i&&B(M,M.next,T,R))return!0;M=M.next}while(M!==T);return!1}function rt(T,R){return O(T.prev,T,T.next)<0?O(T,R,T.next)>=0&&O(T,T.prev,R)>=0:O(T,R,T.prev)<0||O(T,T.next,R)<0}function at(T,R){var M=T,z=!1,N=(T.x+R.x)/2,E=(T.y+R.y)/2;do M.y>E!=M.next.y>E&&M.next.y!==M.y&&N<(M.next.x-M.x)*(E-M.y)/(M.next.y-M.y)+M.x&&(z=!z),M=M.next;while(M!==T);return z}function it(T,R){var M=new J(T.i,T.x,T.y),z=new J(R.i,R.x,R.y),N=T.next,E=R.prev;return T.next=R,R.prev=T,M.next=N,N.prev=M,z.next=M,M.prev=z,E.next=z,z.prev=E,z}function k(T,R,M,z){var N=new J(T,R,M);return z?(N.next=z.next,N.prev=z,z.next.prev=N,z.next=N):(N.prev=N,N.next=N),N}function Z(T){T.next.prev=T.prev,T.prev.next=T.next,T.prevZ&&(T.prevZ.nextZ=T.nextZ),T.nextZ&&(T.nextZ.prevZ=T.prevZ)}function J(T,R,M){this.i=T,this.x=R,this.y=M,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}s.deviation=function(T,R,M,z){var N=R&&R.length,E=N?R[0]*M:T.length,I=Math.abs(dt(T,0,E,M));if(N)for(var P=0,V=R.length;P<V;P++){var tt=R[P]*M,lt=P<V-1?R[P+1]*M:T.length;I-=Math.abs(dt(T,tt,lt,M))}var ot=0;for(P=0;P<z.length;P+=3){var ft=z[P]*M,ct=z[P+1]*M,ut=z[P+2]*M;ot+=Math.abs((T[ft]-T[ut])*(T[ct+1]-T[ft+1])-(T[ft]-T[ct])*(T[ut+1]-T[ft+1]))}return I===0&&ot===0?0:Math.abs((ot-I)/I)};function dt(T,R,M,z){for(var N=0,E=R,I=M-z;E<M;E+=z)N+=(T[I]-T[E])*(T[E+1]+T[I+1]),I=E;return N}return s.flatten=function(T){for(var R=T[0][0].length,M={vertices:[],holes:[],dimensions:R},z=0,N=0;N<T.length;N++){for(var E=0;E<T[N].length;E++)for(var I=0;I<R;I++)M.vertices.push(T[N][E][I]);N>0&&(z+=T[N-1].length,M.holes.push(z))}return M},Go.exports}var bT=xT();const TT=x_(bT);var Hn={},ul={exports:{}};var ET=ul.exports,M0;function AT(){return M0||(M0=1,(function(s,t){(function(i){var n=t&&!t.nodeType&&t,l=s&&!s.nodeType&&s,o=typeof pu=="object"&&pu;(o.global===o||o.window===o||o.self===o)&&(i=o);var h,c=2147483647,p=36,m=1,g=26,y=38,x=700,_=72,b=128,w="-",A=/^xn--/,C=/[^\x20-\x7E]/,U=/[\x2E\u3002\uFF0E\uFF61]/g,O={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},L=p-m,B=Math.floor,H=String.fromCharCode,D;function q(N){throw new RangeError(O[N])}function rt(N,E){for(var I=N.length,P=[];I--;)P[I]=E(N[I]);return P}function at(N,E){var I=N.split("@"),P="";I.length>1&&(P=I[0]+"@",N=I[1]),N=N.replace(U,".");var V=N.split("."),tt=rt(V,E).join(".");return P+tt}function it(N){for(var E=[],I=0,P=N.length,V,tt;I<P;)V=N.charCodeAt(I++),V>=55296&&V<=56319&&I<P?(tt=N.charCodeAt(I++),(tt&64512)==56320?E.push(((V&1023)<<10)+(tt&1023)+65536):(E.push(V),I--)):E.push(V);return E}function k(N){return rt(N,function(E){var I="";return E>65535&&(E-=65536,I+=H(E>>>10&1023|55296),E=56320|E&1023),I+=H(E),I}).join("")}function Z(N){return N-48<10?N-22:N-65<26?N-65:N-97<26?N-97:p}function J(N,E){return N+22+75*(N<26)-((E!=0)<<5)}function dt(N,E,I){var P=0;for(N=I?B(N/x):N>>1,N+=B(N/E);N>L*g>>1;P+=p)N=B(N/L);return B(P+(L+1)*N/(N+y))}function T(N){var E=[],I=N.length,P,V=0,tt=b,lt=_,ot,ft,ct,ut,yt,Tt,Mt,Lt,Et;for(ot=N.lastIndexOf(w),ot<0&&(ot=0),ft=0;ft<ot;++ft)N.charCodeAt(ft)>=128&&q("not-basic"),E.push(N.charCodeAt(ft));for(ct=ot>0?ot+1:0;ct<I;){for(ut=V,yt=1,Tt=p;ct>=I&&q("invalid-input"),Mt=Z(N.charCodeAt(ct++)),(Mt>=p||Mt>B((c-V)/yt))&&q("overflow"),V+=Mt*yt,Lt=Tt<=lt?m:Tt>=lt+g?g:Tt-lt,!(Mt<Lt);Tt+=p)Et=p-Lt,yt>B(c/Et)&&q("overflow"),yt*=Et;P=E.length+1,lt=dt(V-ut,P,ut==0),B(V/P)>c-tt&&q("overflow"),tt+=B(V/P),V%=P,E.splice(V++,0,tt)}return k(E)}function R(N){var E,I,P,V,tt,lt,ot,ft,ct,ut,yt,Tt=[],Mt,Lt,Et,_t;for(N=it(N),Mt=N.length,E=b,I=0,tt=_,lt=0;lt<Mt;++lt)yt=N[lt],yt<128&&Tt.push(H(yt));for(P=V=Tt.length,V&&Tt.push(w);P<Mt;){for(ot=c,lt=0;lt<Mt;++lt)yt=N[lt],yt>=E&&yt<ot&&(ot=yt);for(Lt=P+1,ot-E>B((c-I)/Lt)&&q("overflow"),I+=(ot-E)*Lt,E=ot,lt=0;lt<Mt;++lt)if(yt=N[lt],yt<E&&++I>c&&q("overflow"),yt==E){for(ft=I,ct=p;ut=ct<=tt?m:ct>=tt+g?g:ct-tt,!(ft<ut);ct+=p)_t=ft-ut,Et=p-ut,Tt.push(H(J(ut+_t%Et,0))),ft=B(_t/Et);Tt.push(H(J(ft,0))),tt=dt(I,Lt,P==V),I=0,++P}++I,++E}return Tt.join("")}function M(N){return at(N,function(E){return A.test(E)?T(E.slice(4).toLowerCase()):E})}function z(N){return at(N,function(E){return C.test(E)?"xn--"+R(E):E})}if(h={version:"1.4.1",ucs2:{decode:it,encode:k},decode:T,encode:R,toASCII:z,toUnicode:M},n&&l)if(s.exports==n)l.exports=h;else for(D in h)h.hasOwnProperty(D)&&(n[D]=h[D]);else i.punycode=h})(ET)})(ul,ul.exports)),ul.exports}var nf,D0;function aa(){return D0||(D0=1,nf=TypeError),nf}const ST={},wT=Object.freeze(Object.defineProperty({__proto__:null,default:ST},Symbol.toStringTag,{value:"Module"})),CT=nT(wT);var sf,O0;function Mu(){if(O0)return sf;O0=1;var s=typeof Map=="function"&&Map.prototype,t=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,i=s&&t&&typeof t.get=="function"?t.get:null,n=s&&Map.prototype.forEach,l=typeof Set=="function"&&Set.prototype,o=Object.getOwnPropertyDescriptor&&l?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,h=l&&o&&typeof o.get=="function"?o.get:null,c=l&&Set.prototype.forEach,p=typeof WeakMap=="function"&&WeakMap.prototype,m=p?WeakMap.prototype.has:null,g=typeof WeakSet=="function"&&WeakSet.prototype,y=g?WeakSet.prototype.has:null,x=typeof WeakRef=="function"&&WeakRef.prototype,_=x?WeakRef.prototype.deref:null,b=Boolean.prototype.valueOf,w=Object.prototype.toString,A=Function.prototype.toString,C=String.prototype.match,U=String.prototype.slice,O=String.prototype.replace,L=String.prototype.toUpperCase,B=String.prototype.toLowerCase,H=RegExp.prototype.test,D=Array.prototype.concat,q=Array.prototype.join,rt=Array.prototype.slice,at=Math.floor,it=typeof BigInt=="function"?BigInt.prototype.valueOf:null,k=Object.getOwnPropertySymbols,Z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,J=typeof Symbol=="function"&&typeof Symbol.iterator=="object",dt=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===J||!0)?Symbol.toStringTag:null,T=Object.prototype.propertyIsEnumerable,R=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(j){return j.__proto__}:null);function M(j,K){if(j===1/0||j===-1/0||j!==j||j&&j>-1e3&&j<1e3||H.call(/e/,K))return K;var Zt=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof j=="number"){var re=j<0?-at(-j):at(j);if(re!==j){var te=String(re),Pt=U.call(K,te.length+1);return O.call(te,Zt,"$&_")+"."+O.call(O.call(Pt,/([0-9]{3})/g,"$&_"),/_$/,"")}}return O.call(K,Zt,"$&_")}var z=CT,N=z.custom,E=Lt(N)?N:null,I={__proto__:null,double:'"',single:"'"},P={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};sf=function j(K,Zt,re,te){var Pt=Zt||{};if(oe(Pt,"quoteStyle")&&!oe(I,Pt.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(oe(Pt,"maxStringLength")&&(typeof Pt.maxStringLength=="number"?Pt.maxStringLength<0&&Pt.maxStringLength!==1/0:Pt.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var oi=oe(Pt,"customInspect")?Pt.customInspect:!0;if(typeof oi!="boolean"&&oi!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(oe(Pt,"indent")&&Pt.indent!==null&&Pt.indent!=="	"&&!(parseInt(Pt.indent,10)===Pt.indent&&Pt.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(oe(Pt,"numericSeparator")&&typeof Pt.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var We=Pt.numericSeparator;if(typeof K>"u")return"undefined";if(K===null)return"null";if(typeof K=="boolean")return K?"true":"false";if(typeof K=="string")return ua(K,Pt);if(typeof K=="number"){if(K===0)return 1/0/K>0?"0":"-0";var Ie=String(K);return We?M(K,Ie):Ie}if(typeof K=="bigint"){var Qe=String(K)+"n";return We?M(K,Qe):Qe}var ha=typeof Pt.depth>"u"?5:Pt.depth;if(typeof re>"u"&&(re=0),re>=ha&&ha>0&&typeof K=="object")return ot(K)?"[Array]":"[Object]";var ar=Tn(Pt,re);if(typeof te>"u")te=[];else if(xt(te,K)>=0)return"[Circular]";function $e(lr,Vi,pa){if(Vi&&(te=rt.call(te),te.push(Vi)),pa){var or={depth:Pt.depth};return oe(Pt,"quoteStyle")&&(or.quoteStyle=Pt.quoteStyle),j(lr,or,re+1,te)}return j(lr,Pt,re+1,te)}if(typeof K=="function"&&!ct(K)){var Lr=ai(K),Al=li(K,$e);return"[Function"+(Lr?": "+Lr:" (anonymous)")+"]"+(Al.length>0?" { "+q.call(Al,", ")+" }":"")}if(Lt(K)){var ca=J?O.call(String(K),/^(Symbol\(.*\))_[^)]*$/,"$1"):Z.call(K);return typeof K=="object"&&!J?bn(ca):ca}if(Ur(K)){for(var Pr="<"+B.call(String(K.nodeName)),ss=K.attributes||[],Fr=0;Fr<ss.length;Fr++)Pr+=" "+ss[Fr].name+"="+V(tt(ss[Fr].value),"double",Pt);return Pr+=">",K.childNodes&&K.childNodes.length&&(Pr+="..."),Pr+="</"+B.call(String(K.nodeName))+">",Pr}if(ot(K)){if(K.length===0)return"[]";var En=li(K,$e);return ar&&!Gu(En)?"["+Ge(En,ar)+"]":"[ "+q.call(En,", ")+" ]"}if(ut(K)){var as=li(K,$e);return!("cause"in Error.prototype)&&"cause"in K&&!T.call(K,"cause")?"{ ["+String(K)+"] "+q.call(D.call("[cause]: "+$e(K.cause),as),", ")+" }":as.length===0?"["+String(K)+"]":"{ ["+String(K)+"] "+q.call(as,", ")+" }"}if(typeof K=="object"&&oi){if(E&&typeof K[E]=="function"&&z)return z(K,{depth:ha-re});if(oi!=="symbol"&&typeof K.inspect=="function")return K.inspect()}if(Rt(K)){var fa=[];return n&&n.call(K,function(lr,Vi){fa.push($e(Vi,K,!0)+" => "+$e(lr,K))}),El("Map",i.call(K),fa,ar)}if(vt(K)){var Oi=[];return c&&c.call(K,function(lr){Oi.push($e(lr,K))}),El("Set",h.call(K),Oi,ar)}if(Ut(K))return ns("WeakMap");if(pe(K))return ns("WeakSet");if(Bt(K))return ns("WeakRef");if(Tt(K))return bn($e(Number(K)));if(Et(K))return bn($e(it.call(K)));if(Mt(K))return bn(b.call(K));if(yt(K))return bn($e(String(K)));if(typeof window<"u"&&K===window)return"{ [object Window] }";if(typeof globalThis<"u"&&K===globalThis||typeof pu<"u"&&K===pu)return"{ [object globalThis] }";if(!ft(K)&&!ct(K)){var be=li(K,$e),ze=R?R(K)===Object.prototype:K instanceof Object||K.constructor===Object,Xi=K instanceof Object?"":"null prototype",ls=!ze&&dt&&Object(K)===K&&dt in K?U.call(ue(K),8,-1):Xi?"Object":"",zu=ze||typeof K.constructor!="function"?"":K.constructor.name?K.constructor.name+" ":"",da=zu+(ls||Xi?"["+q.call(D.call([],ls||[],Xi||[]),": ")+"] ":"");return be.length===0?da+"{}":ar?da+"{"+Ge(be,ar)+"}":da+"{ "+q.call(be,", ")+" }"}return String(K)};function V(j,K,Zt){var re=Zt.quoteStyle||K,te=I[re];return te+j+te}function tt(j){return O.call(String(j),/"/g,"&quot;")}function lt(j){return!dt||!(typeof j=="object"&&(dt in j||typeof j[dt]<"u"))}function ot(j){return ue(j)==="[object Array]"&&lt(j)}function ft(j){return ue(j)==="[object Date]"&&lt(j)}function ct(j){return ue(j)==="[object RegExp]"&&lt(j)}function ut(j){return ue(j)==="[object Error]"&&lt(j)}function yt(j){return ue(j)==="[object String]"&&lt(j)}function Tt(j){return ue(j)==="[object Number]"&&lt(j)}function Mt(j){return ue(j)==="[object Boolean]"&&lt(j)}function Lt(j){if(J)return j&&typeof j=="object"&&j instanceof Symbol;if(typeof j=="symbol")return!0;if(!j||typeof j!="object"||!Z)return!1;try{return Z.call(j),!0}catch{}return!1}function Et(j){if(!j||typeof j!="object"||!it)return!1;try{return it.call(j),!0}catch{}return!1}var _t=Object.prototype.hasOwnProperty||function(j){return j in this};function oe(j,K){return _t.call(j,K)}function ue(j){return w.call(j)}function ai(j){if(j.name)return j.name;var K=C.call(A.call(j),/^function\s*([\w$]+)/);return K?K[1]:null}function xt(j,K){if(j.indexOf)return j.indexOf(K);for(var Zt=0,re=j.length;Zt<re;Zt++)if(j[Zt]===K)return Zt;return-1}function Rt(j){if(!i||!j||typeof j!="object")return!1;try{i.call(j);try{h.call(j)}catch{return!0}return j instanceof Map}catch{}return!1}function Ut(j){if(!m||!j||typeof j!="object")return!1;try{m.call(j,m);try{y.call(j,y)}catch{return!0}return j instanceof WeakMap}catch{}return!1}function Bt(j){if(!_||!j||typeof j!="object")return!1;try{return _.call(j),!0}catch{}return!1}function vt(j){if(!h||!j||typeof j!="object")return!1;try{h.call(j);try{i.call(j)}catch{return!0}return j instanceof Set}catch{}return!1}function pe(j){if(!y||!j||typeof j!="object")return!1;try{y.call(j,y);try{m.call(j,m)}catch{return!0}return j instanceof WeakSet}catch{}return!1}function Ur(j){return!j||typeof j!="object"?!1:typeof HTMLElement<"u"&&j instanceof HTMLElement?!0:typeof j.nodeName=="string"&&typeof j.getAttribute=="function"}function ua(j,K){if(j.length>K.maxStringLength){var Zt=j.length-K.maxStringLength,re="... "+Zt+" more character"+(Zt>1?"s":"");return ua(U.call(j,0,K.maxStringLength),K)+re}var te=P[K.quoteStyle||"single"];te.lastIndex=0;var Pt=O.call(O.call(j,te,"\\$1"),/[\x00-\x1f]/g,rs);return V(Pt,"single",K)}function rs(j){var K=j.charCodeAt(0),Zt={8:"b",9:"t",10:"n",12:"f",13:"r"}[K];return Zt?"\\"+Zt:"\\x"+(K<16?"0":"")+L.call(K.toString(16))}function bn(j){return"Object("+j+")"}function ns(j){return j+" { ? }"}function El(j,K,Zt,re){var te=re?Ge(Zt,re):q.call(Zt,", ");return j+" ("+K+") {"+te+"}"}function Gu(j){for(var K=0;K<j.length;K++)if(xt(j[K],`
`)>=0)return!1;return!0}function Tn(j,K){var Zt;if(j.indent==="	")Zt="	";else if(typeof j.indent=="number"&&j.indent>0)Zt=q.call(Array(j.indent+1)," ");else return null;return{base:Zt,prev:q.call(Array(K+1),Zt)}}function Ge(j,K){if(j.length===0)return"";var Zt=`
`+K.prev+K.base;return Zt+q.call(j,","+Zt)+`
`+K.prev}function li(j,K){var Zt=ot(j),re=[];if(Zt){re.length=j.length;for(var te=0;te<j.length;te++)re[te]=oe(j,te)?K(j[te],j):""}var Pt=typeof k=="function"?k(j):[],oi;if(J){oi={};for(var We=0;We<Pt.length;We++)oi["$"+Pt[We]]=Pt[We]}for(var Ie in j)oe(j,Ie)&&(Zt&&String(Number(Ie))===Ie&&Ie<j.length||J&&oi["$"+Ie]instanceof Symbol||(H.call(/[^\w$]/,Ie)?re.push(K(Ie,j)+": "+K(j[Ie],j)):re.push(Ie+": "+K(j[Ie],j))));if(typeof k=="function")for(var Qe=0;Qe<Pt.length;Qe++)T.call(j,Pt[Qe])&&re.push("["+K(Pt[Qe])+"]: "+K(j[Pt[Qe]],j));return re}return sf}var af,B0;function RT(){if(B0)return af;B0=1;var s=Mu(),t=aa(),i=function(c,p,m){for(var g=c,y;(y=g.next)!=null;g=y)if(y.key===p)return g.next=y.next,m||(y.next=c.next,c.next=y),y},n=function(c,p){if(c){var m=i(c,p);return m&&m.value}},l=function(c,p,m){var g=i(c,p);g?g.value=m:c.next={key:p,next:c.next,value:m}},o=function(c,p){return c?!!i(c,p):!1},h=function(c,p){if(c)return i(c,p,!0)};return af=function(){var p,m={assert:function(g){if(!m.has(g))throw new t("Side channel does not contain "+s(g))},delete:function(g){var y=p&&p.next,x=h(p,g);return x&&y&&y===x&&(p=void 0),!!x},get:function(g){return n(p,g)},has:function(g){return o(p,g)},set:function(g,y){p||(p={next:void 0}),l(p,g,y)}};return m},af}var lf,I0;function T_(){return I0||(I0=1,lf=Object),lf}var of,N0;function MT(){return N0||(N0=1,of=Error),of}var uf,U0;function DT(){return U0||(U0=1,uf=EvalError),uf}var hf,L0;function OT(){return L0||(L0=1,hf=RangeError),hf}var cf,P0;function BT(){return P0||(P0=1,cf=ReferenceError),cf}var ff,F0;function IT(){return F0||(F0=1,ff=SyntaxError),ff}var df,G0;function NT(){return G0||(G0=1,df=URIError),df}var pf,z0;function UT(){return z0||(z0=1,pf=Math.abs),pf}var mf,H0;function LT(){return H0||(H0=1,mf=Math.floor),mf}var gf,k0;function PT(){return k0||(k0=1,gf=Math.max),gf}var yf,X0;function FT(){return X0||(X0=1,yf=Math.min),yf}var vf,V0;function GT(){return V0||(V0=1,vf=Math.pow),vf}var _f,j0;function zT(){return j0||(j0=1,_f=Math.round),_f}var xf,q0;function HT(){return q0||(q0=1,xf=Number.isNaN||function(t){return t!==t}),xf}var bf,Y0;function kT(){if(Y0)return bf;Y0=1;var s=HT();return bf=function(i){return s(i)||i===0?i:i<0?-1:1},bf}var Tf,W0;function XT(){return W0||(W0=1,Tf=Object.getOwnPropertyDescriptor),Tf}var Ef,$0;function E_(){if($0)return Ef;$0=1;var s=XT();if(s)try{s([],"length")}catch{s=null}return Ef=s,Ef}var Af,Z0;function VT(){if(Z0)return Af;Z0=1;var s=Object.defineProperty||!1;if(s)try{s({},"a",{value:1})}catch{s=!1}return Af=s,Af}var Sf,K0;function jT(){return K0||(K0=1,Sf=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},i=Symbol("test"),n=Object(i);if(typeof i=="string"||Object.prototype.toString.call(i)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var l=42;t[i]=l;for(var o in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var h=Object.getOwnPropertySymbols(t);if(h.length!==1||h[0]!==i||!Object.prototype.propertyIsEnumerable.call(t,i))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var c=Object.getOwnPropertyDescriptor(t,i);if(c.value!==l||c.enumerable!==!0)return!1}return!0}),Sf}var wf,Q0;function qT(){if(Q0)return wf;Q0=1;var s=typeof Symbol<"u"&&Symbol,t=jT();return wf=function(){return typeof s!="function"||typeof Symbol!="function"||typeof s("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},wf}var Cf,J0;function A_(){return J0||(J0=1,Cf=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Cf}var Rf,tv;function S_(){if(tv)return Rf;tv=1;var s=T_();return Rf=s.getPrototypeOf||null,Rf}var Mf,ev;function YT(){if(ev)return Mf;ev=1;var s="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,i=Math.max,n="[object Function]",l=function(p,m){for(var g=[],y=0;y<p.length;y+=1)g[y]=p[y];for(var x=0;x<m.length;x+=1)g[x+p.length]=m[x];return g},o=function(p,m){for(var g=[],y=m,x=0;y<p.length;y+=1,x+=1)g[x]=p[y];return g},h=function(c,p){for(var m="",g=0;g<c.length;g+=1)m+=c[g],g+1<c.length&&(m+=p);return m};return Mf=function(p){var m=this;if(typeof m!="function"||t.apply(m)!==n)throw new TypeError(s+m);for(var g=o(arguments,1),y,x=function(){if(this instanceof y){var C=m.apply(this,l(g,arguments));return Object(C)===C?C:this}return m.apply(p,l(g,arguments))},_=i(0,m.length-g.length),b=[],w=0;w<_;w++)b[w]="$"+w;if(y=Function("binder","return function ("+h(b,",")+"){ return binder.apply(this,arguments); }")(x),m.prototype){var A=function(){};A.prototype=m.prototype,y.prototype=new A,A.prototype=null}return y},Mf}var Df,iv;function Du(){if(iv)return Df;iv=1;var s=YT();return Df=Function.prototype.bind||s,Df}var Of,rv;function ap(){return rv||(rv=1,Of=Function.prototype.call),Of}var Bf,nv;function w_(){return nv||(nv=1,Bf=Function.prototype.apply),Bf}var If,sv;function WT(){return sv||(sv=1,If=typeof Reflect<"u"&&Reflect&&Reflect.apply),If}var Nf,av;function $T(){if(av)return Nf;av=1;var s=Du(),t=w_(),i=ap(),n=WT();return Nf=n||s.call(i,t),Nf}var Uf,lv;function C_(){if(lv)return Uf;lv=1;var s=Du(),t=aa(),i=ap(),n=$T();return Uf=function(o){if(o.length<1||typeof o[0]!="function")throw new t("a function is required");return n(s,i,o)},Uf}var Lf,ov;function ZT(){if(ov)return Lf;ov=1;var s=C_(),t=E_(),i;try{i=[].__proto__===Array.prototype}catch(h){if(!h||typeof h!="object"||!("code"in h)||h.code!=="ERR_PROTO_ACCESS")throw h}var n=!!i&&t&&t(Object.prototype,"__proto__"),l=Object,o=l.getPrototypeOf;return Lf=n&&typeof n.get=="function"?s([n.get]):typeof o=="function"?function(c){return o(c==null?c:l(c))}:!1,Lf}var Pf,uv;function KT(){if(uv)return Pf;uv=1;var s=A_(),t=S_(),i=ZT();return Pf=s?function(l){return s(l)}:t?function(l){if(!l||typeof l!="object"&&typeof l!="function")throw new TypeError("getProto: not an object");return t(l)}:i?function(l){return i(l)}:null,Pf}var Ff,hv;function QT(){if(hv)return Ff;hv=1;var s=Function.prototype.call,t=Object.prototype.hasOwnProperty,i=Du();return Ff=i.call(s,t),Ff}var Gf,cv;function lp(){if(cv)return Gf;cv=1;var s,t=T_(),i=MT(),n=DT(),l=OT(),o=BT(),h=IT(),c=aa(),p=NT(),m=UT(),g=LT(),y=PT(),x=FT(),_=GT(),b=zT(),w=kT(),A=Function,C=function(ct){try{return A('"use strict"; return ('+ct+").constructor;")()}catch{}},U=E_(),O=VT(),L=function(){throw new c},B=U?(function(){try{return arguments.callee,L}catch{try{return U(arguments,"callee").get}catch{return L}}})():L,H=qT()(),D=KT(),q=S_(),rt=A_(),at=w_(),it=ap(),k={},Z=typeof Uint8Array>"u"||!D?s:D(Uint8Array),J={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?s:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?s:ArrayBuffer,"%ArrayIteratorPrototype%":H&&D?D([][Symbol.iterator]()):s,"%AsyncFromSyncIteratorPrototype%":s,"%AsyncFunction%":k,"%AsyncGenerator%":k,"%AsyncGeneratorFunction%":k,"%AsyncIteratorPrototype%":k,"%Atomics%":typeof Atomics>"u"?s:Atomics,"%BigInt%":typeof BigInt>"u"?s:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?s:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?s:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?s:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":i,"%eval%":eval,"%EvalError%":n,"%Float16Array%":typeof Float16Array>"u"?s:Float16Array,"%Float32Array%":typeof Float32Array>"u"?s:Float32Array,"%Float64Array%":typeof Float64Array>"u"?s:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?s:FinalizationRegistry,"%Function%":A,"%GeneratorFunction%":k,"%Int8Array%":typeof Int8Array>"u"?s:Int8Array,"%Int16Array%":typeof Int16Array>"u"?s:Int16Array,"%Int32Array%":typeof Int32Array>"u"?s:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":H&&D?D(D([][Symbol.iterator]())):s,"%JSON%":typeof JSON=="object"?JSON:s,"%Map%":typeof Map>"u"?s:Map,"%MapIteratorPrototype%":typeof Map>"u"||!H||!D?s:D(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":t,"%Object.getOwnPropertyDescriptor%":U,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?s:Promise,"%Proxy%":typeof Proxy>"u"?s:Proxy,"%RangeError%":l,"%ReferenceError%":o,"%Reflect%":typeof Reflect>"u"?s:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?s:Set,"%SetIteratorPrototype%":typeof Set>"u"||!H||!D?s:D(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?s:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":H&&D?D(""[Symbol.iterator]()):s,"%Symbol%":H?Symbol:s,"%SyntaxError%":h,"%ThrowTypeError%":B,"%TypedArray%":Z,"%TypeError%":c,"%Uint8Array%":typeof Uint8Array>"u"?s:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?s:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?s:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?s:Uint32Array,"%URIError%":p,"%WeakMap%":typeof WeakMap>"u"?s:WeakMap,"%WeakRef%":typeof WeakRef>"u"?s:WeakRef,"%WeakSet%":typeof WeakSet>"u"?s:WeakSet,"%Function.prototype.call%":it,"%Function.prototype.apply%":at,"%Object.defineProperty%":O,"%Object.getPrototypeOf%":q,"%Math.abs%":m,"%Math.floor%":g,"%Math.max%":y,"%Math.min%":x,"%Math.pow%":_,"%Math.round%":b,"%Math.sign%":w,"%Reflect.getPrototypeOf%":rt};if(D)try{null.error}catch(ct){var dt=D(D(ct));J["%Error.prototype%"]=dt}var T=function ct(ut){var yt;if(ut==="%AsyncFunction%")yt=C("async function () {}");else if(ut==="%GeneratorFunction%")yt=C("function* () {}");else if(ut==="%AsyncGeneratorFunction%")yt=C("async function* () {}");else if(ut==="%AsyncGenerator%"){var Tt=ct("%AsyncGeneratorFunction%");Tt&&(yt=Tt.prototype)}else if(ut==="%AsyncIteratorPrototype%"){var Mt=ct("%AsyncGenerator%");Mt&&D&&(yt=D(Mt.prototype))}return J[ut]=yt,yt},R={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},M=Du(),z=QT(),N=M.call(it,Array.prototype.concat),E=M.call(at,Array.prototype.splice),I=M.call(it,String.prototype.replace),P=M.call(it,String.prototype.slice),V=M.call(it,RegExp.prototype.exec),tt=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,lt=/\\(\\)?/g,ot=function(ut){var yt=P(ut,0,1),Tt=P(ut,-1);if(yt==="%"&&Tt!=="%")throw new h("invalid intrinsic syntax, expected closing `%`");if(Tt==="%"&&yt!=="%")throw new h("invalid intrinsic syntax, expected opening `%`");var Mt=[];return I(ut,tt,function(Lt,Et,_t,oe){Mt[Mt.length]=_t?I(oe,lt,"$1"):Et||Lt}),Mt},ft=function(ut,yt){var Tt=ut,Mt;if(z(R,Tt)&&(Mt=R[Tt],Tt="%"+Mt[0]+"%"),z(J,Tt)){var Lt=J[Tt];if(Lt===k&&(Lt=T(Tt)),typeof Lt>"u"&&!yt)throw new c("intrinsic "+ut+" exists, but is not available. Please file an issue!");return{alias:Mt,name:Tt,value:Lt}}throw new h("intrinsic "+ut+" does not exist!")};return Gf=function(ut,yt){if(typeof ut!="string"||ut.length===0)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof yt!="boolean")throw new c('"allowMissing" argument must be a boolean');if(V(/^%?[^%]*%?$/,ut)===null)throw new h("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Tt=ot(ut),Mt=Tt.length>0?Tt[0]:"",Lt=ft("%"+Mt+"%",yt),Et=Lt.name,_t=Lt.value,oe=!1,ue=Lt.alias;ue&&(Mt=ue[0],E(Tt,N([0,1],ue)));for(var ai=1,xt=!0;ai<Tt.length;ai+=1){var Rt=Tt[ai],Ut=P(Rt,0,1),Bt=P(Rt,-1);if((Ut==='"'||Ut==="'"||Ut==="`"||Bt==='"'||Bt==="'"||Bt==="`")&&Ut!==Bt)throw new h("property names with quotes must have matching quotes");if((Rt==="constructor"||!xt)&&(oe=!0),Mt+="."+Rt,Et="%"+Mt+"%",z(J,Et))_t=J[Et];else if(_t!=null){if(!(Rt in _t)){if(!yt)throw new c("base intrinsic for "+ut+" exists, but the property is not available.");return}if(U&&ai+1>=Tt.length){var vt=U(_t,Rt);xt=!!vt,xt&&"get"in vt&&!("originalValue"in vt.get)?_t=vt.get:_t=_t[Rt]}else xt=z(_t,Rt),_t=_t[Rt];xt&&!oe&&(J[Et]=_t)}}return _t},Gf}var zf,fv;function R_(){if(fv)return zf;fv=1;var s=lp(),t=C_(),i=t([s("%String.prototype.indexOf%")]);return zf=function(l,o){var h=s(l,!!o);return typeof h=="function"&&i(l,".prototype.")>-1?t([h]):h},zf}var Hf,dv;function M_(){if(dv)return Hf;dv=1;var s=lp(),t=R_(),i=Mu(),n=aa(),l=s("%Map%",!0),o=t("Map.prototype.get",!0),h=t("Map.prototype.set",!0),c=t("Map.prototype.has",!0),p=t("Map.prototype.delete",!0),m=t("Map.prototype.size",!0);return Hf=!!l&&function(){var y,x={assert:function(_){if(!x.has(_))throw new n("Side channel does not contain "+i(_))},delete:function(_){if(y){var b=p(y,_);return m(y)===0&&(y=void 0),b}return!1},get:function(_){if(y)return o(y,_)},has:function(_){return y?c(y,_):!1},set:function(_,b){y||(y=new l),h(y,_,b)}};return x},Hf}var kf,pv;function JT(){if(pv)return kf;pv=1;var s=lp(),t=R_(),i=Mu(),n=M_(),l=aa(),o=s("%WeakMap%",!0),h=t("WeakMap.prototype.get",!0),c=t("WeakMap.prototype.set",!0),p=t("WeakMap.prototype.has",!0),m=t("WeakMap.prototype.delete",!0);return kf=o?function(){var y,x,_={assert:function(b){if(!_.has(b))throw new l("Side channel does not contain "+i(b))},delete:function(b){if(o&&b&&(typeof b=="object"||typeof b=="function")){if(y)return m(y,b)}else if(n&&x)return x.delete(b);return!1},get:function(b){return o&&b&&(typeof b=="object"||typeof b=="function")&&y?h(y,b):x&&x.get(b)},has:function(b){return o&&b&&(typeof b=="object"||typeof b=="function")&&y?p(y,b):!!x&&x.has(b)},set:function(b,w){o&&b&&(typeof b=="object"||typeof b=="function")?(y||(y=new o),c(y,b,w)):n&&(x||(x=n()),x.set(b,w))}};return _}:n,kf}var Xf,mv;function tE(){if(mv)return Xf;mv=1;var s=aa(),t=Mu(),i=RT(),n=M_(),l=JT(),o=l||n||i;return Xf=function(){var c,p={assert:function(m){if(!p.has(m))throw new s("Side channel does not contain "+t(m))},delete:function(m){return!!c&&c.delete(m)},get:function(m){return c&&c.get(m)},has:function(m){return!!c&&c.has(m)},set:function(m,g){c||(c=o()),c.set(m,g)}};return p},Xf}var Vf,gv;function op(){if(gv)return Vf;gv=1;var s=String.prototype.replace,t=/%20/g,i={RFC1738:"RFC1738",RFC3986:"RFC3986"};return Vf={default:i.RFC3986,formatters:{RFC1738:function(n){return s.call(n,t,"+")},RFC3986:function(n){return String(n)}},RFC1738:i.RFC1738,RFC3986:i.RFC3986},Vf}var jf,yv;function D_(){if(yv)return jf;yv=1;var s=op(),t=Object.prototype.hasOwnProperty,i=Array.isArray,n=(function(){for(var A=[],C=0;C<256;++C)A.push("%"+((C<16?"0":"")+C.toString(16)).toUpperCase());return A})(),l=function(C){for(;C.length>1;){var U=C.pop(),O=U.obj[U.prop];if(i(O)){for(var L=[],B=0;B<O.length;++B)typeof O[B]<"u"&&L.push(O[B]);U.obj[U.prop]=L}}},o=function(C,U){for(var O=U&&U.plainObjects?{__proto__:null}:{},L=0;L<C.length;++L)typeof C[L]<"u"&&(O[L]=C[L]);return O},h=function A(C,U,O){if(!U)return C;if(typeof U!="object"&&typeof U!="function"){if(i(C))C.push(U);else if(C&&typeof C=="object")(O&&(O.plainObjects||O.allowPrototypes)||!t.call(Object.prototype,U))&&(C[U]=!0);else return[C,U];return C}if(!C||typeof C!="object")return[C].concat(U);var L=C;return i(C)&&!i(U)&&(L=o(C,O)),i(C)&&i(U)?(U.forEach(function(B,H){if(t.call(C,H)){var D=C[H];D&&typeof D=="object"&&B&&typeof B=="object"?C[H]=A(D,B,O):C.push(B)}else C[H]=B}),C):Object.keys(U).reduce(function(B,H){var D=U[H];return t.call(B,H)?B[H]=A(B[H],D,O):B[H]=D,B},L)},c=function(C,U){return Object.keys(U).reduce(function(O,L){return O[L]=U[L],O},C)},p=function(A,C,U){var O=A.replace(/\+/g," ");if(U==="iso-8859-1")return O.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(O)}catch{return O}},m=1024,g=function(C,U,O,L,B){if(C.length===0)return C;var H=C;if(typeof C=="symbol"?H=Symbol.prototype.toString.call(C):typeof C!="string"&&(H=String(C)),O==="iso-8859-1")return escape(H).replace(/%u[0-9a-f]{4}/gi,function(Z){return"%26%23"+parseInt(Z.slice(2),16)+"%3B"});for(var D="",q=0;q<H.length;q+=m){for(var rt=H.length>=m?H.slice(q,q+m):H,at=[],it=0;it<rt.length;++it){var k=rt.charCodeAt(it);if(k===45||k===46||k===95||k===126||k>=48&&k<=57||k>=65&&k<=90||k>=97&&k<=122||B===s.RFC1738&&(k===40||k===41)){at[at.length]=rt.charAt(it);continue}if(k<128){at[at.length]=n[k];continue}if(k<2048){at[at.length]=n[192|k>>6]+n[128|k&63];continue}if(k<55296||k>=57344){at[at.length]=n[224|k>>12]+n[128|k>>6&63]+n[128|k&63];continue}it+=1,k=65536+((k&1023)<<10|rt.charCodeAt(it)&1023),at[at.length]=n[240|k>>18]+n[128|k>>12&63]+n[128|k>>6&63]+n[128|k&63]}D+=at.join("")}return D},y=function(C){for(var U=[{obj:{o:C},prop:"o"}],O=[],L=0;L<U.length;++L)for(var B=U[L],H=B.obj[B.prop],D=Object.keys(H),q=0;q<D.length;++q){var rt=D[q],at=H[rt];typeof at=="object"&&at!==null&&O.indexOf(at)===-1&&(U.push({obj:H,prop:rt}),O.push(at))}return l(U),C},x=function(C){return Object.prototype.toString.call(C)==="[object RegExp]"},_=function(C){return!C||typeof C!="object"?!1:!!(C.constructor&&C.constructor.isBuffer&&C.constructor.isBuffer(C))},b=function(C,U){return[].concat(C,U)},w=function(C,U){if(i(C)){for(var O=[],L=0;L<C.length;L+=1)O.push(U(C[L]));return O}return U(C)};return jf={arrayToObject:o,assign:c,combine:b,compact:y,decode:p,encode:g,isBuffer:_,isRegExp:x,maybeMap:w,merge:h},jf}var qf,vv;function eE(){if(vv)return qf;vv=1;var s=tE(),t=D_(),i=op(),n=Object.prototype.hasOwnProperty,l={brackets:function(A){return A+"[]"},comma:"comma",indices:function(A,C){return A+"["+C+"]"},repeat:function(A){return A}},o=Array.isArray,h=Array.prototype.push,c=function(w,A){h.apply(w,o(A)?A:[A])},p=Date.prototype.toISOString,m=i.default,g={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:t.encode,encodeValuesOnly:!1,filter:void 0,format:m,formatter:i.formatters[m],indices:!1,serializeDate:function(A){return p.call(A)},skipNulls:!1,strictNullHandling:!1},y=function(A){return typeof A=="string"||typeof A=="number"||typeof A=="boolean"||typeof A=="symbol"||typeof A=="bigint"},x={},_=function w(A,C,U,O,L,B,H,D,q,rt,at,it,k,Z,J,dt,T,R){for(var M=A,z=R,N=0,E=!1;(z=z.get(x))!==void 0&&!E;){var I=z.get(A);if(N+=1,typeof I<"u"){if(I===N)throw new RangeError("Cyclic object value");E=!0}typeof z.get(x)>"u"&&(N=0)}if(typeof rt=="function"?M=rt(C,M):M instanceof Date?M=k(M):U==="comma"&&o(M)&&(M=t.maybeMap(M,function(Et){return Et instanceof Date?k(Et):Et})),M===null){if(B)return q&&!dt?q(C,g.encoder,T,"key",Z):C;M=""}if(y(M)||t.isBuffer(M)){if(q){var P=dt?C:q(C,g.encoder,T,"key",Z);return[J(P)+"="+J(q(M,g.encoder,T,"value",Z))]}return[J(C)+"="+J(String(M))]}var V=[];if(typeof M>"u")return V;var tt;if(U==="comma"&&o(M))dt&&q&&(M=t.maybeMap(M,q)),tt=[{value:M.length>0?M.join(",")||null:void 0}];else if(o(rt))tt=rt;else{var lt=Object.keys(M);tt=at?lt.sort(at):lt}var ot=D?String(C).replace(/\./g,"%2E"):String(C),ft=O&&o(M)&&M.length===1?ot+"[]":ot;if(L&&o(M)&&M.length===0)return ft+"[]";for(var ct=0;ct<tt.length;++ct){var ut=tt[ct],yt=typeof ut=="object"&&ut&&typeof ut.value<"u"?ut.value:M[ut];if(!(H&&yt===null)){var Tt=it&&D?String(ut).replace(/\./g,"%2E"):String(ut),Mt=o(M)?typeof U=="function"?U(ft,Tt):ft:ft+(it?"."+Tt:"["+Tt+"]");R.set(A,N);var Lt=s();Lt.set(x,R),c(V,w(yt,Mt,U,O,L,B,H,D,U==="comma"&&dt&&o(M)?null:q,rt,at,it,k,Z,J,dt,T,Lt))}}return V},b=function(A){if(!A)return g;if(typeof A.allowEmptyArrays<"u"&&typeof A.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof A.encodeDotInKeys<"u"&&typeof A.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(A.encoder!==null&&typeof A.encoder<"u"&&typeof A.encoder!="function")throw new TypeError("Encoder has to be a function.");var C=A.charset||g.charset;if(typeof A.charset<"u"&&A.charset!=="utf-8"&&A.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var U=i.default;if(typeof A.format<"u"){if(!n.call(i.formatters,A.format))throw new TypeError("Unknown format option provided.");U=A.format}var O=i.formatters[U],L=g.filter;(typeof A.filter=="function"||o(A.filter))&&(L=A.filter);var B;if(A.arrayFormat in l?B=A.arrayFormat:"indices"in A?B=A.indices?"indices":"repeat":B=g.arrayFormat,"commaRoundTrip"in A&&typeof A.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var H=typeof A.allowDots>"u"?A.encodeDotInKeys===!0?!0:g.allowDots:!!A.allowDots;return{addQueryPrefix:typeof A.addQueryPrefix=="boolean"?A.addQueryPrefix:g.addQueryPrefix,allowDots:H,allowEmptyArrays:typeof A.allowEmptyArrays=="boolean"?!!A.allowEmptyArrays:g.allowEmptyArrays,arrayFormat:B,charset:C,charsetSentinel:typeof A.charsetSentinel=="boolean"?A.charsetSentinel:g.charsetSentinel,commaRoundTrip:!!A.commaRoundTrip,delimiter:typeof A.delimiter>"u"?g.delimiter:A.delimiter,encode:typeof A.encode=="boolean"?A.encode:g.encode,encodeDotInKeys:typeof A.encodeDotInKeys=="boolean"?A.encodeDotInKeys:g.encodeDotInKeys,encoder:typeof A.encoder=="function"?A.encoder:g.encoder,encodeValuesOnly:typeof A.encodeValuesOnly=="boolean"?A.encodeValuesOnly:g.encodeValuesOnly,filter:L,format:U,formatter:O,serializeDate:typeof A.serializeDate=="function"?A.serializeDate:g.serializeDate,skipNulls:typeof A.skipNulls=="boolean"?A.skipNulls:g.skipNulls,sort:typeof A.sort=="function"?A.sort:null,strictNullHandling:typeof A.strictNullHandling=="boolean"?A.strictNullHandling:g.strictNullHandling}};return qf=function(w,A){var C=w,U=b(A),O,L;typeof U.filter=="function"?(L=U.filter,C=L("",C)):o(U.filter)&&(L=U.filter,O=L);var B=[];if(typeof C!="object"||C===null)return"";var H=l[U.arrayFormat],D=H==="comma"&&U.commaRoundTrip;O||(O=Object.keys(C)),U.sort&&O.sort(U.sort);for(var q=s(),rt=0;rt<O.length;++rt){var at=O[rt],it=C[at];U.skipNulls&&it===null||c(B,_(it,at,H,D,U.allowEmptyArrays,U.strictNullHandling,U.skipNulls,U.encodeDotInKeys,U.encode?U.encoder:null,U.filter,U.sort,U.allowDots,U.serializeDate,U.format,U.formatter,U.encodeValuesOnly,U.charset,q))}var k=B.join(U.delimiter),Z=U.addQueryPrefix===!0?"?":"";return U.charsetSentinel&&(U.charset==="iso-8859-1"?Z+="utf8=%26%2310003%3B&":Z+="utf8=%E2%9C%93&"),k.length>0?Z+k:""},qf}var Yf,_v;function iE(){if(_v)return Yf;_v=1;var s=D_(),t=Object.prototype.hasOwnProperty,i=Array.isArray,n={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:s.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},l=function(x){return x.replace(/&#(\d+);/g,function(_,b){return String.fromCharCode(parseInt(b,10))})},o=function(x,_,b){if(x&&typeof x=="string"&&_.comma&&x.indexOf(",")>-1)return x.split(",");if(_.throwOnLimitExceeded&&b>=_.arrayLimit)throw new RangeError("Array limit exceeded. Only "+_.arrayLimit+" element"+(_.arrayLimit===1?"":"s")+" allowed in an array.");return x},h="utf8=%26%2310003%3B",c="utf8=%E2%9C%93",p=function(_,b){var w={__proto__:null},A=b.ignoreQueryPrefix?_.replace(/^\?/,""):_;A=A.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var C=b.parameterLimit===1/0?void 0:b.parameterLimit,U=A.split(b.delimiter,b.throwOnLimitExceeded?C+1:C);if(b.throwOnLimitExceeded&&U.length>C)throw new RangeError("Parameter limit exceeded. Only "+C+" parameter"+(C===1?"":"s")+" allowed.");var O=-1,L,B=b.charset;if(b.charsetSentinel)for(L=0;L<U.length;++L)U[L].indexOf("utf8=")===0&&(U[L]===c?B="utf-8":U[L]===h&&(B="iso-8859-1"),O=L,L=U.length);for(L=0;L<U.length;++L)if(L!==O){var H=U[L],D=H.indexOf("]="),q=D===-1?H.indexOf("="):D+1,rt,at;q===-1?(rt=b.decoder(H,n.decoder,B,"key"),at=b.strictNullHandling?null:""):(rt=b.decoder(H.slice(0,q),n.decoder,B,"key"),at=s.maybeMap(o(H.slice(q+1),b,i(w[rt])?w[rt].length:0),function(k){return b.decoder(k,n.decoder,B,"value")})),at&&b.interpretNumericEntities&&B==="iso-8859-1"&&(at=l(String(at))),H.indexOf("[]=")>-1&&(at=i(at)?[at]:at);var it=t.call(w,rt);it&&b.duplicates==="combine"?w[rt]=s.combine(w[rt],at):(!it||b.duplicates==="last")&&(w[rt]=at)}return w},m=function(x,_,b,w){var A=0;if(x.length>0&&x[x.length-1]==="[]"){var C=x.slice(0,-1).join("");A=Array.isArray(_)&&_[C]?_[C].length:0}for(var U=w?_:o(_,b,A),O=x.length-1;O>=0;--O){var L,B=x[O];if(B==="[]"&&b.parseArrays)L=b.allowEmptyArrays&&(U===""||b.strictNullHandling&&U===null)?[]:s.combine([],U);else{L=b.plainObjects?{__proto__:null}:{};var H=B.charAt(0)==="["&&B.charAt(B.length-1)==="]"?B.slice(1,-1):B,D=b.decodeDotInKeys?H.replace(/%2E/g,"."):H,q=parseInt(D,10);!b.parseArrays&&D===""?L={0:U}:!isNaN(q)&&B!==D&&String(q)===D&&q>=0&&b.parseArrays&&q<=b.arrayLimit?(L=[],L[q]=U):D!=="__proto__"&&(L[D]=U)}U=L}return U},g=function(_,b,w,A){if(_){var C=w.allowDots?_.replace(/\.([^.[]+)/g,"[$1]"):_,U=/(\[[^[\]]*])/,O=/(\[[^[\]]*])/g,L=w.depth>0&&U.exec(C),B=L?C.slice(0,L.index):C,H=[];if(B){if(!w.plainObjects&&t.call(Object.prototype,B)&&!w.allowPrototypes)return;H.push(B)}for(var D=0;w.depth>0&&(L=O.exec(C))!==null&&D<w.depth;){if(D+=1,!w.plainObjects&&t.call(Object.prototype,L[1].slice(1,-1))&&!w.allowPrototypes)return;H.push(L[1])}if(L){if(w.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+w.depth+" and strictDepth is true");H.push("["+C.slice(L.index)+"]")}return m(H,b,w,A)}},y=function(_){if(!_)return n;if(typeof _.allowEmptyArrays<"u"&&typeof _.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof _.decodeDotInKeys<"u"&&typeof _.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(_.decoder!==null&&typeof _.decoder<"u"&&typeof _.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof _.charset<"u"&&_.charset!=="utf-8"&&_.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof _.throwOnLimitExceeded<"u"&&typeof _.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var b=typeof _.charset>"u"?n.charset:_.charset,w=typeof _.duplicates>"u"?n.duplicates:_.duplicates;if(w!=="combine"&&w!=="first"&&w!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var A=typeof _.allowDots>"u"?_.decodeDotInKeys===!0?!0:n.allowDots:!!_.allowDots;return{allowDots:A,allowEmptyArrays:typeof _.allowEmptyArrays=="boolean"?!!_.allowEmptyArrays:n.allowEmptyArrays,allowPrototypes:typeof _.allowPrototypes=="boolean"?_.allowPrototypes:n.allowPrototypes,allowSparse:typeof _.allowSparse=="boolean"?_.allowSparse:n.allowSparse,arrayLimit:typeof _.arrayLimit=="number"?_.arrayLimit:n.arrayLimit,charset:b,charsetSentinel:typeof _.charsetSentinel=="boolean"?_.charsetSentinel:n.charsetSentinel,comma:typeof _.comma=="boolean"?_.comma:n.comma,decodeDotInKeys:typeof _.decodeDotInKeys=="boolean"?_.decodeDotInKeys:n.decodeDotInKeys,decoder:typeof _.decoder=="function"?_.decoder:n.decoder,delimiter:typeof _.delimiter=="string"||s.isRegExp(_.delimiter)?_.delimiter:n.delimiter,depth:typeof _.depth=="number"||_.depth===!1?+_.depth:n.depth,duplicates:w,ignoreQueryPrefix:_.ignoreQueryPrefix===!0,interpretNumericEntities:typeof _.interpretNumericEntities=="boolean"?_.interpretNumericEntities:n.interpretNumericEntities,parameterLimit:typeof _.parameterLimit=="number"?_.parameterLimit:n.parameterLimit,parseArrays:_.parseArrays!==!1,plainObjects:typeof _.plainObjects=="boolean"?_.plainObjects:n.plainObjects,strictDepth:typeof _.strictDepth=="boolean"?!!_.strictDepth:n.strictDepth,strictNullHandling:typeof _.strictNullHandling=="boolean"?_.strictNullHandling:n.strictNullHandling,throwOnLimitExceeded:typeof _.throwOnLimitExceeded=="boolean"?_.throwOnLimitExceeded:!1}};return Yf=function(x,_){var b=y(_);if(x===""||x===null||typeof x>"u")return b.plainObjects?{__proto__:null}:{};for(var w=typeof x=="string"?p(x,b):x,A=b.plainObjects?{__proto__:null}:{},C=Object.keys(w),U=0;U<C.length;++U){var O=C[U],L=g(O,w[O],b,typeof x=="string");A=s.merge(A,L,b)}return b.allowSparse===!0?A:s.compact(A)},Yf}var Wf,xv;function rE(){if(xv)return Wf;xv=1;var s=eE(),t=iE(),i=op();return Wf={formats:i,parse:t,stringify:s},Wf}var bv;function nE(){if(bv)return Hn;bv=1;var s=AT();function t(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var i=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,o=["<",">",'"',"`"," ","\r",`
`,"	"],h=["{","}","|","\\","^","`"].concat(o),c=["'"].concat(h),p=["%","/","?",";","#"].concat(c),m=["/","?","#"],g=255,y=/^[+a-z0-9A-Z_-]{0,63}$/,x=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},b={javascript:!0,"javascript:":!0},w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},A=rE();function C(B,H,D){if(B&&typeof B=="object"&&B instanceof t)return B;var q=new t;return q.parse(B,H,D),q}t.prototype.parse=function(B,H,D){if(typeof B!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof B);var q=B.indexOf("?"),rt=q!==-1&&q<B.indexOf("#")?"?":"#",at=B.split(rt),it=/\\/g;at[0]=at[0].replace(it,"/"),B=at.join(rt);var k=B;if(k=k.trim(),!D&&B.split("#").length===1){var Z=l.exec(k);if(Z)return this.path=k,this.href=k,this.pathname=Z[1],Z[2]?(this.search=Z[2],H?this.query=A.parse(this.search.substr(1)):this.query=this.search.substr(1)):H&&(this.search="",this.query={}),this}var J=i.exec(k);if(J){J=J[0];var dt=J.toLowerCase();this.protocol=dt,k=k.substr(J.length)}if(D||J||k.match(/^\/\/[^@/]+@[^@/]+/)){var T=k.substr(0,2)==="//";T&&!(J&&b[J])&&(k=k.substr(2),this.slashes=!0)}if(!b[J]&&(T||J&&!w[J])){for(var R=-1,M=0;M<m.length;M++){var z=k.indexOf(m[M]);z!==-1&&(R===-1||z<R)&&(R=z)}var N,E;R===-1?E=k.lastIndexOf("@"):E=k.lastIndexOf("@",R),E!==-1&&(N=k.slice(0,E),k=k.slice(E+1),this.auth=decodeURIComponent(N)),R=-1;for(var M=0;M<p.length;M++){var z=k.indexOf(p[M]);z!==-1&&(R===-1||z<R)&&(R=z)}R===-1&&(R=k.length),this.host=k.slice(0,R),k=k.slice(R),this.parseHost(),this.hostname=this.hostname||"";var I=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!I)for(var P=this.hostname.split(/\./),M=0,V=P.length;M<V;M++){var tt=P[M];if(tt&&!tt.match(y)){for(var lt="",ot=0,ft=tt.length;ot<ft;ot++)tt.charCodeAt(ot)>127?lt+="x":lt+=tt[ot];if(!lt.match(y)){var ct=P.slice(0,M),ut=P.slice(M+1),yt=tt.match(x);yt&&(ct.push(yt[1]),ut.unshift(yt[2])),ut.length&&(k="/"+ut.join(".")+k),this.hostname=ct.join(".");break}}}this.hostname.length>g?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=s.toASCII(this.hostname));var Tt=this.port?":"+this.port:"",Mt=this.hostname||"";this.host=Mt+Tt,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),k[0]!=="/"&&(k="/"+k))}if(!_[dt])for(var M=0,V=c.length;M<V;M++){var Lt=c[M];if(k.indexOf(Lt)!==-1){var Et=encodeURIComponent(Lt);Et===Lt&&(Et=escape(Lt)),k=k.split(Lt).join(Et)}}var _t=k.indexOf("#");_t!==-1&&(this.hash=k.substr(_t),k=k.slice(0,_t));var oe=k.indexOf("?");if(oe!==-1?(this.search=k.substr(oe),this.query=k.substr(oe+1),H&&(this.query=A.parse(this.query)),k=k.slice(0,oe)):H&&(this.search="",this.query={}),k&&(this.pathname=k),w[dt]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Tt=this.pathname||"",ue=this.search||"";this.path=Tt+ue}return this.href=this.format(),this};function U(B){return typeof B=="string"&&(B=C(B)),B instanceof t?B.format():t.prototype.format.call(B)}t.prototype.format=function(){var B=this.auth||"";B&&(B=encodeURIComponent(B),B=B.replace(/%3A/i,":"),B+="@");var H=this.protocol||"",D=this.pathname||"",q=this.hash||"",rt=!1,at="";this.host?rt=B+this.host:this.hostname&&(rt=B+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(rt+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(at=A.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var it=this.search||at&&"?"+at||"";return H&&H.substr(-1)!==":"&&(H+=":"),this.slashes||(!H||w[H])&&rt!==!1?(rt="//"+(rt||""),D&&D.charAt(0)!=="/"&&(D="/"+D)):rt||(rt=""),q&&q.charAt(0)!=="#"&&(q="#"+q),it&&it.charAt(0)!=="?"&&(it="?"+it),D=D.replace(/[?#]/g,function(k){return encodeURIComponent(k)}),it=it.replace("#","%23"),H+rt+D+it+q};function O(B,H){return C(B,!1,!0).resolve(H)}t.prototype.resolve=function(B){return this.resolveObject(C(B,!1,!0)).format()};function L(B,H){return B?C(B,!1,!0).resolveObject(H):H}return t.prototype.resolveObject=function(B){if(typeof B=="string"){var H=new t;H.parse(B,!1,!0),B=H}for(var D=new t,q=Object.keys(this),rt=0;rt<q.length;rt++){var at=q[rt];D[at]=this[at]}if(D.hash=B.hash,B.href==="")return D.href=D.format(),D;if(B.slashes&&!B.protocol){for(var it=Object.keys(B),k=0;k<it.length;k++){var Z=it[k];Z!=="protocol"&&(D[Z]=B[Z])}return w[D.protocol]&&D.hostname&&!D.pathname&&(D.pathname="/",D.path=D.pathname),D.href=D.format(),D}if(B.protocol&&B.protocol!==D.protocol){if(!w[B.protocol]){for(var J=Object.keys(B),dt=0;dt<J.length;dt++){var T=J[dt];D[T]=B[T]}return D.href=D.format(),D}if(D.protocol=B.protocol,!B.host&&!b[B.protocol]){for(var V=(B.pathname||"").split("/");V.length&&!(B.host=V.shift()););B.host||(B.host=""),B.hostname||(B.hostname=""),V[0]!==""&&V.unshift(""),V.length<2&&V.unshift(""),D.pathname=V.join("/")}else D.pathname=B.pathname;if(D.search=B.search,D.query=B.query,D.host=B.host||"",D.auth=B.auth,D.hostname=B.hostname||B.host,D.port=B.port,D.pathname||D.search){var R=D.pathname||"",M=D.search||"";D.path=R+M}return D.slashes=D.slashes||B.slashes,D.href=D.format(),D}var z=D.pathname&&D.pathname.charAt(0)==="/",N=B.host||B.pathname&&B.pathname.charAt(0)==="/",E=N||z||D.host&&B.pathname,I=E,P=D.pathname&&D.pathname.split("/")||[],V=B.pathname&&B.pathname.split("/")||[],tt=D.protocol&&!w[D.protocol];if(tt&&(D.hostname="",D.port=null,D.host&&(P[0]===""?P[0]=D.host:P.unshift(D.host)),D.host="",B.protocol&&(B.hostname=null,B.port=null,B.host&&(V[0]===""?V[0]=B.host:V.unshift(B.host)),B.host=null),E=E&&(V[0]===""||P[0]==="")),N)D.host=B.host||B.host===""?B.host:D.host,D.hostname=B.hostname||B.hostname===""?B.hostname:D.hostname,D.search=B.search,D.query=B.query,P=V;else if(V.length)P||(P=[]),P.pop(),P=P.concat(V),D.search=B.search,D.query=B.query;else if(B.search!=null){if(tt){D.host=P.shift(),D.hostname=D.host;var lt=D.host&&D.host.indexOf("@")>0?D.host.split("@"):!1;lt&&(D.auth=lt.shift(),D.hostname=lt.shift(),D.host=D.hostname)}return D.search=B.search,D.query=B.query,(D.pathname!==null||D.search!==null)&&(D.path=(D.pathname?D.pathname:"")+(D.search?D.search:"")),D.href=D.format(),D}if(!P.length)return D.pathname=null,D.search?D.path="/"+D.search:D.path=null,D.href=D.format(),D;for(var ot=P.slice(-1)[0],ft=(D.host||B.host||P.length>1)&&(ot==="."||ot==="..")||ot==="",ct=0,ut=P.length;ut>=0;ut--)ot=P[ut],ot==="."?P.splice(ut,1):ot===".."?(P.splice(ut,1),ct++):ct&&(P.splice(ut,1),ct--);if(!E&&!I)for(;ct--;ct)P.unshift("..");E&&P[0]!==""&&(!P[0]||P[0].charAt(0)!=="/")&&P.unshift(""),ft&&P.join("/").substr(-1)!=="/"&&P.push("");var yt=P[0]===""||P[0]&&P[0].charAt(0)==="/";if(tt){D.hostname=yt?"":P.length?P.shift():"",D.host=D.hostname;var lt=D.host&&D.host.indexOf("@")>0?D.host.split("@"):!1;lt&&(D.auth=lt.shift(),D.hostname=lt.shift(),D.host=D.hostname)}return E=E||D.host&&P.length,E&&!yt&&P.unshift(""),P.length>0?D.pathname=P.join("/"):(D.pathname=null,D.path=null),(D.pathname!==null||D.search!==null)&&(D.path=(D.pathname?D.pathname:"")+(D.search?D.search:"")),D.auth=B.auth||D.auth,D.slashes=D.slashes||B.slashes,D.href=D.format(),D},t.prototype.parseHost=function(){var B=this.host,H=n.exec(B);H&&(H=H[0],H!==":"&&(this.port=H.substr(1)),B=B.substr(0,B.length-H.length)),B&&(this.hostname=B)},Hn.parse=C,Hn.resolve=O,Hn.resolveObject=L,Hn.format=U,Hn.Url=t,Hn}nE();const Tv={};function jt(s,t,i=3){if(Tv[t])return;let n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${s}`):(n=n.split(`
`).splice(i).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${s}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${s}`),console.warn(n))),Tv[t]=!0}function Ui(s){if(typeof s!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(s)}`)}function sl(s){return s.split("?")[0].split("#")[0]}function sE(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function aE(s,t,i){return s.replace(new RegExp(sE(t),"g"),i)}function lE(s,t){let i="",n=0,l=-1,o=0,h=-1;for(let c=0;c<=s.length;++c){if(c<s.length)h=s.charCodeAt(c);else{if(h===47)break;h=47}if(h===47){if(!(l===c-1||o===1))if(l!==c-1&&o===2){if(i.length<2||n!==2||i.charCodeAt(i.length-1)!==46||i.charCodeAt(i.length-2)!==46){if(i.length>2){const p=i.lastIndexOf("/");if(p!==i.length-1){p===-1?(i="",n=0):(i=i.slice(0,p),n=i.length-1-i.lastIndexOf("/")),l=c,o=0;continue}}else if(i.length===2||i.length===1){i="",n=0,l=c,o=0;continue}}}else i.length>0?i+=`/${s.slice(l+1,c)}`:i=s.slice(l+1,c),n=c-l-1;l=c,o=0}else h===46&&o!==-1?++o:o=-1}return i}const Fe={toPosix(s){return aE(s,"\\","/")},isUrl(s){return/^https?:/.test(this.toPosix(s))},isDataUrl(s){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(s)},isBlobUrl(s){return s.startsWith("blob:")},hasProtocol(s){return/^[^/:]+:/.test(this.toPosix(s))},getProtocol(s){Ui(s),s=this.toPosix(s);const t=/^file:\/\/\//.exec(s);if(t)return t[0];const i=/^[^/:]+:\/{0,2}/.exec(s);return i?i[0]:""},toAbsolute(s,t,i){if(Ui(s),this.isDataUrl(s)||this.isBlobUrl(s))return s;const n=sl(this.toPosix(t??gt.ADAPTER.getBaseUrl())),l=sl(this.toPosix(i??this.rootname(n)));return s=this.toPosix(s),s.startsWith("/")?Fe.join(l,s.slice(1)):this.isAbsolute(s)?s:this.join(n,s)},normalize(s){if(Ui(s),s.length===0)return".";if(this.isDataUrl(s)||this.isBlobUrl(s))return s;s=this.toPosix(s);let t="";const i=s.startsWith("/");this.hasProtocol(s)&&(t=this.rootname(s),s=s.slice(t.length));const n=s.endsWith("/");return s=lE(s),s.length>0&&n&&(s+="/"),i?`/${s}`:t+s},isAbsolute(s){return Ui(s),s=this.toPosix(s),this.hasProtocol(s)?!0:s.startsWith("/")},join(...s){if(s.length===0)return".";let t;for(let i=0;i<s.length;++i){const n=s[i];if(Ui(n),n.length>0)if(t===void 0)t=n;else{const l=s[i-1]??"";this.joinExtensions.includes(this.extname(l).toLowerCase())?t+=`/../${n}`:t+=`/${n}`}}return t===void 0?".":this.normalize(t)},dirname(s){if(Ui(s),s.length===0)return".";s=this.toPosix(s);let t=s.charCodeAt(0);const i=t===47;let n=-1,l=!0;const o=this.getProtocol(s),h=s;s=s.slice(o.length);for(let c=s.length-1;c>=1;--c)if(t=s.charCodeAt(c),t===47){if(!l){n=c;break}}else l=!1;return n===-1?i?"/":this.isUrl(h)?o+s:o:i&&n===1?"//":o+s.slice(0,n)},rootname(s){Ui(s),s=this.toPosix(s);let t="";if(s.startsWith("/")?t="/":t=this.getProtocol(s),this.isUrl(s)){const i=s.indexOf("/",t.length);i!==-1?t=s.slice(0,i):t=s,t.endsWith("/")||(t+="/")}return t},basename(s,t){Ui(s),t&&Ui(t),s=sl(this.toPosix(s));let i=0,n=-1,l=!0,o;if(t!==void 0&&t.length>0&&t.length<=s.length){if(t.length===s.length&&t===s)return"";let h=t.length-1,c=-1;for(o=s.length-1;o>=0;--o){const p=s.charCodeAt(o);if(p===47){if(!l){i=o+1;break}}else c===-1&&(l=!1,c=o+1),h>=0&&(p===t.charCodeAt(h)?--h===-1&&(n=o):(h=-1,n=c))}return i===n?n=c:n===-1&&(n=s.length),s.slice(i,n)}for(o=s.length-1;o>=0;--o)if(s.charCodeAt(o)===47){if(!l){i=o+1;break}}else n===-1&&(l=!1,n=o+1);return n===-1?"":s.slice(i,n)},extname(s){Ui(s),s=sl(this.toPosix(s));let t=-1,i=0,n=-1,l=!0,o=0;for(let h=s.length-1;h>=0;--h){const c=s.charCodeAt(h);if(c===47){if(!l){i=h+1;break}continue}n===-1&&(l=!1,n=h+1),c===46?t===-1?t=h:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||n===-1||o===0||o===1&&t===n-1&&t===i+1?"":s.slice(t,n)},parse(s){Ui(s);const t={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return t;s=sl(this.toPosix(s));let i=s.charCodeAt(0);const n=this.isAbsolute(s);let l;t.root=this.rootname(s),n||this.hasProtocol(s)?l=1:l=0;let o=-1,h=0,c=-1,p=!0,m=s.length-1,g=0;for(;m>=l;--m){if(i=s.charCodeAt(m),i===47){if(!p){h=m+1;break}continue}c===-1&&(p=!1,c=m+1),i===46?o===-1?o=m:g!==1&&(g=1):o!==-1&&(g=-1)}return o===-1||c===-1||g===0||g===1&&o===c-1&&o===h+1?c!==-1&&(h===0&&n?t.base=t.name=s.slice(1,c):t.base=t.name=s.slice(h,c)):(h===0&&n?(t.name=s.slice(1,o),t.base=s.slice(1,c)):(t.name=s.slice(h,o),t.base=s.slice(h,c)),t.ext=s.slice(o,c)),t.dir=this.dirname(s),t},sep:"/",delimiter:":",joinExtensions:[".html"]};let $f;async function oE(){return $f??($f=(async()=>{const s=document.createElement("canvas").getContext("webgl");if(!s)return si.UNPACK;const t=await new Promise(o=>{const h=document.createElement("video");h.onloadeddata=()=>o(h),h.onerror=()=>o(null),h.autoplay=!1,h.crossOrigin="anonymous",h.preload="auto",h.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",h.load()});if(!t)return si.UNPACK;const i=s.createTexture();s.bindTexture(s.TEXTURE_2D,i);const n=s.createFramebuffer();s.bindFramebuffer(s.FRAMEBUFFER,n),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,i,0),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,s.NONE),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,t);const l=new Uint8Array(4);return s.readPixels(0,0,1,1,s.RGBA,s.UNSIGNED_BYTE,l),s.deleteFramebuffer(n),s.deleteTexture(i),s.getExtension("WEBGL_lose_context")?.loseContext(),l[0]<=l[3]?si.PMA:si.UNPACK})()),$f}let Zf;function uE(){return typeof Zf>"u"&&(Zf=(function(){const s={stencil:!0,failIfMajorPerformanceCaveat:gt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!gt.ADAPTER.getWebGLRenderingContext())return!1;const t=gt.ADAPTER.createCanvas();let i=t.getContext("webgl",s)||t.getContext("experimental-webgl",s);const n=!!i?.getContextAttributes()?.stencil;if(i){const l=i.getExtension("WEBGL_lose_context");l&&l.loseContext()}return i=null,n}catch{return!1}})()),Zf}var hE={grad:.9,turn:360,rad:360/(2*Math.PI)},Rr=function(s){return typeof s=="string"?s.length>0:typeof s=="number"},Pe=function(s,t,i){return t===void 0&&(t=0),i===void 0&&(i=Math.pow(10,t)),Math.round(i*s)/i+0},Di=function(s,t,i){return t===void 0&&(t=0),i===void 0&&(i=1),s>i?i:s>t?s:t},O_=function(s){return(s=isFinite(s)?s%360:0)>0?s:s+360},Ev=function(s){return{r:Di(s.r,0,255),g:Di(s.g,0,255),b:Di(s.b,0,255),a:Di(s.a)}},Kf=function(s){return{r:Pe(s.r),g:Pe(s.g),b:Pe(s.b),a:Pe(s.a,3)}},cE=/^#([0-9a-f]{3,8})$/i,zo=function(s){var t=s.toString(16);return t.length<2?"0"+t:t},B_=function(s){var t=s.r,i=s.g,n=s.b,l=s.a,o=Math.max(t,i,n),h=o-Math.min(t,i,n),c=h?o===t?(i-n)/h:o===i?2+(n-t)/h:4+(t-i)/h:0;return{h:60*(c<0?c+6:c),s:o?h/o*100:0,v:o/255*100,a:l}},I_=function(s){var t=s.h,i=s.s,n=s.v,l=s.a;t=t/360*6,i/=100,n/=100;var o=Math.floor(t),h=n*(1-i),c=n*(1-(t-o)*i),p=n*(1-(1-t+o)*i),m=o%6;return{r:255*[n,c,h,h,p,n][m],g:255*[p,n,n,c,h,h][m],b:255*[h,h,p,n,n,c][m],a:l}},Av=function(s){return{h:O_(s.h),s:Di(s.s,0,100),l:Di(s.l,0,100),a:Di(s.a)}},Sv=function(s){return{h:Pe(s.h),s:Pe(s.s),l:Pe(s.l),a:Pe(s.a,3)}},wv=function(s){return I_((i=(t=s).s,{h:t.h,s:(i*=((n=t.l)<50?n:100-n)/100)>0?2*i/(n+i)*100:0,v:n+i,a:t.a}));var t,i,n},yl=function(s){return{h:(t=B_(s)).h,s:(l=(200-(i=t.s))*(n=t.v)/100)>0&&l<200?i*n/100/(l<=100?l:200-l)*100:0,l:l/2,a:t.a};var t,i,n,l},fE=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,dE=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,pE=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,mE=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Td={string:[[function(s){var t=cE.exec(s);return t?(s=t[1]).length<=4?{r:parseInt(s[0]+s[0],16),g:parseInt(s[1]+s[1],16),b:parseInt(s[2]+s[2],16),a:s.length===4?Pe(parseInt(s[3]+s[3],16)/255,2):1}:s.length===6||s.length===8?{r:parseInt(s.substr(0,2),16),g:parseInt(s.substr(2,2),16),b:parseInt(s.substr(4,2),16),a:s.length===8?Pe(parseInt(s.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(s){var t=pE.exec(s)||mE.exec(s);return t?t[2]!==t[4]||t[4]!==t[6]?null:Ev({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(s){var t=fE.exec(s)||dE.exec(s);if(!t)return null;var i,n,l=Av({h:(i=t[1],n=t[2],n===void 0&&(n="deg"),Number(i)*(hE[n]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return wv(l)},"hsl"]],object:[[function(s){var t=s.r,i=s.g,n=s.b,l=s.a,o=l===void 0?1:l;return Rr(t)&&Rr(i)&&Rr(n)?Ev({r:Number(t),g:Number(i),b:Number(n),a:Number(o)}):null},"rgb"],[function(s){var t=s.h,i=s.s,n=s.l,l=s.a,o=l===void 0?1:l;if(!Rr(t)||!Rr(i)||!Rr(n))return null;var h=Av({h:Number(t),s:Number(i),l:Number(n),a:Number(o)});return wv(h)},"hsl"],[function(s){var t=s.h,i=s.s,n=s.v,l=s.a,o=l===void 0?1:l;if(!Rr(t)||!Rr(i)||!Rr(n))return null;var h=(function(c){return{h:O_(c.h),s:Di(c.s,0,100),v:Di(c.v,0,100),a:Di(c.a)}})({h:Number(t),s:Number(i),v:Number(n),a:Number(o)});return I_(h)},"hsv"]]},Cv=function(s,t){for(var i=0;i<t.length;i++){var n=t[i][0](s);if(n)return[n,t[i][1]]}return[null,void 0]},gE=function(s){return typeof s=="string"?Cv(s.trim(),Td.string):typeof s=="object"&&s!==null?Cv(s,Td.object):[null,void 0]},Qf=function(s,t){var i=yl(s);return{h:i.h,s:Di(i.s+100*t,0,100),l:i.l,a:i.a}},Jf=function(s){return(299*s.r+587*s.g+114*s.b)/1e3/255},Rv=function(s,t){var i=yl(s);return{h:i.h,s:i.s,l:Di(i.l+100*t,0,100),a:i.a}},Ed=(function(){function s(t){this.parsed=gE(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return s.prototype.isValid=function(){return this.parsed!==null},s.prototype.brightness=function(){return Pe(Jf(this.rgba),2)},s.prototype.isDark=function(){return Jf(this.rgba)<.5},s.prototype.isLight=function(){return Jf(this.rgba)>=.5},s.prototype.toHex=function(){return t=Kf(this.rgba),i=t.r,n=t.g,l=t.b,h=(o=t.a)<1?zo(Pe(255*o)):"","#"+zo(i)+zo(n)+zo(l)+h;var t,i,n,l,o,h},s.prototype.toRgb=function(){return Kf(this.rgba)},s.prototype.toRgbString=function(){return t=Kf(this.rgba),i=t.r,n=t.g,l=t.b,(o=t.a)<1?"rgba("+i+", "+n+", "+l+", "+o+")":"rgb("+i+", "+n+", "+l+")";var t,i,n,l,o},s.prototype.toHsl=function(){return Sv(yl(this.rgba))},s.prototype.toHslString=function(){return t=Sv(yl(this.rgba)),i=t.h,n=t.s,l=t.l,(o=t.a)<1?"hsla("+i+", "+n+"%, "+l+"%, "+o+")":"hsl("+i+", "+n+"%, "+l+"%)";var t,i,n,l,o},s.prototype.toHsv=function(){return t=B_(this.rgba),{h:Pe(t.h),s:Pe(t.s),v:Pe(t.v),a:Pe(t.a,3)};var t},s.prototype.invert=function(){return $i({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},s.prototype.saturate=function(t){return t===void 0&&(t=.1),$i(Qf(this.rgba,t))},s.prototype.desaturate=function(t){return t===void 0&&(t=.1),$i(Qf(this.rgba,-t))},s.prototype.grayscale=function(){return $i(Qf(this.rgba,-1))},s.prototype.lighten=function(t){return t===void 0&&(t=.1),$i(Rv(this.rgba,t))},s.prototype.darken=function(t){return t===void 0&&(t=.1),$i(Rv(this.rgba,-t))},s.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},s.prototype.alpha=function(t){return typeof t=="number"?$i({r:(i=this.rgba).r,g:i.g,b:i.b,a:t}):Pe(this.rgba.a,3);var i},s.prototype.hue=function(t){var i=yl(this.rgba);return typeof t=="number"?$i({h:t,s:i.s,l:i.l,a:i.a}):Pe(i.h)},s.prototype.isEqual=function(t){return this.toHex()===$i(t).toHex()},s})(),$i=function(s){return s instanceof Ed?s:new Ed(s)},Mv=[],yE=function(s){s.forEach(function(t){Mv.indexOf(t)<0&&(t(Ed,Td),Mv.push(t))})};function vE(s,t){var i={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var l in i)n[i[l]]=l;var o={};s.prototype.toName=function(h){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var c,p,m=n[this.toHex()];if(m)return m;if(h?.closest){var g=this.toRgb(),y=1/0,x="black";if(!o.length)for(var _ in i)o[_]=new s(i[_]).toRgb();for(var b in i){var w=(c=g,p=o[b],Math.pow(c.r-p.r,2)+Math.pow(c.g-p.g,2)+Math.pow(c.b-p.b,2));w<y&&(y=w,x=b)}return x}},t.string.push([function(h){var c=h.toLowerCase(),p=c==="transparent"?"#0000":i[c];return p?new s(p).toRgb():null},"name"])}yE([vE]);const qs=class au{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof au)this._value=this.cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,t))&&(this.normalize(t),this._value=this.cloneSource(t))}}get value(){return this._value}cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}isSourceEqual(t,i){const n=typeof t;if(n!==typeof i)return!1;if(n==="number"||n==="string"||t instanceof Number)return t===i;if(Array.isArray(t)&&Array.isArray(i)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(i))return t.length!==i.length?!1:t.every((l,o)=>l===i[o]);if(t!==null&&i!==null){const l=Object.keys(t),o=Object.keys(i);return l.length!==o.length?!1:l.every(h=>t[h]===i[h])}return t===i}toRgba(){const[t,i,n,l]=this._components;return{r:t,g:i,b:n,a:l}}toRgb(){const[t,i,n]=this._components;return{r:t,g:i,b:n}}toRgbaString(){const[t,i,n]=this.toUint8RgbArray();return`rgba(${t},${i},${n},${this.alpha})`}toUint8RgbArray(t){const[i,n,l]=this._components;return t=t??[],t[0]=Math.round(i*255),t[1]=Math.round(n*255),t[2]=Math.round(l*255),t}toRgbArray(t){t=t??[];const[i,n,l]=this._components;return t[0]=i,t[1]=n,t[2]=l,t}toNumber(){return this._int}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[i,n,l,o]=au.temp.setValue(t)._components;return this._components[0]*=i,this._components[1]*=n,this._components[2]*=l,this._components[3]*=o,this.refreshInt(),this._value=null,this}premultiply(t,i=!0){return i&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this.refreshInt(),this._value=null,this}toPremultiplied(t,i=!0){if(t===1)return(255<<24)+this._int;if(t===0)return i?0:this._int;let n=this._int>>16&255,l=this._int>>8&255,o=this._int&255;return i&&(n=n*t+.5|0,l=l*t+.5|0,o=o*t+.5|0),(t*255<<24)+(n<<16)+(l<<8)+o}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(t){return this._components[3]=this._clamp(t),this}round(t){const[i,n,l]=this._components;return this._components[0]=Math.round(i*t)/t,this._components[1]=Math.round(n*t)/t,this._components[2]=Math.round(l*t)/t,this.refreshInt(),this._value=null,this}toArray(t){t=t??[];const[i,n,l,o]=this._components;return t[0]=i,t[1]=n,t[2]=l,t[3]=o,t}normalize(t){let i,n,l,o;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const h=t;i=(h>>16&255)/255,n=(h>>8&255)/255,l=(h&255)/255,o=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[i,n,l,o=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[i,n,l,o=255]=t,i/=255,n/=255,l/=255,o/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const c=au.HEX_PATTERN.exec(t);c&&(t=`#${c[2]}`)}const h=$i(t);h.isValid()&&({r:i,g:n,b:l,a:o}=h.rgba,i/=255,n/=255,l/=255)}if(i!==void 0)this._components[0]=i,this._components[1]=n,this._components[2]=l,this._components[3]=o,this.refreshInt();else throw new Error(`Unable to convert color ${t}`)}refreshInt(){this._clamp(this._components);const[t,i,n]=this._components;this._int=(t*255<<16)+(i*255<<8)+(n*255|0)}_clamp(t,i=0,n=1){return typeof t=="number"?Math.min(Math.max(t,i),n):(t.forEach((l,o)=>{t[o]=Math.min(Math.max(l,i),n)}),t)}};qs.shared=new qs,qs.temp=new qs,qs.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let fe=qs;function _E(s){return jt("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),fe.shared.setValue(s).toHex()}function xE(s){return jt("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),fe.shared.setValue(s).toNumber()}function bE(){const s=[],t=[];for(let n=0;n<32;n++)s[n]=n,t[n]=n;s[Nt.NORMAL_NPM]=Nt.NORMAL,s[Nt.ADD_NPM]=Nt.ADD,s[Nt.SCREEN_NPM]=Nt.SCREEN,t[Nt.NORMAL]=Nt.NORMAL_NPM,t[Nt.ADD]=Nt.ADD_NPM,t[Nt.SCREEN]=Nt.SCREEN_NPM;const i=[];return i.push(t),i.push(s),i}const N_=bE();function U_(s,t){return N_[t?1:0][s]}function TE(s,t=null){const i=s*6;if(t=t||new Uint16Array(i),t.length!==i)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${i}`);for(let n=0,l=0;n<i;n+=6,l+=4)t[n+0]=l+0,t[n+1]=l+1,t[n+2]=l+2,t[n+3]=l+0,t[n+4]=l+2,t[n+5]=l+3;return t}function L_(s){if(s.BYTES_PER_ELEMENT===4)return s instanceof Float32Array?"Float32Array":s instanceof Uint32Array?"Uint32Array":"Int32Array";if(s.BYTES_PER_ELEMENT===2){if(s instanceof Uint16Array)return"Uint16Array"}else if(s.BYTES_PER_ELEMENT===1&&s instanceof Uint8Array)return"Uint8Array";return null}function mu(s){return s+=s===0?1:0,--s,s|=s>>>1,s|=s>>>2,s|=s>>>4,s|=s>>>8,s|=s>>>16,s+1}function Dv(s){return!(s&s-1)&&!!s}function Ov(s){let t=(s>65535?1:0)<<4;s>>>=t;let i=(s>255?1:0)<<3;return s>>>=i,t|=i,i=(s>15?1:0)<<2,s>>>=i,t|=i,i=(s>3?1:0)<<1,s>>>=i,t|=i,t|s>>1}function ta(s,t,i){const n=s.length;let l;if(t>=n||i===0)return;i=t+i>n?n-t:i;const o=n-i;for(l=t;l<o;++l)s[l]=s[l+i];s.length=o}function mn(s){return s===0?0:s<0?-1:1}let EE=0;function Jn(){return++EE}const Ad=class{constructor(s,t,i,n){this.left=s,this.top=t,this.right=i,this.bottom=n}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};Ad.EMPTY=new Ad(0,0,0,0);let Bv=Ad;const Iv={},Zi=Object.create(null),un=Object.create(null);class AE{constructor(t,i,n){this._canvas=gt.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=n||gt.RESOLUTION,this.resize(t,i)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,i){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(i*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function Nv(s,t,i){for(let n=0,l=4*i*t;n<t;++n,l+=4)if(s[l+3]!==0)return!1;return!0}function Uv(s,t,i,n,l){const o=4*t;for(let h=n,c=n*o+4*i;h<=l;++h,c+=o)if(s[c+3]!==0)return!1;return!0}function SE(s){const{width:t,height:i}=s,n=s.getContext("2d",{willReadFrequently:!0});if(n===null)throw new TypeError("Failed to get canvas 2D context");const l=n.getImageData(0,0,t,i).data;let o=0,h=0,c=t-1,p=i-1;for(;h<i&&Nv(l,t,h);)++h;if(h===i)return Bv.EMPTY;for(;Nv(l,t,p);)--p;for(;Uv(l,t,o,h,p);)++o;for(;Uv(l,t,c,h,p);)--c;return++c,++p,new Bv(o,h,c,p)}function wE(s){const t=SE(s),{width:i,height:n}=t;let l=null;if(!t.isEmpty()){const o=s.getContext("2d");if(o===null)throw new TypeError("Failed to get canvas 2D context");l=o.getImageData(t.left,t.top,i,n)}return{width:i,height:n,data:l}}function CE(s,t=globalThis.location){if(s.startsWith("data:"))return"";t=t||globalThis.location;const i=new URL(s,document.baseURI);return i.hostname!==t.hostname||i.port!==t.port||i.protocol!==t.protocol?"anonymous":""}function Ir(s,t=1){const i=gt.RETINA_PREFIX?.exec(s);return i?parseFloat(i[1]):t}var pt=(s=>(s.Renderer="renderer",s.Application="application",s.RendererSystem="renderer-webgl-system",s.RendererPlugin="renderer-webgl-plugin",s.CanvasRendererSystem="renderer-canvas-system",s.CanvasRendererPlugin="renderer-canvas-plugin",s.Asset="asset",s.LoadParser="load-parser",s.ResolveParser="resolve-parser",s.CacheParser="cache-parser",s.DetectionParser="detection-parser",s))(pt||{});const Sd=s=>{if(typeof s=="function"||typeof s=="object"&&s.extension){if(!s.extension)throw new Error("Extension class must have an extension object");s={...typeof s.extension!="object"?{type:s.extension}:s.extension,ref:s}}if(typeof s=="object")s={...s};else throw new Error("Invalid extension type");return typeof s.type=="string"&&(s.type=[s.type]),s},Lv=(s,t)=>Sd(s).priority??t,wt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...s){return s.map(Sd).forEach(t=>{t.type.forEach(i=>this._removeHandlers[i]?.(t))}),this},add(...s){return s.map(Sd).forEach(t=>{t.type.forEach(i=>{const n=this._addHandlers,l=this._queue;n[i]?n[i]?.(t):(l[i]=l[i]||[],l[i]?.push(t))})}),this},handle(s,t,i){const n=this._addHandlers,l=this._removeHandlers;if(n[s]||l[s])throw new Error(`Extension type ${s} already has a handler`);n[s]=t,l[s]=i;const o=this._queue;return o[s]&&(o[s]?.forEach(h=>t(h)),delete o[s]),this},handleByMap(s,t){return this.handle(s,i=>{i.name&&(t[i.name]=i.ref)},i=>{i.name&&delete t[i.name]})},handleByList(s,t,i=-1){return this.handle(s,n=>{t.includes(n.ref)||(t.push(n.ref),t.sort((l,o)=>Lv(o,i)-Lv(l,i)))},n=>{const l=t.indexOf(n.ref);l!==-1&&t.splice(l,1)})}};class wd{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}const RE=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function ME(s){let t="";for(let i=0;i<s;++i)i>0&&(t+=`
else `),i<s-1&&(t+=`if(test == ${i}.0){}`);return t}function DE(s,t){if(s===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const i=t.createShader(t.FRAGMENT_SHADER);for(;;){const n=RE.replace(/%forloop%/gi,ME(s));if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))s=s/2|0;else break}return s}const td=0,ed=1,id=2,rd=3,nd=4,sd=5;class sr{constructor(){this.data=0,this.blendMode=Nt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<td)}set blend(t){!!(this.data&1<<td)!==t&&(this.data^=1<<td)}get offsets(){return!!(this.data&1<<ed)}set offsets(t){!!(this.data&1<<ed)!==t&&(this.data^=1<<ed)}get culling(){return!!(this.data&1<<id)}set culling(t){!!(this.data&1<<id)!==t&&(this.data^=1<<id)}get depthTest(){return!!(this.data&1<<rd)}set depthTest(t){!!(this.data&1<<rd)!==t&&(this.data^=1<<rd)}get depthMask(){return!!(this.data&1<<sd)}set depthMask(t){!!(this.data&1<<sd)!==t&&(this.data^=1<<sd)}get clockwiseFrontFace(){return!!(this.data&1<<nd)}set clockwiseFrontFace(t){!!(this.data&1<<nd)!==t&&(this.data^=1<<nd)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==Nt.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}static for2d(){const t=new sr;return t.depthTest=!1,t.blend=!0,t}}sr.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const Cd=[];function P_(s,t){if(!s)return null;let i="";if(typeof s=="string"){const n=/\.(\w{3,4})(?:$|\?|#)/i.exec(s);n&&(i=n[1].toLowerCase())}for(let n=Cd.length-1;n>=0;--n){const l=Cd[n];if(l.test&&l.test(s,i))return new l(s,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class zi{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,i,n,l,o,h,c,p){if(arguments.length>8)throw new Error("max arguments reached");const{name:m,items:g}=this;this._aliasCount++;for(let y=0,x=g.length;y<x;y++)g[y][m](t,i,n,l,o,h,c,p);return g===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const i=this.items.indexOf(t);return i!==-1&&(this.ensureNonAliasedItems(),this.items.splice(i,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(zi.prototype,{dispatch:{value:zi.prototype.emit},run:{value:zi.prototype.emit}});class _l{constructor(t=0,i=0){this._width=t,this._height=i,this.destroyed=!1,this.internal=!1,this.onResize=new zi("setRealSize"),this.onUpdate=new zi("update"),this.onError=new zi("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,i){(t!==this._width||i!==this._height)&&(this._width=t,this._height=i,this.onResize.emit(t,i))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,i,n){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,i){return!1}}class Ou extends _l{constructor(t,i){const{width:n,height:l}=i||{};if(!n||!l)throw new Error("BufferResource width or height invalid");super(n,l),this.data=t,this.unpackAlignment=i.unpackAlignment??4}upload(t,i,n){const l=t.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,this.unpackAlignment),l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===si.UNPACK);const o=i.realWidth,h=i.realHeight;return n.width===o&&n.height===h?l.texSubImage2D(i.target,0,0,0,o,h,i.format,n.type,this.data):(n.width=o,n.height=h,l.texImage2D(i.target,0,n.internalFormat,o,h,0,i.format,n.type,this.data)),!0}dispose(){this.data=null}static test(t){return t===null||t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}const OE={scaleMode:Mr.NEAREST,alphaMode:si.NPM},Rd=class Ys extends xl{constructor(t=null,i=null){super(),i=Object.assign({},Ys.defaultOptions,i);const{alphaMode:n,mipmap:l,anisotropicLevel:o,scaleMode:h,width:c,height:p,wrapMode:m,format:g,type:y,target:x,resolution:_,resourceOptions:b}=i;t&&!(t instanceof _l)&&(t=P_(t,b),t.internal=!0),this.resolution=_||gt.RESOLUTION,this.width=Math.round((c||0)*this.resolution)/this.resolution,this.height=Math.round((p||0)*this.resolution)/this.resolution,this._mipmap=l,this.anisotropicLevel=o,this._wrapMode=m,this._scaleMode=h,this.format=g,this.type=y,this.target=x,this.alphaMode=n,this.uid=Jn(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=c>0&&p>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,i){let n;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,n=!0),i!==void 0&&i!==this.mipmap&&(this.mipmap=i,n=!0),n&&this.dirtyStyleId++,this}setSize(t,i,n){return n=n||this.resolution,this.setRealSize(t*n,i*n,n)}setRealSize(t,i,n){return this.resolution=n||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(i)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=Dv(this.realWidth)&&Dv(this.realHeight)}setResolution(t){const i=this.resolution;return i===t?this:(this.resolution=t,this.valid&&(this.width=Math.round(this.width*i)/t,this.height=Math.round(this.height*i)/t,this.emit("update",this)),this._refreshPOT(),this)}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete un[this.cacheId],delete Zi[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),Ys.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,i,n=gt.STRICT_TEXTURE_CACHE){const l=typeof t=="string";let o=null;if(l)o=t;else{if(!t._pixiId){const c=i?.pixiIdPrefix||"pixiid";t._pixiId=`${c}_${Jn()}`}o=t._pixiId}let h=un[o];if(l&&n&&!h)throw new Error(`The cacheId "${o}" does not exist in BaseTextureCache.`);return h||(h=new Ys(t,i),h.cacheId=o,Ys.addToCache(h,o)),h}static fromBuffer(t,i,n,l){t=t||new Float32Array(i*n*4);const o=new Ou(t,{width:i,height:n,...l?.resourceOptions});let h,c;return t instanceof Float32Array?(h=ht.RGBA,c=Dt.FLOAT):t instanceof Int32Array?(h=ht.RGBA_INTEGER,c=Dt.INT):t instanceof Uint32Array?(h=ht.RGBA_INTEGER,c=Dt.UNSIGNED_INT):t instanceof Int16Array?(h=ht.RGBA_INTEGER,c=Dt.SHORT):t instanceof Uint16Array?(h=ht.RGBA_INTEGER,c=Dt.UNSIGNED_SHORT):t instanceof Int8Array?(h=ht.RGBA,c=Dt.BYTE):(h=ht.RGBA,c=Dt.UNSIGNED_BYTE),o.internal=!0,new Ys(o,Object.assign({},OE,{type:c,format:h},l))}static addToCache(t,i){i&&(t.textureCacheIds.includes(i)||t.textureCacheIds.push(i),un[i]&&un[i]!==t&&console.warn(`BaseTexture added to the cache with an id [${i}] that already had an entry`),un[i]=t)}static removeFromCache(t){if(typeof t=="string"){const i=un[t];if(i){const n=i.textureCacheIds.indexOf(t);return n>-1&&i.textureCacheIds.splice(n,1),delete un[t],i}}else if(t?.textureCacheIds){for(let i=0;i<t.textureCacheIds.length;++i)delete un[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null}};Rd.defaultOptions={mipmap:nr.POW2,anisotropicLevel:0,scaleMode:Mr.LINEAR,wrapMode:yn.CLAMP,alphaMode:si.UNPACK,target:Js.TEXTURE_2D,format:ht.RGBA,type:Dt.UNSIGNED_BYTE},Rd._globalBatch=0;let Gt=Rd;class Md{constructor(){this.texArray=null,this.blend=0,this.type=er.TRIANGLES,this.start=0,this.size=0,this.data=null}}let BE=0;class Ae{constructor(t,i=!0,n=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=i,this.id=BE++,this.disposeRunner=new zi("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?ir.ELEMENT_ARRAY_BUFFER:ir.ARRAY_BUFFER}get index(){return this.type===ir.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new Ae(t)}}class gu{constructor(t,i=0,n=!1,l=Dt.FLOAT,o,h,c,p=1){this.buffer=t,this.size=i,this.normalized=n,this.type=l,this.stride=o,this.start=h,this.instance=c,this.divisor=p}destroy(){this.buffer=null}static from(t,i,n,l,o){return new gu(t,i,n,l,o)}}const IE={Float32Array,Uint32Array,Int32Array,Uint8Array};function NE(s,t){let i=0,n=0;const l={};for(let p=0;p<s.length;p++)n+=t[p],i+=s[p].length;const o=new ArrayBuffer(i*4);let h=null,c=0;for(let p=0;p<s.length;p++){const m=t[p],g=s[p],y=L_(g);l[y]||(l[y]=new IE[y](o)),h=l[y];for(let x=0;x<g.length;x++){const _=(x/m|0)*n+c,b=x%m;h[_+b]=g[x]}c+=m}return new Float32Array(o)}const Pv={5126:4,5123:2,5121:1};let UE=0;const LE={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class vn{constructor(t=[],i={}){this.buffers=t,this.indexBuffer=null,this.attributes=i,this.glVertexArrayObjects={},this.id=UE++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new zi("disposeGeometry"),this.refCount=0}addAttribute(t,i,n=0,l=!1,o,h,c,p=!1){if(!i)throw new Error("You must pass a buffer when creating an attribute");i instanceof Ae||(i instanceof Array&&(i=new Float32Array(i)),i=new Ae(i));const m=t.split("|");if(m.length>1){for(let y=0;y<m.length;y++)this.addAttribute(m[y],i,n,l,o);return this}let g=this.buffers.indexOf(i);return g===-1&&(this.buffers.push(i),g=this.buffers.length-1),this.attributes[t]=new gu(g,n,l,o,h,c,p),this.instanced=this.instanced||p,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof Ae||(t instanceof Array&&(t=new Uint16Array(t)),t=new Ae(t)),t.type=ir.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const t=[],i=[],n=new Ae;let l;for(l in this.attributes){const o=this.attributes[l],h=this.buffers[o.buffer];t.push(h.data),i.push(o.size*Pv[o.type]/4),o.buffer=0}for(n.data=NE(t,i),l=0;l<this.buffers.length;l++)this.buffers[l]!==this.indexBuffer&&this.buffers[l].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const i=this.attributes[t];return this.buffers[i.buffer].data.length/(i.stride/4||i.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new vn;for(let i=0;i<this.buffers.length;i++)t.buffers[i]=new Ae(this.buffers[i].data.slice(0));for(const i in this.attributes){const n=this.attributes[i];t.attributes[i]=new gu(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=ir.ELEMENT_ARRAY_BUFFER),t}static merge(t){const i=new vn,n=[],l=[],o=[];let h;for(let c=0;c<t.length;c++){h=t[c];for(let p=0;p<h.buffers.length;p++)l[p]=l[p]||0,l[p]+=h.buffers[p].data.length,o[p]=0}for(let c=0;c<h.buffers.length;c++)n[c]=new LE[L_(h.buffers[c].data)](l[c]),i.buffers[c]=new Ae(n[c]);for(let c=0;c<t.length;c++){h=t[c];for(let p=0;p<h.buffers.length;p++)n[p].set(h.buffers[p].data,o[p]),o[p]+=h.buffers[p].data.length}if(i.attributes=h.attributes,h.indexBuffer){i.indexBuffer=i.buffers[h.buffers.indexOf(h.indexBuffer)],i.indexBuffer.type=ir.ELEMENT_ARRAY_BUFFER;let c=0,p=0,m=0,g=0;for(let y=0;y<h.buffers.length;y++)if(h.buffers[y]!==h.indexBuffer){g=y;break}for(const y in h.attributes){const x=h.attributes[y];(x.buffer|0)===g&&(p+=x.size*Pv[x.type]/4)}for(let y=0;y<t.length;y++){const x=t[y].indexBuffer.data;for(let _=0;_<x.length;_++)i.indexBuffer.data[_+m]+=c;c+=t[y].buffers[g].data.length/p,m+=x.length}}return i}}class F_ extends vn{constructor(t=!1){super(),this._buffer=new Ae(null,t,!1),this._indexBuffer=new Ae(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Dt.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Dt.FLOAT).addAttribute("aColor",this._buffer,4,!0,Dt.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Dt.FLOAT).addIndex(this._indexBuffer)}}const yu=Math.PI*2,PE=180/Math.PI,FE=Math.PI/180;var qe=(s=>(s[s.POLY=0]="POLY",s[s.RECT=1]="RECT",s[s.CIRC=2]="CIRC",s[s.ELIP=3]="ELIP",s[s.RREC=4]="RREC",s))(qe||{});class $t{constructor(t=0,i=0){this.x=0,this.y=0,this.x=t,this.y=i}clone(){return new $t(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,i=t){return this.x=t,this.y=i,this}}$t.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const Ho=[new $t,new $t,new $t,new $t];class Ht{constructor(t=0,i=0,n=0,l=0){this.x=Number(t),this.y=Number(i),this.width=Number(n),this.height=Number(l),this.type=qe.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Ht(0,0,0,0)}clone(){return new Ht(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,i){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&i>=this.y&&i<this.y+this.height}intersects(t,i){if(!i){const q=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=q)return!1;const rt=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>rt}const n=this.left,l=this.right,o=this.top,h=this.bottom;if(l<=n||h<=o)return!1;const c=Ho[0].set(t.left,t.top),p=Ho[1].set(t.left,t.bottom),m=Ho[2].set(t.right,t.top),g=Ho[3].set(t.right,t.bottom);if(m.x<=c.x||p.y<=c.y)return!1;const y=Math.sign(i.a*i.d-i.b*i.c);if(y===0||(i.apply(c,c),i.apply(p,p),i.apply(m,m),i.apply(g,g),Math.max(c.x,p.x,m.x,g.x)<=n||Math.min(c.x,p.x,m.x,g.x)>=l||Math.max(c.y,p.y,m.y,g.y)<=o||Math.min(c.y,p.y,m.y,g.y)>=h))return!1;const x=y*(p.y-c.y),_=y*(c.x-p.x),b=x*n+_*o,w=x*l+_*o,A=x*n+_*h,C=x*l+_*h;if(Math.max(b,w,A,C)<=x*c.x+_*c.y||Math.min(b,w,A,C)>=x*g.x+_*g.y)return!1;const U=y*(c.y-m.y),O=y*(m.x-c.x),L=U*n+O*o,B=U*l+O*o,H=U*n+O*h,D=U*l+O*h;return!(Math.max(L,B,H,D)<=U*c.x+O*c.y||Math.min(L,B,H,D)>=U*g.x+O*g.y)}pad(t=0,i=t){return this.x-=t,this.y-=i,this.width+=t*2,this.height+=i*2,this}fit(t){const i=Math.max(this.x,t.x),n=Math.min(this.x+this.width,t.x+t.width),l=Math.max(this.y,t.y),o=Math.min(this.y+this.height,t.y+t.height);return this.x=i,this.width=Math.max(n-i,0),this.y=l,this.height=Math.max(o-l,0),this}ceil(t=1,i=.001){const n=Math.ceil((this.x+this.width-i)*t)/t,l=Math.ceil((this.y+this.height-i)*t)/t;return this.x=Math.floor((this.x+i)*t)/t,this.y=Math.floor((this.y+i)*t)/t,this.width=n-this.x,this.height=l-this.y,this}enlarge(t){const i=Math.min(this.x,t.x),n=Math.max(this.x+this.width,t.x+t.width),l=Math.min(this.y,t.y),o=Math.max(this.y+this.height,t.y+t.height);return this.x=i,this.width=n-i,this.y=l,this.height=o-l,this}}Ht.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Bu{constructor(t=0,i=0,n=0){this.x=t,this.y=i,this.radius=n,this.type=qe.CIRC}clone(){return new Bu(this.x,this.y,this.radius)}contains(t,i){if(this.radius<=0)return!1;const n=this.radius*this.radius;let l=this.x-t,o=this.y-i;return l*=l,o*=o,l+o<=n}getBounds(){return new Ht(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}Bu.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Iu{constructor(t=0,i=0,n=0,l=0){this.x=t,this.y=i,this.width=n,this.height=l,this.type=qe.ELIP}clone(){return new Iu(this.x,this.y,this.width,this.height)}contains(t,i){if(this.width<=0||this.height<=0)return!1;let n=(t-this.x)/this.width,l=(i-this.y)/this.height;return n*=n,l*=l,n+l<=1}getBounds(){return new Ht(this.x-this.width,this.y-this.height,this.width,this.height)}}Iu.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Kn{constructor(...t){let i=Array.isArray(t[0])?t[0]:t;if(typeof i[0]!="number"){const n=[];for(let l=0,o=i.length;l<o;l++)n.push(i[l].x,i[l].y);i=n}this.points=i,this.type=qe.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),i=new Kn(t);return i.closeStroke=this.closeStroke,i}contains(t,i){let n=!1;const l=this.points.length/2;for(let o=0,h=l-1;o<l;h=o++){const c=this.points[o*2],p=this.points[o*2+1],m=this.points[h*2],g=this.points[h*2+1];p>i!=g>i&&t<(m-c)*((i-p)/(g-p))+c&&(n=!n)}return n}}Kn.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((s,t)=>`${s}, ${t}`,"")}]`};class Nu{constructor(t=0,i=0,n=0,l=0,o=20){this.x=t,this.y=i,this.width=n,this.height=l,this.radius=o,this.type=qe.RREC}clone(){return new Nu(this.x,this.y,this.width,this.height,this.radius)}contains(t,i){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&i>=this.y&&i<=this.y+this.height){const n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(i>=this.y+n&&i<=this.y+this.height-n||t>=this.x+n&&t<=this.x+this.width-n)return!0;let l=t-(this.x+n),o=i-(this.y+n);const h=n*n;if(l*l+o*o<=h||(l=t-(this.x+this.width-n),l*l+o*o<=h)||(o=i-(this.y+this.height-n),l*l+o*o<=h)||(l=t-(this.x+n),l*l+o*o<=h))return!0}return!1}}Nu.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class de{constructor(t=1,i=0,n=0,l=1,o=0,h=0){this.array=null,this.a=t,this.b=i,this.c=n,this.d=l,this.tx=o,this.ty=h}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,i,n,l,o,h){return this.a=t,this.b=i,this.c=n,this.d=l,this.tx=o,this.ty=h,this}toArray(t,i){this.array||(this.array=new Float32Array(9));const n=i||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(t,i){i=i||new $t;const n=t.x,l=t.y;return i.x=this.a*n+this.c*l+this.tx,i.y=this.b*n+this.d*l+this.ty,i}applyInverse(t,i){i=i||new $t;const n=1/(this.a*this.d+this.c*-this.b),l=t.x,o=t.y;return i.x=this.d*n*l+-this.c*n*o+(this.ty*this.c-this.tx*this.d)*n,i.y=this.a*n*o+-this.b*n*l+(-this.ty*this.a+this.tx*this.b)*n,i}translate(t,i){return this.tx+=t,this.ty+=i,this}scale(t,i){return this.a*=t,this.d*=i,this.c*=t,this.b*=i,this.tx*=t,this.ty*=i,this}rotate(t){const i=Math.cos(t),n=Math.sin(t),l=this.a,o=this.c,h=this.tx;return this.a=l*i-this.b*n,this.b=l*n+this.b*i,this.c=o*i-this.d*n,this.d=o*n+this.d*i,this.tx=h*i-this.ty*n,this.ty=h*n+this.ty*i,this}append(t){const i=this.a,n=this.b,l=this.c,o=this.d;return this.a=t.a*i+t.b*l,this.b=t.a*n+t.b*o,this.c=t.c*i+t.d*l,this.d=t.c*n+t.d*o,this.tx=t.tx*i+t.ty*l+this.tx,this.ty=t.tx*n+t.ty*o+this.ty,this}setTransform(t,i,n,l,o,h,c,p,m){return this.a=Math.cos(c+m)*o,this.b=Math.sin(c+m)*o,this.c=-Math.sin(c-p)*h,this.d=Math.cos(c-p)*h,this.tx=t-(n*this.a+l*this.c),this.ty=i-(n*this.b+l*this.d),this}prepend(t){const i=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const n=this.a,l=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=l*t.a+this.d*t.c,this.d=l*t.b+this.d*t.d}return this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this}decompose(t){const i=this.a,n=this.b,l=this.c,o=this.d,h=t.pivot,c=-Math.atan2(-l,o),p=Math.atan2(n,i),m=Math.abs(c+p);return m<1e-5||Math.abs(yu-m)<1e-5?(t.rotation=p,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=c,t.skew.y=p),t.scale.x=Math.sqrt(i*i+n*n),t.scale.y=Math.sqrt(l*l+o*o),t.position.x=this.tx+(h.x*i+h.y*l),t.position.y=this.ty+(h.x*n+h.y*o),t}invert(){const t=this.a,i=this.b,n=this.c,l=this.d,o=this.tx,h=t*l-i*n;return this.a=l/h,this.b=-i/h,this.c=-n/h,this.d=t/h,this.tx=(n*this.ty-l*o)/h,this.ty=-(t*this.ty-i*o)/h,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new de;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}static get IDENTITY(){return new de}static get TEMP_MATRIX(){return new de}}de.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const Vn=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],jn=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],qn=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Yn=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Dd=[],G_=[],ko=Math.sign;function GE(){for(let s=0;s<16;s++){const t=[];Dd.push(t);for(let i=0;i<16;i++){const n=ko(Vn[s]*Vn[i]+qn[s]*jn[i]),l=ko(jn[s]*Vn[i]+Yn[s]*jn[i]),o=ko(Vn[s]*qn[i]+qn[s]*Yn[i]),h=ko(jn[s]*qn[i]+Yn[s]*Yn[i]);for(let c=0;c<16;c++)if(Vn[c]===n&&jn[c]===l&&qn[c]===o&&Yn[c]===h){t.push(c);break}}}for(let s=0;s<16;s++){const t=new de;t.set(Vn[s],jn[s],qn[s],Yn[s],0,0),G_.push(t)}}GE();const ye={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:s=>Vn[s],uY:s=>jn[s],vX:s=>qn[s],vY:s=>Yn[s],inv:s=>s&8?s&15:-s&7,add:(s,t)=>Dd[s][t],sub:(s,t)=>Dd[s][ye.inv(t)],rotate180:s=>s^4,isVertical:s=>(s&3)===2,byDirection:(s,t)=>Math.abs(s)*2<=Math.abs(t)?t>=0?ye.S:ye.N:Math.abs(t)*2<=Math.abs(s)?s>0?ye.E:ye.W:t>0?s>0?ye.SE:ye.SW:s>0?ye.NE:ye.NW,matrixAppendRotationInv:(s,t,i=0,n=0)=>{const l=G_[ye.inv(t)];l.tx=i,l.ty=n,s.append(l)}};class Or{constructor(t,i,n=0,l=0){this._x=n,this._y=l,this.cb=t,this.scope=i}clone(t=this.cb,i=this.scope){return new Or(t,i,this._x,this._y)}set(t=0,i=t){return(this._x!==t||this._y!==i)&&(this._x=t,this._y=i,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}Or.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const Od=class{constructor(){this.worldTransform=new de,this.localTransform=new de,this.position=new Or(this.onChange,this,0,0),this.scale=new Or(this.onChange,this,1,1),this.pivot=new Or(this.onChange,this,0,0),this.skew=new Or(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const s=this.localTransform;this._localID!==this._currentLocalID&&(s.a=this._cx*this.scale.x,s.b=this._sx*this.scale.x,s.c=this._cy*this.scale.y,s.d=this._sy*this.scale.y,s.tx=this.position.x-(this.pivot.x*s.a+this.pivot.y*s.c),s.ty=this.position.y-(this.pivot.x*s.b+this.pivot.y*s.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(s){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==s._worldID){const i=s.worldTransform,n=this.worldTransform;n.a=t.a*i.a+t.b*i.c,n.b=t.a*i.b+t.b*i.d,n.c=t.c*i.a+t.d*i.c,n.d=t.c*i.b+t.d*i.d,n.tx=t.tx*i.a+t.ty*i.c+i.tx,n.ty=t.tx*i.b+t.ty*i.d+i.ty,this._parentID=s._worldID,this._worldID++}}setFromMatrix(s){s.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(s){this._rotation!==s&&(this._rotation=s,this.updateSkew())}};Od.IDENTITY=new Od;let up=Od;up.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var zE=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,HE=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function Fv(s,t,i){const n=s.createShader(t);return s.shaderSource(n,i),s.compileShader(n),n}function ad(s){const t=new Array(s);for(let i=0;i<t.length;i++)t[i]=!1;return t}function z_(s,t){switch(s){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return ad(2*t);case"bvec3":return ad(3*t);case"bvec4":return ad(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const ea=[{test:s=>s.type==="float"&&s.size===1&&!s.isArray,code:s=>`
            if(uv["${s}"] !== ud["${s}"].value)
            {
                ud["${s}"].value = uv["${s}"]
                gl.uniform1f(ud["${s}"].location, uv["${s}"])
            }
            `},{test:(s,t)=>(s.type==="sampler2D"||s.type==="samplerCube"||s.type==="sampler2DArray")&&s.size===1&&!s.isArray&&(t==null||t.castToBaseTexture!==void 0),code:s=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${s}"], t);

            if(ud["${s}"].value !== t)
            {
                ud["${s}"].value = t;
                gl.uniform1i(ud["${s}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(s,t)=>s.type==="mat3"&&s.size===1&&!s.isArray&&t.a!==void 0,code:s=>`
            gl.uniformMatrix3fv(ud["${s}"].location, false, uv["${s}"].toArray(true));
            `,codeUbo:s=>`
                var ${s}_matrix = uv.${s}.toArray(true);

                data[offset] = ${s}_matrix[0];
                data[offset+1] = ${s}_matrix[1];
                data[offset+2] = ${s}_matrix[2];
        
                data[offset + 4] = ${s}_matrix[3];
                data[offset + 5] = ${s}_matrix[4];
                data[offset + 6] = ${s}_matrix[5];
        
                data[offset + 8] = ${s}_matrix[6];
                data[offset + 9] = ${s}_matrix[7];
                data[offset + 10] = ${s}_matrix[8];
            `},{test:(s,t)=>s.type==="vec2"&&s.size===1&&!s.isArray&&t.x!==void 0,code:s=>`
                cv = ud["${s}"].value;
                v = uv["${s}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${s}"].location, v.x, v.y);
                }`,codeUbo:s=>`
                v = uv.${s};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:s=>s.type==="vec2"&&s.size===1&&!s.isArray,code:s=>`
                cv = ud["${s}"].value;
                v = uv["${s}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${s}"].location, v[0], v[1]);
                }
            `},{test:(s,t)=>s.type==="vec4"&&s.size===1&&!s.isArray&&t.width!==void 0,code:s=>`
                cv = ud["${s}"].value;
                v = uv["${s}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${s}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:s=>`
                    v = uv.${s};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(s,t)=>s.type==="vec4"&&s.size===1&&!s.isArray&&t.red!==void 0,code:s=>`
                cv = ud["${s}"].value;
                v = uv["${s}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${s}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:s=>`
                    v = uv.${s};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(s,t)=>s.type==="vec3"&&s.size===1&&!s.isArray&&t.red!==void 0,code:s=>`
                cv = ud["${s}"].value;
                v = uv["${s}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${s}"].location, v.red, v.green, v.blue)
                }`,codeUbo:s=>`
                    v = uv.${s};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:s=>s.type==="vec4"&&s.size===1&&!s.isArray,code:s=>`
                cv = ud["${s}"].value;
                v = uv["${s}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${s}"].location, v[0], v[1], v[2], v[3])
                }`}],kE={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},XE={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function VE(s,t){const i=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const n in s.uniforms){const l=t[n];if(!l){s.uniforms[n]?.group===!0&&(s.uniforms[n].ubo?i.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${n}, '${n}');
                    `):i.push(`
                        renderer.shader.syncUniformGroup(uv.${n}, syncData);
                    `));continue}const o=s.uniforms[n];let h=!1;for(let c=0;c<ea.length;c++)if(ea[c].test(l,o)){i.push(ea[c].code(n,o)),h=!0;break}if(!h){const c=(l.size===1&&!l.isArray?kE:XE)[l.type].replace("location",`ud["${n}"].location`);i.push(`
            cu = ud["${n}"];
            cv = cu.value;
            v = uv["${n}"];
            ${c};`)}}return new Function("ud","uv","renderer","syncData",i.join(`
`))}const H_={};let Xo=H_;function jE(){if(Xo===H_||Xo?.isContextLost()){const s=gt.ADAPTER.createCanvas();let t;gt.PREFER_ENV>=es.WEBGL2&&(t=s.getContext("webgl2",{})),t||(t=s.getContext("webgl",{})||s.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),Xo=t}return Xo}let Vo;function qE(){if(!Vo){Vo=Mi.MEDIUM;const s=jE();if(s&&s.getShaderPrecisionFormat){const t=s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT);t&&(Vo=t.precision?Mi.HIGH:Mi.MEDIUM)}}return Vo}function Gv(s,t){const i=s.getShaderSource(t).split(`
`).map((m,g)=>`${g}: ${m}`),n=s.getShaderInfoLog(t),l=n.split(`
`),o={},h=l.map(m=>parseFloat(m.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(m=>m&&!o[m]?(o[m]=!0,!0):!1),c=[""];h.forEach(m=>{i[m-1]=`%c${i[m-1]}%c`,c.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const p=i.join(`
`);c[0]=p,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...c),console.groupEnd()}function YE(s,t,i,n){s.getProgramParameter(t,s.LINK_STATUS)||(s.getShaderParameter(i,s.COMPILE_STATUS)||Gv(s,i),s.getShaderParameter(n,s.COMPILE_STATUS)||Gv(s,n),console.error("PixiJS Error: Could not initialize shader."),s.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",s.getProgramInfoLog(t)))}const WE={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function k_(s){return WE[s]}let jo=null;const zv={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function X_(s,t){if(!jo){const i=Object.keys(zv);jo={};for(let n=0;n<i.length;++n){const l=i[n];jo[s[l]]=zv[l]}}return jo[t]}function Hv(s,t,i){if(s.substring(0,9)!=="precision"){let n=t;return t===Mi.HIGH&&i!==Mi.HIGH&&(n=Mi.MEDIUM),`precision ${n} float;
${s}`}else if(i!==Mi.HIGH&&s.substring(0,15)==="precision highp")return s.replace("precision highp","precision mediump");return s}let al;function $E(){if(typeof al=="boolean")return al;try{al=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{al=!1}return al}let ZE=0;const qo={},Bd=class Ws{constructor(t,i,n="pixi-shader",l={}){this.extra={},this.id=ZE++,this.vertexSrc=t||Ws.defaultVertexSrc,this.fragmentSrc=i||Ws.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=l,this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),qo[n]?(qo[n]++,n+=`-${qo[n]}`):qo[n]=1,this.vertexSrc=`#define SHADER_NAME ${n}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${n}
${this.fragmentSrc}`,this.vertexSrc=Hv(this.vertexSrc,Ws.defaultVertexPrecision,Mi.HIGH),this.fragmentSrc=Hv(this.fragmentSrc,Ws.defaultFragmentPrecision,qE())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return HE}static get defaultFragmentSrc(){return zE}static from(t,i,n){const l=t+i;let o=Iv[l];return o||(Iv[l]=o=new Ws(t,i,n)),o}};Bd.defaultVertexPrecision=Mi.HIGH,Bd.defaultFragmentPrecision=Dr.apple.device?Mi.HIGH:Mi.MEDIUM;let Br=Bd,KE=0;class Hi{constructor(t,i,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=KE++,this.static=!!i,this.ubo=!!n,t instanceof Ae?(this.buffer=t,this.buffer.type=ir.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Ae(new Float32Array(1)),this.buffer.type=ir.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,i,n){if(!this.ubo)this.uniforms[t]=new Hi(i,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,i,n){return new Hi(t,i,n)}static uboFrom(t,i){return new Hi(t,i??!0,!0)}}class rr{constructor(t,i){this.uniformBindCount=0,this.program=t,i?i instanceof Hi?this.uniformGroup=i:this.uniformGroup=new Hi(i):this.uniformGroup=new Hi({}),this.disposeRunner=new zi("disposeShader")}checkUniformExists(t,i){if(i.uniforms[t])return!0;for(const n in i.uniforms){const l=i.uniforms[n];if(l.group===!0&&this.checkUniformExists(t,l))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,i,n){const l=Br.from(t,i);return new rr(l,n)}}class QE{constructor(t,i){if(this.vertexSrc=t,this.fragTemplate=i,this.programCache={},this.defaultGroupCache={},!i.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!i.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const n=new Int32Array(t);for(let o=0;o<t;o++)n[o]=o;this.defaultGroupCache[t]=Hi.from({uSamplers:n},!0);let l=this.fragTemplate;l=l.replace(/%count%/gi,`${t}`),l=l.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Br(this.vertexSrc,l)}const i={tint:new Float32Array([1,1,1,1]),translationMatrix:new de,default:this.defaultGroupCache[t]};return new rr(this.programCache[t],i)}generateSampleSrc(t){let i="";i+=`
`,i+=`
`;for(let n=0;n<t;n++)n>0&&(i+=`
else `),n<t-1&&(i+=`if(vTextureId < ${n}.5)`),i+=`
{`,i+=`
	color = texture2D(uSamplers[${n}], vTextureCoord);`,i+=`
}`;return i+=`
`,i+=`
`,i}}class Id{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}function JE(){return!Dr.apple.device}function tA(s){let t=!0;const i=gt.ADAPTER.getNavigator();if(Dr.tablet||Dr.phone){if(Dr.apple.device){const n=i.userAgent.match(/OS (\d+)_(\d+)?/);n&&parseInt(n[1],10)<11&&(t=!1)}if(Dr.android.device){const n=i.userAgent.match(/Android\s([0-9.]*)/);n&&parseInt(n[1],10)<7&&(t=!1)}}return t?s:4}class Uu{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}var eA=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,iA=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const hl=class Pi extends Uu{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=F_,this.vertexSize=6,this.state=sr.for2d(),this.size=Pi.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??tA(32),this._defaultMaxTextures}static set defaultMaxTextures(t){this._defaultMaxTextures=t}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??JE(),this._canUploadSameBuffer}static set canUploadSameBuffer(t){this._canUploadSameBuffer=t}get MAX_TEXTURES(){return jt("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return iA}static get defaultFragmentTemplate(){return eA}setShaderGenerator({vertex:t=Pi.defaultVertexSrc,fragment:i=Pi.defaultFragmentTemplate}={}){this.shaderGenerator=new QE(t,i)}contextChange(){const t=this.renderer.gl;gt.PREFER_ENV===es.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),Pi.defaultMaxTextures),this.maxTextures=DE(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:i}=Pi,n=this.size/4,l=Math.floor(n/this.maxTextures)+1;for(;t.length<n;)t.push(new Md);for(;i.length<l;)i.push(new Id);for(let o=0;o<this.maxTextures;o++)this._tempBoundTextures[o]=null}onPrerender(){this._flushId=0}render(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:i}=this,n=Pi._textureArrayPool,l=this.renderer.batch,o=this._tempBoundTextures,h=this.renderer.textureGC.count;let c=++Gt._globalBatch,p=0,m=n[0],g=0;l.copyBoundTextures(o,i);for(let y=0;y<this._bufferSize;++y){const x=t[y];t[y]=null,x._batchEnabled!==c&&(m.count>=i&&(l.boundArray(m,o,c,i),this.buildDrawCalls(m,g,y),g=y,m=n[++p],++c),x._batchEnabled=c,x.touched=h,m.elements[m.count++]=x)}m.count>0&&(l.boundArray(m,o,c,i),this.buildDrawCalls(m,g,this._bufferSize),++p,++c);for(let y=0;y<o.length;y++)o[y]=null;Gt._globalBatch=c}buildDrawCalls(t,i,n){const{_bufferedElements:l,_attributeBuffer:o,_indexBuffer:h,vertexSize:c}=this,p=Pi._drawCallPool;let m=this._dcIndex,g=this._aIndex,y=this._iIndex,x=p[m];x.start=this._iIndex,x.texArray=t;for(let _=i;_<n;++_){const b=l[_],w=b._texture.baseTexture,A=N_[w.alphaMode?1:0][b.blendMode];l[_]=null,i<_&&x.blend!==A&&(x.size=y-x.start,i=_,x=p[++m],x.texArray=t,x.start=y),this.packInterleavedGeometry(b,o,h,g,y),g+=b.vertexData.length/2*c,y+=b.indices.length,x.blend=A}i<n&&(x.size=y-x.start,++m),this._dcIndex=m,this._aIndex=g,this._iIndex=y}bindAndClearTexArray(t){const i=this.renderer.texture;for(let n=0;n<t.count;n++)i.bind(t.elements[n],t.ids[n]),t.elements[n]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:i,_indexBuffer:n}=this;Pi.canUploadSameBuffer?(t[this._flushId]._buffer.update(i.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(i.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:i,state:n}=this.renderer,l=Pi._drawCallPool;let o=null;for(let h=0;h<t;h++){const{texArray:c,type:p,size:m,start:g,blend:y}=l[h];o!==c&&(o=c,this.bindAndClearTexArray(c)),this.state.blendMode=y,n.set(this.state),i.drawElements(p,m,i.UNSIGNED_SHORT,g*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Pi.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const i=mu(Math.ceil(t/8)),n=Ov(i),l=i*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);let o=this._aBuffers[l];return o||(this._aBuffers[l]=o=new wd(l*this.vertexSize*4)),o}getIndexBuffer(t){const i=mu(Math.ceil(t/12)),n=Ov(i),l=i*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);let o=this._iBuffers[n];return o||(this._iBuffers[n]=o=new Uint16Array(l)),o}packInterleavedGeometry(t,i,n,l,o){const{uint32View:h,float32View:c}=i,p=l/this.vertexSize,m=t.uvs,g=t.indices,y=t.vertexData,x=t._texture.baseTexture._batchLocation,_=Math.min(t.worldAlpha,1),b=fe.shared.setValue(t._tintRGB).toPremultiplied(_,t._texture.baseTexture.alphaMode>0);for(let w=0;w<y.length;w+=2)c[l++]=y[w],c[l++]=y[w+1],c[l++]=m[w],c[l++]=m[w+1],h[l++]=b,c[l++]=x;for(let w=0;w<g.length;w++)n[o++]=p+g[w]}};hl.defaultBatchSize=4096,hl.extension={name:"batch",type:pt.RendererPlugin},hl._drawCallPool=[],hl._textureArrayPool=[];let Wn=hl;wt.add(Wn);var rA=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,nA=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const Nd=class cl extends rr{constructor(t,i,n){const l=Br.from(t||cl.defaultVertexSrc,i||cl.defaultFragmentSrc);super(l,n),this.padding=0,this.resolution=cl.defaultResolution,this.multisample=cl.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new sr}apply(t,i,n,l,o){t.applyFilter(this,i,n,l)}get blendMode(){return this.state.blendMode}set blendMode(t){this.state.blendMode=t}get resolution(){return this._resolution}set resolution(t){this._resolution=t}static get defaultVertexSrc(){return nA}static get defaultFragmentSrc(){return rA}};Nd.defaultResolution=1,Nd.defaultMultisample=De.NONE;let Ke=Nd;class vu{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new fe(0),this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender;const{backgroundColor:i,background:n,backgroundAlpha:l}=t,o=n??i;o!==void 0&&(this.color=o),this.alpha=l}get color(){return this._backgroundColor.value}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get backgroundColor(){return this._backgroundColor}destroy(){}}vu.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},vu.extension={type:[pt.RendererSystem,pt.CanvasRendererSystem],name:"background"};wt.add(vu);class V_{constructor(t){this.renderer=t,this.emptyRenderer=new Uu(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,i){const{boundTextures:n}=this.renderer.texture;for(let l=i-1;l>=0;--l)t[l]=n[l]||null,t[l]&&(t[l]._batchLocation=l)}boundArray(t,i,n,l){const{elements:o,ids:h,count:c}=t;let p=0;for(let m=0;m<c;m++){const g=o[m],y=g._batchLocation;if(y>=0&&y<l&&i[y]===g){h[m]=y;continue}for(;p<l;){const x=i[p];if(x&&x._batchEnabled===n&&x._batchLocation===p){p++;continue}h[m]=p,g._batchLocation=p,i[p]=g;break}}}destroy(){this.renderer=null}}V_.extension={type:pt.RendererSystem,name:"batch"};wt.add(V_);let kv=0;class _u{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=kv++}init(t){if(t.context)this.initFromContext(t.context);else{const i=this.renderer.background.alpha<1,n=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:i,premultipliedAlpha:n,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=kv++,this.renderer.runners.contextChange.emit(t);const i=this.renderer.view;i.addEventListener!==void 0&&(i.addEventListener("webglcontextlost",this.handleContextLost,!1),i.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const i=this.createContext(this.renderer.view,t);this.initFromContext(i)}createContext(t,i){let n;if(gt.PREFER_ENV>=es.WEBGL2&&(n=t.getContext("webgl2",i)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=t.getContext("webgl",i)||t.getContext("experimental-webgl",i),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,i={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc"),bptc:t.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,i,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,i,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const i=t.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),i&&!i.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const l=n||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=l,l||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}_u.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},_u.extension={type:pt.RendererSystem,name:"context"};wt.add(_u);class Ud{constructor(t,i){if(this.width=Math.round(t),this.height=Math.round(i),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new zi("disposeFramebuffer"),this.multisample=De.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,i){return this.colorTextures[t]=i||new Gt(null,{scaleMode:Mr.NEAREST,resolution:1,mipmap:nr.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new Gt(null,{scaleMode:Mr.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:nr.OFF,format:ht.DEPTH_COMPONENT,type:Dt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,i){if(t=Math.round(t),i=Math.round(i),!t||!i)throw new Error("Framebuffer width and height must not be zero");if(!(t===this.width&&i===this.height)){this.width=t,this.height=i,this.dirtyId++,this.dirtySize++;for(let n=0;n<this.colorTextures.length;n++){const l=this.colorTextures[n],o=l.resolution;l.setSize(t/o,i/o)}if(this.depthTexture){const n=this.depthTexture.resolution;this.depthTexture.setSize(t/n,i/n)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class j_ extends Gt{constructor(t={}){if(typeof t=="number"){const i=arguments[0],n=arguments[1],l=arguments[2],o=arguments[3];t={width:i,height:n,scaleMode:l,resolution:o}}t.width=t.width??100,t.height=t.height??100,t.multisample??(t.multisample=De.NONE),super(null,t),this.mipmap=nr.OFF,this.valid=!0,this._clear=new fe([0,0,0,0]),this.framebuffer=new Ud(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(t){this._clear.setValue(t)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,i){this.framebuffer.resize(t*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Nr extends _l{constructor(t){const i=t,n=i.naturalWidth||i.videoWidth||i.displayWidth||i.width,l=i.naturalHeight||i.videoHeight||i.displayHeight||i.height;super(n,l),this.source=t,this.noSubImage=!1}static crossOrigin(t,i,n){n===void 0&&!i.startsWith("data:")?t.crossOrigin=CE(i):n!==!1&&(t.crossOrigin=typeof n=="string"?n:"anonymous")}upload(t,i,n,l){const o=t.gl,h=i.realWidth,c=i.realHeight;if(l=l||this.source,typeof HTMLImageElement<"u"&&l instanceof HTMLImageElement){if(!l.complete||l.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&l instanceof HTMLVideoElement&&l.readyState<=1)return!1;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===si.UNPACK),!this.noSubImage&&i.target===o.TEXTURE_2D&&n.width===h&&n.height===c?o.texSubImage2D(o.TEXTURE_2D,0,0,0,i.format,n.type,l):(n.width=h,n.height=c,o.texImage2D(i.target,0,n.internalFormat,i.format,n.type,l)),!0}update(){if(this.destroyed)return;const t=this.source,i=t.naturalWidth||t.videoWidth||t.width,n=t.naturalHeight||t.videoHeight||t.height;this.resize(i,n),super.update()}dispose(){this.source=null}}class q_ extends Nr{constructor(t,i){if(i=i||{},typeof t=="string"){const n=new Image;Nr.crossOrigin(n,t,i.crossorigin),n.src=t,t=n}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(i.createBitmap??gt.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,this.bitmap=null,this._load=null,i.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((i,n)=>{const l=this.source;this.url=l.src;const o=()=>{this.destroyed||(l.onload=null,l.onerror=null,this.update(),this._load=null,this.createBitmap?i(this.process()):i(this))};l.complete&&l.src?o():(l.onload=o,l.onerror=h=>{n(h),this.onError.emit(h)})}),this._load)}process(){const t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const i=globalThis.createImageBitmap,n=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:n?"cors":"no-cors"}).then(l=>l.blob()).then(l=>i(l,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===si.UNPACK?"premultiply":"none"})).then(l=>this.destroyed?Promise.reject():(this.bitmap=l,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,i,n){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,i,n,this.bitmap),!this.preserveBitmap){let l=!0;const o=i._glTextures;for(const h in o){const c=o[h];if(c!==n&&c.dirtyId!==i.dirtyId){l=!1;break}}l&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}}class hp{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,i,n){const l=i.width,o=i.height;if(n){const h=t.width/2/l,c=t.height/2/o,p=t.x/l+h,m=t.y/o+c;n=ye.add(n,ye.NW),this.x0=p+h*ye.uX(n),this.y0=m+c*ye.uY(n),n=ye.add(n,2),this.x1=p+h*ye.uX(n),this.y1=m+c*ye.uY(n),n=ye.add(n,2),this.x2=p+h*ye.uX(n),this.y2=m+c*ye.uY(n),n=ye.add(n,2),this.x3=p+h*ye.uX(n),this.y3=m+c*ye.uY(n)}else this.x0=t.x/l,this.y0=t.y/o,this.x1=(t.x+t.width)/l,this.y1=t.y/o,this.x2=(t.x+t.width)/l,this.y2=(t.y+t.height)/o,this.x3=t.x/l,this.y3=(t.y+t.height)/o;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}hp.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const Xv=new hp;function Yo(s){s.destroy=function(){},s.on=function(){},s.once=function(){},s.emit=function(){}}class St extends xl{constructor(t,i,n,l,o,h,c){if(super(),this.noFrame=!1,i||(this.noFrame=!0,i=new Ht(0,0,1,1)),t instanceof St&&(t=t.baseTexture),this.baseTexture=t,this._frame=i,this.trim=l,this.valid=!1,this.destroyed=!1,this._uvs=Xv,this.uvMatrix=null,this.orig=n||i,this._rotate=Number(o||0),o===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=h?new $t(h.x,h.y):new $t(0,0),this.defaultBorders=c,this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=i:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:i}=this.baseTexture;i?.url&&Zi[i.url]&&St.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,St.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){const t=this._frame.clone(),i=this._frame===this.orig?t:this.orig.clone(),n=new St(this.baseTexture,!this.noFrame&&t,i,this.trim?.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(n._frame=t),n}updateUvs(){this._uvs===Xv&&(this._uvs=new hp),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,i={},n=gt.STRICT_TEXTURE_CACHE){const l=typeof t=="string";let o=null;if(l)o=t;else if(t instanceof Gt){if(!t.cacheId){const c=i?.pixiIdPrefix||"pixiid";t.cacheId=`${c}-${Jn()}`,Gt.addToCache(t,t.cacheId)}o=t.cacheId}else{if(!t._pixiId){const c=i?.pixiIdPrefix||"pixiid";t._pixiId=`${c}_${Jn()}`}o=t._pixiId}let h=Zi[o];if(l&&n&&!h)throw new Error(`The cacheId "${o}" does not exist in TextureCache.`);return!h&&!(t instanceof Gt)?(i.resolution||(i.resolution=Ir(t)),h=new St(new Gt(t,i)),h.baseTexture.cacheId=o,Gt.addToCache(h.baseTexture,o),St.addToCache(h,o)):!h&&t instanceof Gt&&(h=new St(t),St.addToCache(h,o)),h}static fromURL(t,i){const n=Object.assign({autoLoad:!1},i?.resourceOptions),l=St.from(t,Object.assign({resourceOptions:n},i),!1),o=l.baseTexture.resource;return l.baseTexture.valid?Promise.resolve(l):o.load().then(()=>Promise.resolve(l))}static fromBuffer(t,i,n,l){return new St(Gt.fromBuffer(t,i,n,l))}static fromLoader(t,i,n,l){const o=new Gt(t,Object.assign({scaleMode:Gt.defaultOptions.scaleMode,resolution:Ir(i)},l)),{resource:h}=o;h instanceof q_&&(h.url=i);const c=new St(o);return n||(n=i),Gt.addToCache(c.baseTexture,n),St.addToCache(c,n),n!==i&&(Gt.addToCache(c.baseTexture,i),St.addToCache(c,i)),c.baseTexture.valid?Promise.resolve(c):new Promise(p=>{c.baseTexture.once("loaded",()=>p(c))})}static addToCache(t,i){i&&(t.textureCacheIds.includes(i)||t.textureCacheIds.push(i),Zi[i]&&Zi[i]!==t&&console.warn(`Texture added to the cache with an id [${i}] that already had an entry`),Zi[i]=t)}static removeFromCache(t){if(typeof t=="string"){const i=Zi[t];if(i){const n=i.textureCacheIds.indexOf(t);return n>-1&&i.textureCacheIds.splice(n,1),delete Zi[t],i}}else if(t?.textureCacheIds){for(let i=0;i<t.textureCacheIds.length;++i)Zi[t.textureCacheIds[i]]===t&&delete Zi[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:i,y:n,width:l,height:o}=t,h=i+l>this.baseTexture.width,c=n+o>this.baseTexture.height;if(h||c){const p=h&&c?"and":"or",m=`X: ${i} + ${l} = ${i+l} > ${this.baseTexture.width}`,g=`Y: ${n} + ${o} = ${n+o} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${m} ${p} ${g}`)}this.valid=l&&o&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return St._EMPTY||(St._EMPTY=new St(new Gt),Yo(St._EMPTY),Yo(St._EMPTY.baseTexture)),St._EMPTY}static get WHITE(){if(!St._WHITE){const t=gt.ADAPTER.createCanvas(16,16),i=t.getContext("2d");t.width=16,t.height=16,i.fillStyle="white",i.fillRect(0,0,16,16),St._WHITE=new St(Gt.from(t)),Yo(St._WHITE),Yo(St._WHITE.baseTexture)}return St._WHITE}}class is extends St{constructor(t,i){super(t,i),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,i,n=!0){const l=this.baseTexture.resolution,o=Math.round(t*l)/l,h=Math.round(i*l)/l;this.valid=o>0&&h>0,this._frame.width=this.orig.width=o,this._frame.height=this.orig.height=h,n&&this.baseTexture.resize(o,h),this.updateUvs()}setResolution(t){const{baseTexture:i}=this;i.resolution!==t&&(i.setResolution(t),this.resize(i.width,i.height,!1))}static create(t){return new is(new j_(t))}}class Y_{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,i,n=De.NONE){const l=new j_(Object.assign({width:t,height:i,resolution:1,multisample:n},this.textureOptions));return new is(l)}getOptimalTexture(t,i,n=1,l=De.NONE){let o;t=Math.max(Math.ceil(t*n-1e-6),1),i=Math.max(Math.ceil(i*n-1e-6),1),!this.enableFullScreen||t!==this._pixelsWidth||i!==this._pixelsHeight?(t=mu(t),i=mu(i),o=((t&65535)<<16|i&65535)>>>0,l>1&&(o+=l*4294967296)):o=l>1?-l:-1,this.texturePool[o]||(this.texturePool[o]=[]);let h=this.texturePool[o].pop();return h||(h=this.createTexture(t,i,l)),h.filterPoolKey=o,h.setResolution(n),h}getFilterTexture(t,i,n){const l=this.getOptimalTexture(t.width,t.height,i||t.resolution,n||De.NONE);return l.filterFrame=t.filterFrame,l}returnTexture(t){const i=t.filterPoolKey;t.filterFrame=null,this.texturePool[i].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(const i in this.texturePool){const n=this.texturePool[i];if(n)for(let l=0;l<n.length;l++)n[l].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(const i in this.texturePool){if(!(Number(i)<0))continue;const n=this.texturePool[i];if(n)for(let l=0;l<n.length;l++)n[l].destroy(!0);this.texturePool[i]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}Y_.SCREEN_KEY=-1;class sA extends vn{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class W_ extends vn{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Ae(this.vertices),this.uvBuffer=new Ae(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,i){let n=0,l=0;return this.uvs[0]=n,this.uvs[1]=l,this.uvs[2]=n+i.width/t.width,this.uvs[3]=l,this.uvs[4]=n+i.width/t.width,this.uvs[5]=l+i.height/t.height,this.uvs[6]=n,this.uvs[7]=l+i.height/t.height,n=i.x,l=i.y,this.vertices[0]=n,this.vertices[1]=l,this.vertices[2]=n+i.width,this.vertices[3]=l,this.vertices[4]=n+i.width,this.vertices[5]=l+i.height,this.vertices[6]=n,this.vertices[7]=l+i.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class aA{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=De.NONE,this.sourceFrame=new Ht,this.destinationFrame=new Ht,this.bindingSourceFrame=new Ht,this.bindingDestinationFrame=new Ht,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const Wo=[new $t,new $t,new $t,new $t],ld=new de;class $_{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new Y_,this.statePool=[],this.quad=new sA,this.quadUv=new W_,this.tempRect=new Ht,this.activeState={},this.globalUniforms=new Hi({outputFrame:new Ht,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,i){const n=this.renderer,l=this.defaultFilterStack,o=this.statePool.pop()||new aA,h=n.renderTexture;let c,p;if(h.current){const A=h.current;c=A.resolution,p=A.multisample}else c=n.resolution,p=n.multisample;let m=i[0].resolution||c,g=i[0].multisample??p,y=i[0].padding,x=i[0].autoFit,_=i[0].legacy??!0;for(let A=1;A<i.length;A++){const C=i[A];m=Math.min(m,C.resolution||c),g=Math.min(g,C.multisample??p),y=this.useMaxPadding?Math.max(y,C.padding):y+C.padding,x=x&&C.autoFit,_=_||(C.legacy??!0)}l.length===1&&(this.defaultFilterStack[0].renderTexture=h.current),l.push(o),o.resolution=m,o.multisample=g,o.legacy=_,o.target=t,o.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),o.sourceFrame.pad(y);const b=this.tempRect.copyFrom(h.sourceFrame);n.projection.transform&&this.transformAABB(ld.copyFrom(n.projection.transform).invert(),b),x?(o.sourceFrame.fit(b),(o.sourceFrame.width<=0||o.sourceFrame.height<=0)&&(o.sourceFrame.width=0,o.sourceFrame.height=0)):o.sourceFrame.intersects(b)||(o.sourceFrame.width=0,o.sourceFrame.height=0),this.roundFrame(o.sourceFrame,h.current?h.current.resolution:n.resolution,h.sourceFrame,h.destinationFrame,n.projection.transform),o.renderTexture=this.getOptimalFilterTexture(o.sourceFrame.width,o.sourceFrame.height,m,g),o.filters=i,o.destinationFrame.width=o.renderTexture.width,o.destinationFrame.height=o.renderTexture.height;const w=this.tempRect;w.x=0,w.y=0,w.width=o.sourceFrame.width,w.height=o.sourceFrame.height,o.renderTexture.filterFrame=o.sourceFrame,o.bindingSourceFrame.copyFrom(h.sourceFrame),o.bindingDestinationFrame.copyFrom(h.destinationFrame),o.transform=n.projection.transform,n.projection.transform=null,h.bind(o.renderTexture,o.sourceFrame,w),n.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,i=t.pop(),n=i.filters;this.activeState=i;const l=this.globalUniforms.uniforms;l.outputFrame=i.sourceFrame,l.resolution=i.resolution;const o=l.inputSize,h=l.inputPixel,c=l.inputClamp;if(o[0]=i.destinationFrame.width,o[1]=i.destinationFrame.height,o[2]=1/o[0],o[3]=1/o[1],h[0]=Math.round(o[0]*i.resolution),h[1]=Math.round(o[1]*i.resolution),h[2]=1/h[0],h[3]=1/h[1],c[0]=.5*h[2],c[1]=.5*h[3],c[2]=i.sourceFrame.width*o[2]-.5*h[2],c[3]=i.sourceFrame.height*o[3]-.5*h[3],i.legacy){const m=l.filterArea;m[0]=i.destinationFrame.width,m[1]=i.destinationFrame.height,m[2]=i.sourceFrame.x,m[3]=i.sourceFrame.y,l.filterClamp=l.inputClamp}this.globalUniforms.update();const p=t[t.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,i.renderTexture,p.renderTexture,tr.BLEND,i),this.returnFilterTexture(i.renderTexture);else{let m=i.renderTexture,g=this.getOptimalFilterTexture(m.width,m.height,i.resolution);g.filterFrame=m.filterFrame;let y=0;for(y=0;y<n.length-1;++y){y===1&&i.multisample>1&&(g=this.getOptimalFilterTexture(m.width,m.height,i.resolution),g.filterFrame=m.filterFrame),n[y].apply(this,m,g,tr.CLEAR,i);const x=m;m=g,g=x}n[y].apply(this,m,p.renderTexture,tr.BLEND,i),y>1&&i.multisample>1&&this.returnFilterTexture(i.renderTexture),this.returnFilterTexture(m),this.returnFilterTexture(g)}i.clear(),this.statePool.push(i)}bindAndClear(t,i=tr.CLEAR){const{renderTexture:n,state:l}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t?.filterFrame){const h=this.tempRect;h.x=0,h.y=0,h.width=t.filterFrame.width,h.height=t.filterFrame.height,n.bind(t,t.filterFrame,h)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const o=l.stateId&1||this.forceClear;(i===tr.CLEAR||i===tr.BLIT&&o)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,i,n,l){const o=this.renderer;o.state.set(t.state),this.bindAndClear(n,l),t.uniforms.uSampler=i,t.uniforms.filterGlobals=this.globalUniforms,o.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(i._frame,i.filterFrame),o.geometry.bind(this.quadUv),o.geometry.draw(er.TRIANGLES)):(o.geometry.bind(this.quad),o.geometry.draw(er.TRIANGLE_STRIP))}calculateSpriteMatrix(t,i){const{sourceFrame:n,destinationFrame:l}=this.activeState,{orig:o}=i._texture,h=t.set(l.width,0,0,l.height,n.x,n.y),c=i.worldTransform.copyTo(de.TEMP_MATRIX);return c.invert(),h.prepend(c),h.scale(1/o.width,1/o.height),h.translate(i.anchor.x,i.anchor.y),h}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,i,n=1,l=De.NONE){return this.texturePool.getOptimalTexture(t,i,n,l)}getFilterTexture(t,i,n){if(typeof t=="number"){const o=t;t=i,i=o}t=t||this.activeState.renderTexture;const l=this.texturePool.getOptimalTexture(t.width,t.height,i||t.resolution,n||De.NONE);return l.filterFrame=t.filterFrame,l}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,i){const n=Wo[0],l=Wo[1],o=Wo[2],h=Wo[3];n.set(i.left,i.top),l.set(i.left,i.bottom),o.set(i.right,i.top),h.set(i.right,i.bottom),t.apply(n,n),t.apply(l,l),t.apply(o,o),t.apply(h,h);const c=Math.min(n.x,l.x,o.x,h.x),p=Math.min(n.y,l.y,o.y,h.y),m=Math.max(n.x,l.x,o.x,h.x),g=Math.max(n.y,l.y,o.y,h.y);i.x=c,i.y=p,i.width=m-c,i.height=g-p}roundFrame(t,i,n,l,o){if(!(t.width<=0||t.height<=0||n.width<=0||n.height<=0)){if(o){const{a:h,b:c,c:p,d:m}=o;if((Math.abs(c)>1e-4||Math.abs(p)>1e-4)&&(Math.abs(h)>1e-4||Math.abs(m)>1e-4))return}o=o?ld.copyFrom(o):ld.identity(),o.translate(-n.x,-n.y).scale(l.width/n.width,l.height/n.height).translate(l.x,l.y),this.transformAABB(o,t),t.ceil(i),this.transformAABB(o.invert(),t)}}}$_.extension={type:pt.RendererSystem,name:"filter"};wt.add($_);class lA{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=De.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const oA=new Ht;class Z_{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new Ud(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Ht,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let i=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;gt.PREFER_ENV===es.WEBGL_LEGACY&&(i=null,n=null),i?t.drawBuffers=l=>i.drawBuffersWEBGL(l):(this.hasMRT=!1,t.drawBuffers=()=>{}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,i,n=0){const{gl:l}=this;if(t){const o=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,l.bindFramebuffer(l.FRAMEBUFFER,o.framebuffer)),o.mipLevel!==n&&(t.dirtyId++,t.dirtyFormat++,o.mipLevel=n),o.dirtyId!==t.dirtyId&&(o.dirtyId=t.dirtyId,o.dirtyFormat!==t.dirtyFormat?(o.dirtyFormat=t.dirtyFormat,o.dirtySize=t.dirtySize,this.updateFramebuffer(t,n)):o.dirtySize!==t.dirtySize&&(o.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let h=0;h<t.colorTextures.length;h++){const c=t.colorTextures[h];this.renderer.texture.unbind(c.parentTextureArray||c)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),i){const h=i.width>>n,c=i.height>>n,p=h/i.width;this.setViewport(i.x*p,i.y*p,h,c)}else{const h=t.width>>n,c=t.height>>n;this.setViewport(0,0,h,c)}}else this.current&&(this.current=null,l.bindFramebuffer(l.FRAMEBUFFER,null)),i?this.setViewport(i.x,i.y,i.width,i.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,i,n,l){const o=this.viewport;t=Math.round(t),i=Math.round(i),n=Math.round(n),l=Math.round(l),(o.width!==n||o.height!==l||o.x!==t||o.y!==i)&&(o.x=t,o.y=i,o.width=n,o.height=l,this.gl.viewport(t,i,n,l))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,i,n,l,o=bd.COLOR|bd.DEPTH){const{gl:h}=this;h.clearColor(t,i,n,l),h.clear(o)}initFramebuffer(t){const{gl:i}=this,n=new lA(i.createFramebuffer());return n.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(t),t.disposeRunner.add(this),n}resizeFramebuffer(t){const{gl:i}=this,n=t.glFramebuffers[this.CONTEXT_UID];if(n.stencil){i.bindRenderbuffer(i.RENDERBUFFER,n.stencil);let h;this.renderer.context.webGLVersion===1?h=i.DEPTH_STENCIL:t.depth&&t.stencil?h=i.DEPTH24_STENCIL8:t.depth?h=i.DEPTH_COMPONENT24:h=i.STENCIL_INDEX8,n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,h,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,h,t.width,t.height)}const l=t.colorTextures;let o=l.length;i.drawBuffers||(o=Math.min(o,1));for(let h=0;h<o;h++){const c=l[h],p=c.parentTextureArray||c;this.renderer.texture.bind(p,0),h===0&&n.msaaBuffer&&(i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,p._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,i){const{gl:n}=this,l=t.glFramebuffers[this.CONTEXT_UID],o=t.colorTextures;let h=o.length;n.drawBuffers||(h=Math.min(h,1)),l.multisample>1&&this.canMultisampleFramebuffer(t)?l.msaaBuffer=l.msaaBuffer||n.createRenderbuffer():l.msaaBuffer&&(n.deleteRenderbuffer(l.msaaBuffer),l.msaaBuffer=null,l.blitFramebuffer&&(l.blitFramebuffer.dispose(),l.blitFramebuffer=null));const c=[];for(let p=0;p<h;p++){const m=o[p],g=m.parentTextureArray||m;this.renderer.texture.bind(g,0),p===0&&l.msaaBuffer?(n.bindRenderbuffer(n.RENDERBUFFER,l.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,l.multisample,g._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,l.msaaBuffer)):(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+p,m.target,g._glTextures[this.CONTEXT_UID].texture,i),c.push(n.COLOR_ATTACHMENT0+p))}if(c.length>1&&n.drawBuffers(c),t.depthTexture&&this.writeDepthTexture){const p=t.depthTexture;this.renderer.texture.bind(p,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,p._glTextures[this.CONTEXT_UID].texture,i)}if((t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)){l.stencil=l.stencil||n.createRenderbuffer();let p,m;this.renderer.context.webGLVersion===1?(p=n.DEPTH_STENCIL_ATTACHMENT,m=n.DEPTH_STENCIL):t.depth&&t.stencil?(p=n.DEPTH_STENCIL_ATTACHMENT,m=n.DEPTH24_STENCIL8):t.depth?(p=n.DEPTH_ATTACHMENT,m=n.DEPTH_COMPONENT24):(p=n.STENCIL_ATTACHMENT,m=n.STENCIL_INDEX8),n.bindRenderbuffer(n.RENDERBUFFER,l.stencil),l.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,l.multisample,m,t.width,t.height):n.renderbufferStorage(n.RENDERBUFFER,m,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,p,n.RENDERBUFFER,l.stencil)}else l.stencil&&(n.deleteRenderbuffer(l.stencil),l.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:i}=this;let n=De.NONE;if(t<=1||i===null)return n;for(let l=0;l<i.length;l++)if(i[l]<=t){n=i[l];break}return n===1&&(n=De.NONE),n}blit(t,i,n){const{current:l,renderer:o,gl:h,CONTEXT_UID:c}=this;if(o.context.webGLVersion!==2||!l)return;const p=l.glFramebuffers[c];if(!p)return;if(!t){if(!p.msaaBuffer)return;const g=l.colorTextures[0];if(!g)return;p.blitFramebuffer||(p.blitFramebuffer=new Ud(l.width,l.height),p.blitFramebuffer.addColorTexture(0,g)),t=p.blitFramebuffer,t.colorTextures[0]!==g&&(t.colorTextures[0]=g,t.dirtyId++,t.dirtyFormat++),(t.width!==l.width||t.height!==l.height)&&(t.width=l.width,t.height=l.height,t.dirtyId++,t.dirtySize++)}i||(i=oA,i.width=l.width,i.height=l.height),n||(n=i);const m=i.width===n.width&&i.height===n.height;this.bind(t),h.bindFramebuffer(h.READ_FRAMEBUFFER,p.framebuffer),h.blitFramebuffer(i.left,i.top,i.right,i.bottom,n.left,n.top,n.right,n.bottom,h.COLOR_BUFFER_BIT,m?h.NEAREST:h.LINEAR),h.bindFramebuffer(h.READ_FRAMEBUFFER,t.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(t,i){const n=t.glFramebuffers[this.CONTEXT_UID],l=this.gl;if(!n)return;delete t.glFramebuffers[this.CONTEXT_UID];const o=this.managedFramebuffers.indexOf(t);o>=0&&this.managedFramebuffers.splice(o,1),t.disposeRunner.remove(this),i||(l.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&l.deleteRenderbuffer(n.msaaBuffer),n.stencil&&l.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&this.disposeFramebuffer(n.blitFramebuffer,i)}disposeAll(t){const i=this.managedFramebuffers;this.managedFramebuffers=[];for(let n=0;n<i.length;n++)this.disposeFramebuffer(i[n],t)}forceStencil(){const t=this.current;if(!t)return;const i=t.glFramebuffers[this.CONTEXT_UID];if(!i||i.stencil&&t.stencil)return;t.stencil=!0;const n=t.width,l=t.height,o=this.gl,h=i.stencil=o.createRenderbuffer();o.bindRenderbuffer(o.RENDERBUFFER,h);let c,p;this.renderer.context.webGLVersion===1?(c=o.DEPTH_STENCIL_ATTACHMENT,p=o.DEPTH_STENCIL):t.depth?(c=o.DEPTH_STENCIL_ATTACHMENT,p=o.DEPTH24_STENCIL8):(c=o.STENCIL_ATTACHMENT,p=o.STENCIL_INDEX8),i.msaaBuffer?o.renderbufferStorageMultisample(o.RENDERBUFFER,i.multisample,p,n,l):o.renderbufferStorage(o.RENDERBUFFER,p,n,l),o.framebufferRenderbuffer(o.FRAMEBUFFER,c,o.RENDERBUFFER,h)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Ht}destroy(){this.renderer=null}}Z_.extension={type:pt.RendererSystem,name:"framebuffer"};wt.add(Z_);const od={5126:4,5123:2,5121:1};class K_{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,i=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,i.webGLVersion!==2){let n=this.renderer.context.extensions.vertexArrayObject;gt.PREFER_ENV===es.WEBGL_LEGACY&&(n=null),n?(t.createVertexArray=()=>n.createVertexArrayOES(),t.bindVertexArray=l=>n.bindVertexArrayOES(l),t.deleteVertexArray=l=>n.deleteVertexArrayOES(l)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(i.webGLVersion!==2){const n=t.getExtension("ANGLE_instanced_arrays");n?(t.vertexAttribDivisor=(l,o)=>n.vertexAttribDivisorANGLE(l,o),t.drawElementsInstanced=(l,o,h,c,p)=>n.drawElementsInstancedANGLE(l,o,h,c,p),t.drawArraysInstanced=(l,o,h,c)=>n.drawArraysInstancedANGLE(l,o,h,c)):this.hasInstance=!1}this.canUseUInt32ElementIndex=i.webGLVersion===2||!!i.extensions.uint32ElementIndex}bind(t,i){i=i||this.renderer.shader.shader;const{gl:n}=this;let l=t.glVertexArrayObjects[this.CONTEXT_UID],o=!1;l||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=l={},o=!0);const h=l[i.program.id]||this.initGeometryVao(t,i,o);this._activeGeometry=t,this._activeVao!==h&&(this._activeVao=h,this.hasVao?n.bindVertexArray(h):this.activateVao(t,i.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,i=this.renderer.buffer;for(let n=0;n<t.buffers.length;n++){const l=t.buffers[n];i.update(l)}}checkCompatibility(t,i){const n=t.attributes,l=i.attributeData;for(const o in l)if(!n[o])throw new Error(`shader and geometry incompatible, geometry missing the "${o}" attribute`)}getSignature(t,i){const n=t.attributes,l=i.attributeData,o=["g",t.id];for(const h in n)l[h]&&o.push(h,l[h].location);return o.join("-")}initGeometryVao(t,i,n=!0){const l=this.gl,o=this.CONTEXT_UID,h=this.renderer.buffer,c=i.program;c.glPrograms[o]||this.renderer.shader.generateProgram(i),this.checkCompatibility(t,c);const p=this.getSignature(t,c),m=t.glVertexArrayObjects[this.CONTEXT_UID];let g=m[p];if(g)return m[c.id]=g,g;const y=t.buffers,x=t.attributes,_={},b={};for(const w in y)_[w]=0,b[w]=0;for(const w in x)!x[w].size&&c.attributeData[w]?x[w].size=c.attributeData[w].size:x[w].size||console.warn(`PIXI Geometry attribute '${w}' size cannot be determined (likely the bound shader does not have the attribute)`),_[x[w].buffer]+=x[w].size*od[x[w].type];for(const w in x){const A=x[w],C=A.size;A.stride===void 0&&(_[A.buffer]===C*od[A.type]?A.stride=0:A.stride=_[A.buffer]),A.start===void 0&&(A.start=b[A.buffer],b[A.buffer]+=C*od[A.type])}g=l.createVertexArray(),l.bindVertexArray(g);for(let w=0;w<y.length;w++){const A=y[w];h.bind(A),n&&A._glBuffers[o].refCount++}return this.activateVao(t,c),m[c.id]=g,m[p]=g,l.bindVertexArray(null),h.unbind(ir.ARRAY_BUFFER),g}disposeGeometry(t,i){if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const n=t.glVertexArrayObjects[this.CONTEXT_UID],l=this.gl,o=t.buffers,h=this.renderer?.buffer;if(t.disposeRunner.remove(this),!!n){if(h)for(let c=0;c<o.length;c++){const p=o[c]._glBuffers[this.CONTEXT_UID];p&&(p.refCount--,p.refCount===0&&!i&&h.dispose(o[c],i))}if(!i){for(const c in n)if(c[0]==="g"){const p=n[c];this._activeVao===p&&this.unbind(),l.deleteVertexArray(p)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const i=Object.keys(this.managedGeometries);for(let n=0;n<i.length;n++)this.disposeGeometry(this.managedGeometries[i[n]],t)}activateVao(t,i){const n=this.gl,l=this.CONTEXT_UID,o=this.renderer.buffer,h=t.buffers,c=t.attributes;t.indexBuffer&&o.bind(t.indexBuffer);let p=null;for(const m in c){const g=c[m],y=h[g.buffer],x=y._glBuffers[l];if(i.attributeData[m]){p!==x&&(o.bind(y),p=x);const _=i.attributeData[m].location;if(n.enableVertexAttribArray(_),n.vertexAttribPointer(_,g.size,g.type||n.FLOAT,g.normalized,g.stride,g.start),g.instance)if(this.hasInstance)n.vertexAttribDivisor(_,g.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,i,n,l){const{gl:o}=this,h=this._activeGeometry;if(h.indexBuffer){const c=h.indexBuffer.data.BYTES_PER_ELEMENT,p=c===2?o.UNSIGNED_SHORT:o.UNSIGNED_INT;c===2||c===4&&this.canUseUInt32ElementIndex?h.instanced?o.drawElementsInstanced(t,i||h.indexBuffer.data.length,p,(n||0)*c,l||1):o.drawElements(t,i||h.indexBuffer.data.length,p,(n||0)*c):console.warn("unsupported index buffer type: uint32")}else h.instanced?o.drawArraysInstanced(t,n,i||h.getSize(),l||1):o.drawArrays(t,n,i||h.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}K_.extension={type:pt.RendererSystem,name:"geometry"};wt.add(K_);const Vv=new de;class Q_{constructor(t,i){this._texture=t,this.mapCoord=new de,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof i>"u"?.5:i,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,i){i===void 0&&(i=t);const n=this.mapCoord;for(let l=0;l<t.length;l+=2){const o=t[l],h=t[l+1];i[l]=o*n.a+h*n.c+n.tx,i[l+1]=o*n.b+h*n.d+n.ty}return i}update(t){const i=this._texture;if(!i||!i.valid||!t&&this._textureID===i._updateID)return!1;this._textureID=i._updateID,this._updateID++;const n=i._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const l=i.orig,o=i.trim;o&&(Vv.set(l.width/o.width,0,0,l.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(Vv));const h=i.baseTexture,c=this.uClampFrame,p=this.clampMargin/h.resolution,m=this.clampOffset;return c[0]=(i._frame.x+p+m)/h.width,c[1]=(i._frame.y+p+m)/h.height,c[2]=(i._frame.x+i._frame.width-p+m)/h.width,c[3]=(i._frame.y+i._frame.height-p+m)/h.height,this.uClampOffset[0]=m/h.realWidth,this.uClampOffset[1]=m/h.realHeight,this.isSimple=i._frame.width===h.width&&i._frame.height===h.height&&i.rotate===0,!0}}var uA=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,hA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class cA extends Ke{constructor(t,i,n){let l=null;typeof t!="string"&&i===void 0&&n===void 0&&(l=t,t=void 0,i=void 0,n=void 0),super(t||hA,i||uA,n),this.maskSprite=l,this.maskMatrix=new de}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,i,n,l){const o=this._maskSprite,h=o._texture;h.valid&&(h.uvMatrix||(h.uvMatrix=new Q_(h,0)),h.uvMatrix.update(),this.uniforms.npmAlpha=h.baseTexture.alphaMode?0:1,this.uniforms.mask=h,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,o).prepend(h.uvMatrix.mapCoord),this.uniforms.alpha=o.worldAlpha,this.uniforms.maskClamp=h.uvMatrix.uClampFrame,t.applyFilter(this,i,n,l))}}class fA{constructor(t=null){this.type=Be.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Ke.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Be.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class J_{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,i){let n=i;if(!n.isMaskData){const o=this.maskDataPool.pop()||new fA;o.pooled=!0,o.maskObject=i,n=o}const l=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(l),n._colorMask=l?l._colorMask:15,n.autoDetect&&this.detect(n),n._target=t,n.type!==Be.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case Be.SCISSOR:this.renderer.scissor.push(n);break;case Be.STENCIL:this.renderer.stencil.push(n);break;case Be.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case Be.COLOR:this.pushColorMask(n);break}n.type===Be.SPRITE&&this.maskStack.push(n)}pop(t){const i=this.maskStack.pop();if(!(!i||i._target!==t)){if(i.enabled)switch(i.type){case Be.SCISSOR:this.renderer.scissor.pop(i);break;case Be.STENCIL:this.renderer.stencil.pop(i.maskObject);break;case Be.SPRITE:this.popSpriteMask(i);break;case Be.COLOR:this.popColorMask(i);break}if(i.reset(),i.pooled&&this.maskDataPool.push(i),this.maskStack.length!==0){const n=this.maskStack[this.maskStack.length-1];n.type===Be.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}}detect(t){const i=t.maskObject;i?i.isSprite?t.type=Be.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=Be.SCISSOR:t.type=Be.STENCIL:t.type=Be.COLOR}pushSpriteMask(t){const{maskObject:i}=t,n=t._target;let l=t._filters;l||(l=this.alphaMaskPool[this.alphaMaskIndex],l||(l=this.alphaMaskPool[this.alphaMaskIndex]=[new cA])),l[0].resolution=t.resolution,l[0].multisample=t.multisample,l[0].maskSprite=i;const o=n.filterArea;n.filterArea=i.getBounds(!0),this.renderer.filter.push(n,l),n.filterArea=o,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const i=t._colorMask,n=t._colorMask=i&t.colorMask;n!==i&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}popColorMask(t){const i=t._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==i&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}destroy(){this.renderer=null}}J_.extension={type:pt.RendererSystem,name:"mask"};wt.add(J_);class tx{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:i}=this.renderer,n=this.getStackLength();this.maskStack=t;const l=this.getStackLength();l!==n&&(l===0?i.disable(this.glConst):(i.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const jv=new de,qv=[],ex=class lu extends tx{constructor(t){super(t),this.glConst=gt.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){if(t._scissorRectLocal)return;const i=t._scissorRect,{maskObject:n}=t,{renderer:l}=this,o=l.renderTexture,h=n.getBounds(!0,qv.pop()??new Ht);this.roundFrameToPixels(h,o.current?o.current.resolution:l.resolution,o.sourceFrame,o.destinationFrame,l.projection.transform),i&&h.fit(i),t._scissorRectLocal=h}static isMatrixRotated(t){if(!t)return!1;const{a:i,b:n,c:l,d:o}=t;return(Math.abs(n)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(i)>1e-4||Math.abs(o)>1e-4)}testScissor(t){const{maskObject:i}=t;if(!i.isFastRect||!i.isFastRect()||lu.isMatrixRotated(i.worldTransform)||lu.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const n=t._scissorRectLocal;return n.width>0&&n.height>0}roundFrameToPixels(t,i,n,l,o){lu.isMatrixRotated(o)||(o=o?jv.copyFrom(o):jv.identity(),o.translate(-n.x,-n.y).scale(l.width/n.width,l.height/n.height).translate(l.x,l.y),this.renderer.filter.transformAABB(o,t),t.fit(l),t.x=Math.round(t.x*i),t.y=Math.round(t.y*i),t.width=Math.round(t.width*i),t.height=Math.round(t.height*i))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:i}=this.renderer;t._scissorRect||i.enable(i.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:i}=this.renderer;t&&qv.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():i.disable(i.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let i;this.renderer.renderTexture.current?i=t.y:i=this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,i,t.width,t.height)}};ex.extension={type:pt.RendererSystem,name:"scissor"};let dA=ex;wt.add(dA);class ix extends tx{constructor(t){super(t),this.glConst=gt.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const i=t.maskObject,{gl:n}=this.renderer,l=t._stencilCounter;l===0&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),t._stencilCounter++;const o=t._colorMask;o!==0&&(t._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,l,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,o!==0&&(t._colorMask=o,n.colorMask((o&1)!==0,(o&2)!==0,(o&4)!==0,(o&8)!==0)),this._useCurrent()}pop(t){const i=this.renderer.gl;if(this.getStackLength()===0)i.disable(i.STENCIL_TEST);else{const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,l=n?n._colorMask:15;l!==0&&(n._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilOp(i.KEEP,i.KEEP,i.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,l!==0&&(n._colorMask=l,i.colorMask((l&1)!==0,(l&2)!==0,(l&4)!==0,(l&8)!==0)),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}ix.extension={type:pt.RendererSystem,name:"stencil"};wt.add(ix);class rx{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return jt("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return jt("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return jt("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(){const t=this.rendererPlugins;for(const i in t)this.plugins[i]=new t[i](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}rx.extension={type:[pt.RendererSystem,pt.CanvasRendererSystem],name:"_plugin"};wt.add(rx);class nx{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new de,this.transform=null}update(t,i,n,l){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=i||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,l),this.transform&&this.projectionMatrix.append(this.transform);const o=this.renderer;o.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,o.globalUniforms.update(),o.shader.shader&&o.shader.syncUniformGroup(o.shader.shader.uniforms.globals)}calculateProjection(t,i,n,l){const o=this.projectionMatrix,h=l?-1:1;o.identity(),o.a=1/i.width*2,o.d=h*(1/i.height*2),o.tx=-1-i.x*o.a,o.ty=-h-i.y*o.d}setTransform(t){}destroy(){this.renderer=null}}nx.extension={type:pt.RendererSystem,name:"projection"};wt.add(nx);const pA=new up,Yv=new Ht;class sx{constructor(t){this.renderer=t,this._tempMatrix=new de}generateTexture(t,i){const{region:n,...l}=i||{},o=n?.copyTo(Yv)||t.getLocalBounds(Yv,!0),h=l.resolution||this.renderer.resolution;o.width=Math.max(o.width,1/h),o.height=Math.max(o.height,1/h),l.width=o.width,l.height=o.height,l.resolution=h,l.multisample??(l.multisample=this.renderer.multisample);const c=is.create(l);this._tempMatrix.tx=-o.x,this._tempMatrix.ty=-o.y;const p=t.transform;return t.transform=pA,this.renderer.render(t,{renderTexture:c,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=p,c}destroy(){}}sx.extension={type:[pt.RendererSystem,pt.CanvasRendererSystem],name:"textureGenerator"};wt.add(sx);const kn=new Ht,ll=new Ht;class ax{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Ht,this.destinationFrame=new Ht,this.viewportFrame=new Ht}contextChange(){const t=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}bind(t=null,i,n){const l=this.renderer;this.current=t;let o,h,c;t?(o=t.baseTexture,c=o.resolution,i||(kn.width=t.frame.width,kn.height=t.frame.height,i=kn),n||(ll.x=t.frame.x,ll.y=t.frame.y,ll.width=i.width,ll.height=i.height,n=ll),h=o.framebuffer):(c=l.resolution,i||(kn.width=l._view.screen.width,kn.height=l._view.screen.height,i=kn),n||(n=kn,n.width=i.width,n.height=i.height));const p=this.viewportFrame;p.x=n.x*c,p.y=n.y*c,p.width=n.width*c,p.height=n.height*c,t||(p.y=l.view.height-(p.y+p.height)),p.ceil(),this.renderer.framebuffer.bind(h,p),this.renderer.projection.update(n,i,c,!h),t?this.renderer.mask.setMaskStack(o.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(i),this.destinationFrame.copyFrom(n)}clear(t,i){const n=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,l=fe.shared.setValue(t||n);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&l.premultiply(l.alpha);const o=this.destinationFrame,h=this.current?this.current.baseTexture:this.renderer._view.screen,c=o.width!==h.width||o.height!==h.height;if(c){let{x:p,y:m,width:g,height:y}=this.viewportFrame;p=Math.round(p),m=Math.round(m),g=Math.round(g),y=Math.round(y),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(p,m,g,y)}this.renderer.framebuffer.clear(l.red,l.green,l.blue,l.alpha,i),c&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}ax.extension={type:pt.RendererSystem,name:"renderTexture"};wt.add(ax);class mA{constructor(t,i){this.program=t,this.uniformData=i,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function gA(s,t){const i={},n=t.getProgramParameter(s,t.ACTIVE_ATTRIBUTES);for(let l=0;l<n;l++){const o=t.getActiveAttrib(s,l);if(o.name.startsWith("gl_"))continue;const h=X_(t,o.type),c={type:h,name:o.name,size:k_(h),location:t.getAttribLocation(s,o.name)};i[o.name]=c}return i}function yA(s,t){const i={},n=t.getProgramParameter(s,t.ACTIVE_UNIFORMS);for(let l=0;l<n;l++){const o=t.getActiveUniform(s,l),h=o.name.replace(/\[.*?\]$/,""),c=!!o.name.match(/\[.*?\]$/),p=X_(t,o.type);i[h]={name:h,index:l,type:p,size:o.size,isArray:c,value:z_(p,o.size)}}return i}function vA(s,t){const i=Fv(s,s.VERTEX_SHADER,t.vertexSrc),n=Fv(s,s.FRAGMENT_SHADER,t.fragmentSrc),l=s.createProgram();s.attachShader(l,i),s.attachShader(l,n);const o=t.extra?.transformFeedbackVaryings;if(o&&(typeof s.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):s.transformFeedbackVaryings(l,o.names,o.bufferMode==="separate"?s.SEPARATE_ATTRIBS:s.INTERLEAVED_ATTRIBS)),s.linkProgram(l),s.getProgramParameter(l,s.LINK_STATUS)||YE(s,l,i,n),t.attributeData=gA(l,s),t.uniformData=yA(l,s),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const c=Object.keys(t.attributeData);c.sort((p,m)=>p>m?1:-1);for(let p=0;p<c.length;p++)t.attributeData[c[p]].location=p,s.bindAttribLocation(l,p,c[p]);s.linkProgram(l)}s.deleteShader(i),s.deleteShader(n);const h={};for(const c in t.uniformData){const p=t.uniformData[c];h[c]={location:s.getUniformLocation(l,c),value:z_(p.type,p.size)}}return new mA(l,h)}function _A(s,t,i,n,l){i.buffer.update(l)}const xA={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},lx={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function bA(s){const t=s.map(o=>({data:o,offset:0,dataLen:0,dirty:0}));let i=0,n=0,l=0;for(let o=0;o<t.length;o++){const h=t[o];if(i=lx[h.data.type],h.data.size>1&&(i=Math.max(i,16)*h.data.size),h.dataLen=i,n%i!==0&&n<16){const c=n%i%16;n+=c,l+=c}n+i>16?(l=Math.ceil(l/16)*16,h.offset=l,l+=i,n=i):(h.offset=l,n+=i,l+=i)}return l=Math.ceil(l/16)*16,{uboElements:t,size:l}}function TA(s,t){const i=[];for(const n in s)t[n]&&i.push(t[n]);return i.sort((n,l)=>n.index-l.index),i}function EA(s,t){if(!s.autoManage)return{size:0,syncFunc:_A};const i=TA(s.uniforms,t),{uboElements:n,size:l}=bA(i),o=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let h=0;h<n.length;h++){const c=n[h],p=s.uniforms[c.data.name],m=c.data.name;let g=!1;for(let y=0;y<ea.length;y++){const x=ea[y];if(x.codeUbo&&x.test(c.data,p)){o.push(`offset = ${c.offset/4};`,ea[y].codeUbo(c.data.name,p)),g=!0;break}}if(!g)if(c.data.size>1){const y=k_(c.data.type),x=Math.max(lx[c.data.type]/16,1),_=y/x,b=(4-_%4)%4;o.push(`
                cv = ud.${m}.value;
                v = uv.${m};
                offset = ${c.offset/4};

                t = 0;

                for(var i=0; i < ${c.data.size*x}; i++)
                {
                    for(var j = 0; j < ${_}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${b};
                }

                `)}else{const y=xA[c.data.type];o.push(`
                cv = ud.${m}.value;
                v = uv.${m};
                offset = ${c.offset/4};
                ${y};
                `)}}return o.push(`
       renderer.buffer.update(buffer);
    `),{size:l,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join(`
`))}}let AA=0;const $o={textureCount:0,uboCount:0};class ox{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=AA++}systemCheck(){if(!$E())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,i){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const n=t.program,l=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==n&&(this.program=n,this.gl.useProgram(l.program)),i||($o.textureCount=0,$o.uboCount=0,this.syncUniformGroup(t.uniformGroup,$o)),l}setUniforms(t){const i=this.shader.program,n=i.glPrograms[this.renderer.CONTEXT_UID];i.syncUniforms(n.uniformData,t,this.renderer)}syncUniformGroup(t,i){const n=this.getGlProgram();(!t.static||t.dirtyId!==n.uniformDirtyGroups[t.id])&&(n.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,n,i))}syncUniforms(t,i,n){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(i.uniformData,t.uniforms,this.renderer,n)}createSyncGroups(t){const i=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[i]||(this.cache[i]=VE(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[i],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,i){const n=this.getGlProgram();if(!t.static||t.dirtyId!==0||!n.uniformGroups[t.id]){t.dirtyId=0;const l=n.uniformGroups[t.id]||this.createSyncBufferGroup(t,n,i);t.buffer.update(),l(n.uniformData,t.uniforms,this.renderer,$o,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,n.uniformBufferBindings[i])}createSyncBufferGroup(t,i,n){const{gl:l}=this.renderer;this.renderer.buffer.bind(t.buffer);const o=this.gl.getUniformBlockIndex(i.program,n);i.uniformBufferBindings[n]=this.shader.uniformBindCount,l.uniformBlockBinding(i.program,o,this.shader.uniformBindCount),this.shader.uniformBindCount++;const h=this.getSignature(t,this.shader.program.uniformData,"ubo");let c=this._uboCache[h];if(c||(c=this._uboCache[h]=EA(t,this.shader.program.uniformData)),t.autoManage){const p=new Float32Array(c.size/4);t.buffer.update(p)}return i.uniformGroups[t.id]=c.syncFunc,i.uniformGroups[t.id]}getSignature(t,i,n){const l=t.uniforms,o=[`${n}-`];for(const h in l)o.push(h),i[h]&&o.push(i[h].type);return o.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const i=this.gl,n=t.program,l=vA(i,n);return n.glPrograms[this.renderer.CONTEXT_UID]=l,l}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}ox.extension={type:pt.RendererSystem,name:"shader"};wt.add(ox);class xu{constructor(t){this.renderer=t}run(t){const{renderer:i}=this;i.runners.init.emit(i.options),t.hello&&console.log(`PixiJS 7.4.3 - ${i.rendererLogId} - https://pixijs.com`),i.resize(i.screen.width,i.screen.height)}destroy(){}}xu.defaultOptions={hello:!1},xu.extension={type:[pt.RendererSystem,pt.CanvasRendererSystem],name:"startup"};wt.add(xu);function SA(s,t=[]){return t[Nt.NORMAL]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Nt.ADD]=[s.ONE,s.ONE],t[Nt.MULTIPLY]=[s.DST_COLOR,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Nt.SCREEN]=[s.ONE,s.ONE_MINUS_SRC_COLOR,s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Nt.OVERLAY]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Nt.DARKEN]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Nt.LIGHTEN]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Nt.COLOR_DODGE]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Nt.COLOR_BURN]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Nt.HARD_LIGHT]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Nt.SOFT_LIGHT]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Nt.DIFFERENCE]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Nt.EXCLUSION]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Nt.HUE]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Nt.SATURATION]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Nt.COLOR]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Nt.LUMINOSITY]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Nt.NONE]=[0,0],t[Nt.NORMAL_NPM]=[s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Nt.ADD_NPM]=[s.SRC_ALPHA,s.ONE,s.ONE,s.ONE],t[Nt.SCREEN_NPM]=[s.SRC_ALPHA,s.ONE_MINUS_SRC_COLOR,s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Nt.SRC_IN]=[s.DST_ALPHA,s.ZERO],t[Nt.SRC_OUT]=[s.ONE_MINUS_DST_ALPHA,s.ZERO],t[Nt.SRC_ATOP]=[s.DST_ALPHA,s.ONE_MINUS_SRC_ALPHA],t[Nt.DST_OVER]=[s.ONE_MINUS_DST_ALPHA,s.ONE],t[Nt.DST_IN]=[s.ZERO,s.SRC_ALPHA],t[Nt.DST_OUT]=[s.ZERO,s.ONE_MINUS_SRC_ALPHA],t[Nt.DST_ATOP]=[s.ONE_MINUS_DST_ALPHA,s.SRC_ALPHA],t[Nt.XOR]=[s.ONE_MINUS_DST_ALPHA,s.ONE_MINUS_SRC_ALPHA],t[Nt.SUBTRACT]=[s.ONE,s.ONE,s.ONE,s.ONE,s.FUNC_REVERSE_SUBTRACT,s.FUNC_ADD],t}const wA=0,CA=1,RA=2,MA=3,DA=4,OA=5,ux=class Ld{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Nt.NONE,this._blendEq=!1,this.map=[],this.map[wA]=this.setBlend,this.map[CA]=this.setOffset,this.map[RA]=this.setCullFace,this.map[MA]=this.setDepthTest,this.map[DA]=this.setFrontFace,this.map[OA]=this.setDepthMask,this.checks=[],this.defaultState=new sr,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=SA(t),this.set(this.defaultState),this.reset()}set(t){if(t=t||this.defaultState,this.stateId!==t.data){let i=this.stateId^t.data,n=0;for(;i;)i&1&&this.map[n].call(this,!!(t.data&1<<n)),i=i>>1,n++;this.stateId=t.data}for(let i=0;i<this.checks.length;i++)this.checks[i](this,t)}forceState(t){t=t||this.defaultState;for(let i=0;i<this.map.length;i++)this.map[i].call(this,!!(t.data&1<<i));for(let i=0;i<this.checks.length;i++)this.checks[i](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(Ld.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(Ld.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const i=this.blendModes[t],n=this.gl;i.length===2?n.blendFunc(i[0],i[1]):n.blendFuncSeparate(i[0],i[1],i[2],i[3]),i.length===6?(this._blendEq=!0,n.blendEquationSeparate(i[4],i[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(t,i){this.gl.polygonOffset(t,i)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,i){const n=this.checks.indexOf(t);i&&n===-1?this.checks.push(t):!i&&n!==-1&&this.checks.splice(n,1)}static checkBlendMode(t,i){t.setBlendMode(i.blendMode)}static checkPolygonOffset(t,i){t.setPolygonOffset(1,i.polygonOffset)}destroy(){this.gl=null}};ux.extension={type:pt.RendererSystem,name:"state"};let BA=ux;wt.add(BA);class IA extends xl{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const i=(t.priority??[]).filter(l=>t.systems[l]),n=[...i,...Object.keys(t.systems).filter(l=>!i.includes(l))];for(const l of n)this.addSystem(t.systems[l],l)}addRunners(...t){t.forEach(i=>{this.runners[i]=new zi(i)})}addSystem(t,i){const n=new t(this);if(this[i])throw new Error(`Whoops! The name "${i}" is already in use`);this[i]=n,this._systemsHash[i]=n;for(const l in this.runners)this.runners[l].add(n);return this}emitWithCustomOptions(t,i){const n=Object.keys(this._systemsHash);t.items.forEach(l=>{const o=n.find(h=>this._systemsHash[h]===l);l[t.name](i[o])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const fl=class ou{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=ou.defaultMaxIdle,this.checkCountMax=ou.defaultCheckCountMax,this.mode=ou.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==sp.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this.renderer.texture,i=t.managedTextures;let n=!1;for(let l=0;l<i.length;l++){const o=i[l];o.resource&&this.count-o.touched>this.maxIdle&&(t.destroyTexture(o,!0),i[l]=null,n=!0)}if(n){let l=0;for(let o=0;o<i.length;o++)i[o]!==null&&(i[l++]=i[o]);i.length=l}}unload(t){const i=this.renderer.texture,n=t._texture;n&&!n.framebuffer&&i.destroyTexture(n);for(let l=t.children.length-1;l>=0;l--)this.unload(t.children[l])}destroy(){this.renderer=null}};fl.defaultMode=sp.AUTO,fl.defaultMaxIdle=3600,fl.defaultCheckCountMax=600,fl.extension={type:pt.RendererSystem,name:"textureGC"};let $n=fl;wt.add($n);class ud{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Dt.UNSIGNED_BYTE,this.internalFormat=ht.RGBA,this.samplerType=0}}function NA(s){let t;return"WebGL2RenderingContext"in globalThis&&s instanceof globalThis.WebGL2RenderingContext?t={[s.RGB]:mt.FLOAT,[s.RGBA]:mt.FLOAT,[s.ALPHA]:mt.FLOAT,[s.LUMINANCE]:mt.FLOAT,[s.LUMINANCE_ALPHA]:mt.FLOAT,[s.R8]:mt.FLOAT,[s.R8_SNORM]:mt.FLOAT,[s.RG8]:mt.FLOAT,[s.RG8_SNORM]:mt.FLOAT,[s.RGB8]:mt.FLOAT,[s.RGB8_SNORM]:mt.FLOAT,[s.RGB565]:mt.FLOAT,[s.RGBA4]:mt.FLOAT,[s.RGB5_A1]:mt.FLOAT,[s.RGBA8]:mt.FLOAT,[s.RGBA8_SNORM]:mt.FLOAT,[s.RGB10_A2]:mt.FLOAT,[s.RGB10_A2UI]:mt.FLOAT,[s.SRGB8]:mt.FLOAT,[s.SRGB8_ALPHA8]:mt.FLOAT,[s.R16F]:mt.FLOAT,[s.RG16F]:mt.FLOAT,[s.RGB16F]:mt.FLOAT,[s.RGBA16F]:mt.FLOAT,[s.R32F]:mt.FLOAT,[s.RG32F]:mt.FLOAT,[s.RGB32F]:mt.FLOAT,[s.RGBA32F]:mt.FLOAT,[s.R11F_G11F_B10F]:mt.FLOAT,[s.RGB9_E5]:mt.FLOAT,[s.R8I]:mt.INT,[s.R8UI]:mt.UINT,[s.R16I]:mt.INT,[s.R16UI]:mt.UINT,[s.R32I]:mt.INT,[s.R32UI]:mt.UINT,[s.RG8I]:mt.INT,[s.RG8UI]:mt.UINT,[s.RG16I]:mt.INT,[s.RG16UI]:mt.UINT,[s.RG32I]:mt.INT,[s.RG32UI]:mt.UINT,[s.RGB8I]:mt.INT,[s.RGB8UI]:mt.UINT,[s.RGB16I]:mt.INT,[s.RGB16UI]:mt.UINT,[s.RGB32I]:mt.INT,[s.RGB32UI]:mt.UINT,[s.RGBA8I]:mt.INT,[s.RGBA8UI]:mt.UINT,[s.RGBA16I]:mt.INT,[s.RGBA16UI]:mt.UINT,[s.RGBA32I]:mt.INT,[s.RGBA32UI]:mt.UINT,[s.DEPTH_COMPONENT16]:mt.FLOAT,[s.DEPTH_COMPONENT24]:mt.FLOAT,[s.DEPTH_COMPONENT32F]:mt.FLOAT,[s.DEPTH_STENCIL]:mt.FLOAT,[s.DEPTH24_STENCIL8]:mt.FLOAT,[s.DEPTH32F_STENCIL8]:mt.FLOAT}:t={[s.RGB]:mt.FLOAT,[s.RGBA]:mt.FLOAT,[s.ALPHA]:mt.FLOAT,[s.LUMINANCE]:mt.FLOAT,[s.LUMINANCE_ALPHA]:mt.FLOAT,[s.DEPTH_STENCIL]:mt.FLOAT},t}function UA(s){let t;return"WebGL2RenderingContext"in globalThis&&s instanceof globalThis.WebGL2RenderingContext?t={[Dt.UNSIGNED_BYTE]:{[ht.RGBA]:s.RGBA8,[ht.RGB]:s.RGB8,[ht.RG]:s.RG8,[ht.RED]:s.R8,[ht.RGBA_INTEGER]:s.RGBA8UI,[ht.RGB_INTEGER]:s.RGB8UI,[ht.RG_INTEGER]:s.RG8UI,[ht.RED_INTEGER]:s.R8UI,[ht.ALPHA]:s.ALPHA,[ht.LUMINANCE]:s.LUMINANCE,[ht.LUMINANCE_ALPHA]:s.LUMINANCE_ALPHA},[Dt.BYTE]:{[ht.RGBA]:s.RGBA8_SNORM,[ht.RGB]:s.RGB8_SNORM,[ht.RG]:s.RG8_SNORM,[ht.RED]:s.R8_SNORM,[ht.RGBA_INTEGER]:s.RGBA8I,[ht.RGB_INTEGER]:s.RGB8I,[ht.RG_INTEGER]:s.RG8I,[ht.RED_INTEGER]:s.R8I},[Dt.UNSIGNED_SHORT]:{[ht.RGBA_INTEGER]:s.RGBA16UI,[ht.RGB_INTEGER]:s.RGB16UI,[ht.RG_INTEGER]:s.RG16UI,[ht.RED_INTEGER]:s.R16UI,[ht.DEPTH_COMPONENT]:s.DEPTH_COMPONENT16},[Dt.SHORT]:{[ht.RGBA_INTEGER]:s.RGBA16I,[ht.RGB_INTEGER]:s.RGB16I,[ht.RG_INTEGER]:s.RG16I,[ht.RED_INTEGER]:s.R16I},[Dt.UNSIGNED_INT]:{[ht.RGBA_INTEGER]:s.RGBA32UI,[ht.RGB_INTEGER]:s.RGB32UI,[ht.RG_INTEGER]:s.RG32UI,[ht.RED_INTEGER]:s.R32UI,[ht.DEPTH_COMPONENT]:s.DEPTH_COMPONENT24},[Dt.INT]:{[ht.RGBA_INTEGER]:s.RGBA32I,[ht.RGB_INTEGER]:s.RGB32I,[ht.RG_INTEGER]:s.RG32I,[ht.RED_INTEGER]:s.R32I},[Dt.FLOAT]:{[ht.RGBA]:s.RGBA32F,[ht.RGB]:s.RGB32F,[ht.RG]:s.RG32F,[ht.RED]:s.R32F,[ht.DEPTH_COMPONENT]:s.DEPTH_COMPONENT32F},[Dt.HALF_FLOAT]:{[ht.RGBA]:s.RGBA16F,[ht.RGB]:s.RGB16F,[ht.RG]:s.RG16F,[ht.RED]:s.R16F},[Dt.UNSIGNED_SHORT_5_6_5]:{[ht.RGB]:s.RGB565},[Dt.UNSIGNED_SHORT_4_4_4_4]:{[ht.RGBA]:s.RGBA4},[Dt.UNSIGNED_SHORT_5_5_5_1]:{[ht.RGBA]:s.RGB5_A1},[Dt.UNSIGNED_INT_2_10_10_10_REV]:{[ht.RGBA]:s.RGB10_A2,[ht.RGBA_INTEGER]:s.RGB10_A2UI},[Dt.UNSIGNED_INT_10F_11F_11F_REV]:{[ht.RGB]:s.R11F_G11F_B10F},[Dt.UNSIGNED_INT_5_9_9_9_REV]:{[ht.RGB]:s.RGB9_E5},[Dt.UNSIGNED_INT_24_8]:{[ht.DEPTH_STENCIL]:s.DEPTH24_STENCIL8},[Dt.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[ht.DEPTH_STENCIL]:s.DEPTH32F_STENCIL8}}:t={[Dt.UNSIGNED_BYTE]:{[ht.RGBA]:s.RGBA,[ht.RGB]:s.RGB,[ht.ALPHA]:s.ALPHA,[ht.LUMINANCE]:s.LUMINANCE,[ht.LUMINANCE_ALPHA]:s.LUMINANCE_ALPHA},[Dt.UNSIGNED_SHORT_5_6_5]:{[ht.RGB]:s.RGB},[Dt.UNSIGNED_SHORT_4_4_4_4]:{[ht.RGBA]:s.RGBA},[Dt.UNSIGNED_SHORT_5_5_5_1]:{[ht.RGBA]:s.RGBA}},t}class hx{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Gt,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=UA(t),this.samplerTypes=NA(t);const i=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=i;for(let l=0;l<i;l++)this.boundTextures[l]=null;this.emptyTextures={};const n=new ud(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new ud(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let l=0;l<6;l++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let l=0;l<this.boundTextures.length;l++)this.bind(null,l)}bind(t,i=0){const{gl:n}=this;if(t=t?.castToBaseTexture(),t?.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const l=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[i]!==t&&(this.currentLocation!==i&&(this.currentLocation=i,n.activeTexture(n.TEXTURE0+i)),n.bindTexture(t.target,l.texture)),l.dirtyId!==t.dirtyId?(this.currentLocation!==i&&(this.currentLocation=i,n.activeTexture(n.TEXTURE0+i)),this.updateTexture(t)):l.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[i]=t}else this.currentLocation!==i&&(this.currentLocation=i,n.activeTexture(n.TEXTURE0+i)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[i]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:i,boundTextures:n}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let l=0;l<n.length;l++)n[l]===this.unknownTexture&&this.bind(null,l)}for(let l=0;l<n.length;l++)n[l]===t&&(this.currentLocation!==l&&(i.activeTexture(i.TEXTURE0+l),this.currentLocation=l),i.bindTexture(t.target,this.emptyTextures[t.target].texture),n[l]=null)}ensureSamplerType(t){const{boundTextures:i,hasIntegerTextures:n,CONTEXT_UID:l}=this;if(n)for(let o=t-1;o>=0;--o){const h=i[o];h&&h._glTextures[l].samplerType!==mt.FLOAT&&this.renderer.texture.unbind(h)}}initTexture(t){const i=new ud(this.gl.createTexture());return i.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=i,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),i}initTextureType(t,i){i.internalFormat=this.internalFormats[t.type]?.[t.format]??t.format,i.samplerType=this.samplerTypes[i.internalFormat]??mt.FLOAT,this.webGLVersion===2&&t.type===Dt.HALF_FLOAT?i.type=this.gl.HALF_FLOAT:i.type=t.type}updateTexture(t){const i=t._glTextures[this.CONTEXT_UID];if(!i)return;const n=this.renderer;if(this.initTextureType(t,i),t.resource?.upload(n,t,i))i.samplerType!==mt.FLOAT&&(this.hasIntegerTextures=!0);else{const l=t.realWidth,o=t.realHeight,h=n.gl;(i.width!==l||i.height!==o||i.dirtyId<0)&&(i.width=l,i.height=o,h.texImage2D(t.target,0,i.internalFormat,l,o,0,t.format,i.type,null))}t.dirtyStyleId!==i.dirtyStyleId&&this.updateTextureStyle(t),i.dirtyId=t.dirtyId}destroyTexture(t,i){const{gl:n}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),n.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!i)){const l=this.managedTextures.indexOf(t);l!==-1&&ta(this.managedTextures,l,1)}}updateTextureStyle(t){const i=t._glTextures[this.CONTEXT_UID];i&&((t.mipmap===nr.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?i.mipmap=!1:i.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?i.wrapMode=yn.CLAMP:i.wrapMode=t.wrapMode,t.resource?.style(this.renderer,t,i)||this.setStyle(t,i),i.dirtyStyleId=t.dirtyStyleId)}setStyle(t,i){const n=this.gl;if(i.mipmap&&t.mipmap!==nr.ON_MANUAL&&n.generateMipmap(t.target),n.texParameteri(t.target,n.TEXTURE_WRAP_S,i.wrapMode),n.texParameteri(t.target,n.TEXTURE_WRAP_T,i.wrapMode),i.mipmap){n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===Mr.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);const l=this.renderer.context.extensions.anisotropicFiltering;if(l&&t.anisotropicLevel>0&&t.scaleMode===Mr.LINEAR){const o=Math.min(t.anisotropicLevel,n.getParameter(l.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(t.target,l.TEXTURE_MAX_ANISOTROPY_EXT,o)}}else n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===Mr.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(t.target,n.TEXTURE_MAG_FILTER,t.scaleMode===Mr.LINEAR?n.LINEAR:n.NEAREST)}destroy(){this.renderer=null}}hx.extension={type:pt.RendererSystem,name:"texture"};wt.add(hx);class cx{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:i,CONTEXT_UID:n}=this,l=t._glTransformFeedbacks[n]||this.createGLTransformFeedback(t);i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,l)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,i){const{gl:n,renderer:l}=this;i&&l.shader.bind(i),n.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:i,renderer:n,CONTEXT_UID:l}=this,o=i.createTransformFeedback();t._glTransformFeedbacks[l]=o,i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,o);for(let h=0;h<t.buffers.length;h++){const c=t.buffers[h];c&&(n.buffer.update(c),c._glBuffers[l].refCount++,i.bindBufferBase(i.TRANSFORM_FEEDBACK_BUFFER,h,c._glBuffers[l].buffer||null))}return i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),o}disposeTransformFeedback(t,i){const n=t._glTransformFeedbacks[this.CONTEXT_UID],l=this.gl;t.disposeRunner.remove(this);const o=this.renderer.buffer;if(o)for(let h=0;h<t.buffers.length;h++){const c=t.buffers[h];if(!c)continue;const p=c._glBuffers[this.CONTEXT_UID];p&&(p.refCount--,p.refCount===0&&!i&&o.dispose(c,i))}n&&(i||l.deleteTransformFeedback(n),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}cx.extension={type:pt.RendererSystem,name:"transformFeedback"};wt.add(cx);class bu{constructor(t){this.renderer=t}init(t){this.screen=new Ht(0,0,t.width,t.height),this.element=t.view||gt.ADAPTER.createCanvas(),this.resolution=t.resolution||gt.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,i){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(i*this.resolution);const n=this.element.width/this.resolution,l=this.element.height/this.resolution;this.screen.width=n,this.screen.height=l,this.autoDensity&&(this.element.style.width=`${n}px`,this.element.style.height=`${l}px`),this.renderer.emit("resize",n,l),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){t&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}bu.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},bu.extension={type:[pt.RendererSystem,pt.CanvasRendererSystem],name:"_view"};wt.add(bu);gt.PREFER_ENV=es.WEBGL2;gt.STRICT_TEXTURE_CACHE=!1;gt.RENDER_OPTIONS={..._u.defaultOptions,...vu.defaultOptions,...bu.defaultOptions,...xu.defaultOptions};Object.defineProperties(gt,{WRAP_MODE:{get(){return Gt.defaultOptions.wrapMode},set(s){jt("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Gt.defaultOptions.wrapMode=s}},SCALE_MODE:{get(){return Gt.defaultOptions.scaleMode},set(s){jt("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Gt.defaultOptions.scaleMode=s}},MIPMAP_TEXTURES:{get(){return Gt.defaultOptions.mipmap},set(s){jt("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Gt.defaultOptions.mipmap=s}},ANISOTROPIC_LEVEL:{get(){return Gt.defaultOptions.anisotropicLevel},set(s){jt("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Gt.defaultOptions.anisotropicLevel=s}},FILTER_RESOLUTION:{get(){return jt("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Ke.defaultResolution},set(s){Ke.defaultResolution=s}},FILTER_MULTISAMPLE:{get(){return jt("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Ke.defaultMultisample},set(s){Ke.defaultMultisample=s}},SPRITE_MAX_TEXTURES:{get(){return Wn.defaultMaxTextures},set(s){jt("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Wn.defaultMaxTextures=s}},SPRITE_BATCH_SIZE:{get(){return Wn.defaultBatchSize},set(s){jt("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Wn.defaultBatchSize=s}},CAN_UPLOAD_SAME_BUFFER:{get(){return Wn.canUploadSameBuffer},set(s){jt("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Wn.canUploadSameBuffer=s}},GC_MODE:{get(){return $n.defaultMode},set(s){jt("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),$n.defaultMode=s}},GC_MAX_IDLE:{get(){return $n.defaultMaxIdle},set(s){jt("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),$n.defaultMaxIdle=s}},GC_MAX_CHECK_COUNT:{get(){return $n.defaultCheckCountMax},set(s){jt("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),$n.defaultCheckCountMax=s}},PRECISION_VERTEX:{get(){return Br.defaultVertexPrecision},set(s){jt("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Br.defaultVertexPrecision=s}},PRECISION_FRAGMENT:{get(){return Br.defaultFragmentPrecision},set(s){jt("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Br.defaultFragmentPrecision=s}}});var ts=(s=>(s[s.INTERACTION=50]="INTERACTION",s[s.HIGH=25]="HIGH",s[s.NORMAL=0]="NORMAL",s[s.LOW=-25]="LOW",s[s.UTILITY=-50]="UTILITY",s))(ts||{});class hd{constructor(t,i=null,n=0,l=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=i,this.priority=n,this.once=l}match(t,i=null){return this.fn===t&&this.context===i}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const i=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),i}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const i=this.next;return this.next=t?null:i,this.previous=null,i}}const fx=class gi{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new hd(null,null,1/0),this.deltaMS=1/gi.targetFPMS,this.elapsedMS=1/gi.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,i,n=ts.NORMAL){return this._addListener(new hd(t,i,n))}addOnce(t,i,n=ts.NORMAL){return this._addListener(new hd(t,i,n,!0))}_addListener(t){let i=this._head.next,n=this._head;if(!i)t.connect(n);else{for(;i;){if(t.priority>i.priority){t.connect(n);break}n=i,i=i.next}t.previous||t.connect(n)}return this._startIfPossible(),this}remove(t,i){let n=this._head.next;for(;n;)n.match(t,i)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,i=this._head;for(;i=i.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let i;if(t>this.lastTime){if(i=this.elapsedMS=t-this.lastTime,i>this._maxElapsedMS&&(i=this._maxElapsedMS),i*=this.speed,this._minElapsedMS){const o=t-this._lastFrame|0;if(o<this._minElapsedMS)return;this._lastFrame=t-o%this._minElapsedMS}this.deltaMS=i,this.deltaTime=this.deltaMS*gi.targetFPMS;const n=this._head;let l=n.next;for(;l;)l=l.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const i=Math.min(this.maxFPS,t),n=Math.min(Math.max(0,i)/1e3,gi.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const i=Math.max(this.minFPS,t);this._minElapsedMS=1/(i/1e3)}}static get shared(){if(!gi._shared){const t=gi._shared=new gi;t.autoStart=!0,t._protected=!0}return gi._shared}static get system(){if(!gi._system){const t=gi._system=new gi;t.autoStart=!0,t._protected=!0}return gi._system}};fx.targetFPMS=.06;let yi=fx;Object.defineProperties(gt,{TARGET_FPMS:{get(){return yi.targetFPMS},set(s){jt("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),yi.targetFPMS=s}}});class dx{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(i){this._ticker&&this._ticker.remove(this.render,this),this._ticker=i,i&&i.add(this.render,this,ts.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?yi.shared:new yi,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}dx.extension=pt.Application;wt.add(dx);const px=[];wt.handleByList(pt.Renderer,px);function LA(s){for(const t of px)if(t.test(s))return new t(s);throw new Error("Unable to auto-detect a suitable renderer.")}var PA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,FA=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const GA=PA,mx=FA;class gx{constructor(t){this.renderer=t}contextChange(t){let i;if(this.renderer.context.webGLVersion===1){const n=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),i=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,n)}else{const n=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),i=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,n)}i>=De.HIGH?this.multisample=De.HIGH:i>=De.MEDIUM?this.multisample=De.MEDIUM:i>=De.LOW?this.multisample=De.LOW:this.multisample=De.NONE}destroy(){}}gx.extension={type:pt.RendererSystem,name:"_multisample"};wt.add(gx);class zA{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class yx{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:i,CONTEXT_UID:n}=this,l=t._glBuffers[n]||this.createGLBuffer(t);i.bindBuffer(t.type,l.buffer)}unbind(t){const{gl:i}=this;i.bindBuffer(t,null)}bindBufferBase(t,i){const{gl:n,CONTEXT_UID:l}=this;if(this.boundBufferBases[i]!==t){const o=t._glBuffers[l]||this.createGLBuffer(t);this.boundBufferBases[i]=t,n.bindBufferBase(n.UNIFORM_BUFFER,i,o.buffer)}}bindBufferRange(t,i,n){const{gl:l,CONTEXT_UID:o}=this;n=n||0;const h=t._glBuffers[o]||this.createGLBuffer(t);l.bindBufferRange(l.UNIFORM_BUFFER,i||0,h.buffer,n*256,256)}update(t){const{gl:i,CONTEXT_UID:n}=this,l=t._glBuffers[n]||this.createGLBuffer(t);if(t._updateID!==l.updateID)if(l.updateID=t._updateID,i.bindBuffer(t.type,l.buffer),l.byteLength>=t.data.byteLength)i.bufferSubData(t.type,0,t.data);else{const o=t.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;l.byteLength=t.data.byteLength,i.bufferData(t.type,t.data,o)}}dispose(t,i){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const n=t._glBuffers[this.CONTEXT_UID],l=this.gl;t.disposeRunner.remove(this),n&&(i||l.deleteBuffer(n.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const i=Object.keys(this.managedBuffers);for(let n=0;n<i.length;n++)this.dispose(this.managedBuffers[i[n]],t)}createGLBuffer(t){const{CONTEXT_UID:i,gl:n}=this;return t._glBuffers[i]=new zA(n.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[i]}}yx.extension={type:pt.RendererSystem,name:"buffer"};wt.add(yx);class vx{constructor(t){this.renderer=t}render(t,i){const n=this.renderer;let l,o,h,c;if(i&&(l=i.renderTexture,o=i.clear,h=i.transform,c=i.skipUpdateTransform),this.renderingToScreen=!l,n.runners.prerender.emit(),n.emit("prerender"),n.projection.transform=h,!n.context.isLost){if(l||(this.lastObjectRendered=t),!c){const p=t.enableTempParent();t.updateTransform(),t.disableTempParent(p)}n.renderTexture.bind(l),n.batch.currentRenderer.start(),(o??n.background.clearBeforeRender)&&n.renderTexture.clear(),t.render(n),n.batch.currentRenderer.flush(),l&&(i.blit&&n.framebuffer.blit(),l.baseTexture.update()),n.runners.postrender.emit(),n.projection.transform=null,n.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}vx.extension={type:pt.RendererSystem,name:"objectRenderer"};wt.add(vx);const uu=class Pd extends IA{constructor(t){super(),this.type=b_.WEBGL,t=Object.assign({},gt.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Hi({projectionMatrix:new de},!0);const i={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:Pd.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(i),"useContextAlpha"in t&&(jt("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&t.useContextAlpha!=="notMultiplied",t.backgroundAlpha=t.useContextAlpha===!1?1:t.backgroundAlpha),this._plugin.rendererPlugins=Pd.__plugins,this.options=t,this.startup.run(this.options)}static test(t){return t?.forceCanvas?!1:uE()}render(t,i){this.objectRenderer.render(t,i)}resize(t,i){this._view.resizeView(t,i)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return jt("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return jt("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return jt("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return jt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){jt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return jt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(t){jt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get powerPreference(){return jt("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(t,i){return this.textureGenerator.generateTexture(t,i)}};uu.extension={type:pt.Renderer,priority:1},uu.__plugins={},uu.__systems={};let cp=uu;wt.handleByMap(pt.RendererPlugin,cp.__plugins);wt.handleByMap(pt.RendererSystem,cp.__systems);wt.add(cp);class _x extends _l{constructor(t,i){const{width:n,height:l}=i||{};super(n,l),this.items=[],this.itemDirtyIds=[];for(let o=0;o<t;o++){const h=new Gt;this.items.push(h),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,i){for(let n=0;n<this.length;n++)t[n]&&(t[n].castToBaseTexture?this.addBaseTextureAt(t[n].castToBaseTexture(),n):t[n]instanceof _l?this.addResourceAt(t[n],n):this.addResourceAt(P_(t[n],i),n))}dispose(){for(let t=0,i=this.length;t<i;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,i){if(!this.items[i])throw new Error(`Index ${i} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[i].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let i=0;i<this.length;i++)this.items[i].parentTextureArray=t,this.items[i].on("update",t.update,t)}unbind(t){super.unbind(t);for(let i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",t.update,t)}load(){if(this._load)return this._load;const t=this.items.map(i=>i.resource).filter(i=>i).map(i=>i.load());return this._load=Promise.all(t).then(()=>{const{realWidth:i,realHeight:n}=this.items[0];return this.resize(i,n),this.update(),Promise.resolve(this)}),this._load}}class HA extends _x{constructor(t,i){const{width:n,height:l}=i||{};let o,h;Array.isArray(t)?(o=t,h=t.length):h=t,super(h,{width:n,height:l}),o&&this.initFromArray(o,i)}addBaseTextureAt(t,i){if(t.resource)this.addResourceAt(t.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=Js.TEXTURE_2D_ARRAY}upload(t,i,n){const{length:l,itemDirtyIds:o,items:h}=this,{gl:c}=t;n.dirtyId<0&&c.texImage3D(c.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,l,0,i.format,n.type,null);for(let p=0;p<l;p++){const m=h[p];o[p]<m.dirtyId&&(o[p]=m.dirtyId,m.valid&&c.texSubImage3D(c.TEXTURE_2D_ARRAY,0,0,0,p,m.resource.width,m.resource.height,1,i.format,n.type,m.resource.source))}return!0}}class kA extends Nr{constructor(t){super(t)}static test(t){const{OffscreenCanvas:i}=globalThis;return i&&t instanceof i?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}const xx=class dl extends _x{constructor(t,i){const{width:n,height:l,autoLoad:o,linkBaseTexture:h}=i||{};if(t&&t.length!==dl.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:n,height:l});for(let c=0;c<dl.SIDES;c++)this.items[c].target=Js.TEXTURE_CUBE_MAP_POSITIVE_X+c;this.linkBaseTexture=h!==!1,t&&this.initFromArray(t,i),o!==!1&&this.load()}bind(t){super.bind(t),t.target=Js.TEXTURE_CUBE_MAP}addBaseTextureAt(t,i,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[i])throw new Error(`Index ${i} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,i);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=Js.TEXTURE_CUBE_MAP_POSITIVE_X+i,t.parentTextureArray=this.baseTexture,this.items[i]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[i]=t,this}upload(t,i,n){const l=this.itemDirtyIds;for(let o=0;o<dl.SIDES;o++){const h=this.items[o];(l[o]<h.dirtyId||n.dirtyId<i.dirtyId)&&(h.valid&&h.resource?(h.resource.upload(t,h,n),l[o]=h.dirtyId):l[o]<-1&&(t.gl.texImage2D(h.target,0,n.internalFormat,i.realWidth,i.realHeight,0,i.format,n.type,null),l[o]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===dl.SIDES}};xx.SIDES=6;let XA=xx;class Qs extends Nr{constructor(t,i){i=i||{};let n,l,o;typeof t=="string"?(n=Qs.EMPTY,l=t,o=!0):(n=t,l=null,o=!1),super(n),this.url=l,this.crossOrigin=i.crossOrigin??!0,this.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,this.ownsImageBitmap=i.ownsImageBitmap??o,this._load=null,i.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(t,i)=>{if(this.url===null){t(this);return}try{const n=await gt.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const l=await n.blob();if(this.destroyed)return;const o=await createImageBitmap(l,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===si.UNPACK?"premultiply":"none"});if(this.destroyed){o.close();return}this.source=o,this.update(),t(this)}catch(n){if(this.destroyed)return;i(n),this.onError.emit(n)}}),this._load)}upload(t,i,n){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),super.upload(t,i,n)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){return Qs._EMPTY=Qs._EMPTY??gt.ADAPTER.createCanvas(0,0),Qs._EMPTY}}const Fd=class hu extends Nr{constructor(t,i){i=i||{},super(gt.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=i.scale||1,this._overrideWidth=i.width,this._overrideHeight=i.height,this._resolve=null,this._crossorigin=i.crossorigin,this._load=null,i.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(t=>{if(this._resolve=()=>{this.update(),t(this)},hu.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const t=new Image;Nr.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=i=>{this._resolve&&(t.onerror=null,this.onError.emit(i))},t.onload=()=>{if(!this._resolve)return;const i=t.width,n=t.height;if(!i||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let l=i*this.scale,o=n*this.scale;(this._overrideWidth||this._overrideHeight)&&(l=this._overrideWidth||this._overrideHeight/n*i,o=this._overrideHeight||this._overrideWidth/i*n),l=Math.round(l),o=Math.round(o);const h=this.source;h.width=l,h.height=o,h._pixiId=`canvas_${Jn()}`,h.getContext("2d").drawImage(t,0,0,i,n,0,0,l,o),this._resolve(),this._resolve=null}}static getSize(t){const i=hu.SVG_SIZE.exec(t),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,i){return i==="svg"||typeof t=="string"&&t.startsWith("data:image/svg+xml")||typeof t=="string"&&hu.SVG_XML.test(t)}};Fd.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,Fd.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let Gd=Fd;class VA extends Nr{constructor(t){super(t)}static test(t){return!!globalThis.VideoFrame&&t instanceof globalThis.VideoFrame}}const zd=class Hd extends Nr{constructor(t,i){if(i=i||{},!(t instanceof HTMLVideoElement)){const n=document.createElement("video");i.autoLoad!==!1&&n.setAttribute("preload","auto"),i.playsinline!==!1&&(n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline","")),i.muted===!0&&(n.setAttribute("muted",""),n.muted=!0),i.loop===!0&&n.setAttribute("loop",""),i.autoPlay!==!1&&n.setAttribute("autoplay",""),typeof t=="string"&&(t=[t]);const l=t[0].src||t[0];Nr.crossOrigin(n,l,i.crossorigin);for(let o=0;o<t.length;++o){const h=document.createElement("source");let{src:c,mime:p}=t[o];if(c=c||t[o],c.startsWith("data:"))p=c.slice(5,c.indexOf(";"));else if(!c.startsWith("blob:")){const m=c.split("?").shift().toLowerCase(),g=m.slice(m.lastIndexOf(".")+1);p=p||Hd.MIME_TYPES[g]||`video/${g}`}h.src=c,p&&(h.type=p),n.appendChild(h)}t=n}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=i.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=i.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),i.autoLoad!==!1&&this.load()}update(t=0){if(!this.destroyed){if(this._updateFPS){const i=yi.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise((i,n)=>{this.valid?i(this):(this._resolve=i,this._reject=n,t.load())}),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const i=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!i&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._configureAutoUpdate();const t=this.source;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(yi.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(yi.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(yi.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t,i){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||Hd.TYPES.includes(i)}};zd.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],zd.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let bx=zd;Cd.push(Qs,q_,kA,bx,VA,Gd,Ou,XA,HA);class Tu{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?Ht.EMPTY:(t=t||new Ht(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,i){const{a:n,b:l,c:o,d:h,tx:c,ty:p}=t,m=n*i.x+o*i.y+c,g=l*i.x+h*i.y+p;this.minX=Math.min(this.minX,m),this.maxX=Math.max(this.maxX,m),this.minY=Math.min(this.minY,g),this.maxY=Math.max(this.maxY,g)}addQuad(t){let i=this.minX,n=this.minY,l=this.maxX,o=this.maxY,h=t[0],c=t[1];i=h<i?h:i,n=c<n?c:n,l=h>l?h:l,o=c>o?c:o,h=t[2],c=t[3],i=h<i?h:i,n=c<n?c:n,l=h>l?h:l,o=c>o?c:o,h=t[4],c=t[5],i=h<i?h:i,n=c<n?c:n,l=h>l?h:l,o=c>o?c:o,h=t[6],c=t[7],i=h<i?h:i,n=c<n?c:n,l=h>l?h:l,o=c>o?c:o,this.minX=i,this.minY=n,this.maxX=l,this.maxY=o}addFrame(t,i,n,l,o){this.addFrameMatrix(t.worldTransform,i,n,l,o)}addFrameMatrix(t,i,n,l,o){const h=t.a,c=t.b,p=t.c,m=t.d,g=t.tx,y=t.ty;let x=this.minX,_=this.minY,b=this.maxX,w=this.maxY,A=h*i+p*n+g,C=c*i+m*n+y;x=A<x?A:x,_=C<_?C:_,b=A>b?A:b,w=C>w?C:w,A=h*l+p*n+g,C=c*l+m*n+y,x=A<x?A:x,_=C<_?C:_,b=A>b?A:b,w=C>w?C:w,A=h*i+p*o+g,C=c*i+m*o+y,x=A<x?A:x,_=C<_?C:_,b=A>b?A:b,w=C>w?C:w,A=h*l+p*o+g,C=c*l+m*o+y,x=A<x?A:x,_=C<_?C:_,b=A>b?A:b,w=C>w?C:w,this.minX=x,this.minY=_,this.maxX=b,this.maxY=w}addVertexData(t,i,n){let l=this.minX,o=this.minY,h=this.maxX,c=this.maxY;for(let p=i;p<n;p+=2){const m=t[p],g=t[p+1];l=m<l?m:l,o=g<o?g:o,h=m>h?m:h,c=g>c?g:c}this.minX=l,this.minY=o,this.maxX=h,this.maxY=c}addVertices(t,i,n,l){this.addVerticesMatrix(t.worldTransform,i,n,l)}addVerticesMatrix(t,i,n,l,o=0,h=o){const c=t.a,p=t.b,m=t.c,g=t.d,y=t.tx,x=t.ty;let _=this.minX,b=this.minY,w=this.maxX,A=this.maxY;for(let C=n;C<l;C+=2){const U=i[C],O=i[C+1],L=c*U+m*O+y,B=g*O+p*U+x;_=Math.min(_,L-o),w=Math.max(w,L+o),b=Math.min(b,B-h),A=Math.max(A,B+h)}this.minX=_,this.minY=b,this.maxX=w,this.maxY=A}addBounds(t){const i=this.minX,n=this.minY,l=this.maxX,o=this.maxY;this.minX=t.minX<i?t.minX:i,this.minY=t.minY<n?t.minY:n,this.maxX=t.maxX>l?t.maxX:l,this.maxY=t.maxY>o?t.maxY:o}addBoundsMask(t,i){const n=t.minX>i.minX?t.minX:i.minX,l=t.minY>i.minY?t.minY:i.minY,o=t.maxX<i.maxX?t.maxX:i.maxX,h=t.maxY<i.maxY?t.maxY:i.maxY;if(n<=o&&l<=h){const c=this.minX,p=this.minY,m=this.maxX,g=this.maxY;this.minX=n<c?n:c,this.minY=l<p?l:p,this.maxX=o>m?o:m,this.maxY=h>g?h:g}}addBoundsMatrix(t,i){this.addFrameMatrix(i,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,i){const n=t.minX>i.x?t.minX:i.x,l=t.minY>i.y?t.minY:i.y,o=t.maxX<i.x+i.width?t.maxX:i.x+i.width,h=t.maxY<i.y+i.height?t.maxY:i.y+i.height;if(n<=o&&l<=h){const c=this.minX,p=this.minY,m=this.maxX,g=this.maxY;this.minX=n<c?n:c,this.minY=l<p?l:p,this.maxX=o>m?o:m,this.maxY=h>g?h:g}}pad(t=0,i=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=i,this.maxY+=i)}addFramePad(t,i,n,l,o,h){t-=o,i-=h,n+=o,l+=h,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<i?this.minY:i,this.maxY=this.maxY>l?this.maxY:l}}class ve extends xl{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new up,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Tu,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const i=Object.keys(t);for(let n=0;n<i.length;++n){const l=i[n];Object.defineProperty(ve.prototype,l,Object.getOwnPropertyDescriptor(t,l))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,i){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new Ht),i=this._boundsRect),this._bounds.getRectangle(i)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new Ht),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Tu);const i=this.transform,n=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=n?.worldAlpha??1,this.transform=this._tempDisplayObjectParent.transform;const l=this._bounds,o=this._boundsID;this._bounds=this._localBounds;const h=this.getBounds(!1,t);return this.parent=n,this.transform=i,this._bounds=l,this._bounds.updateID+=this._boundsID-o,h}toGlobal(t,i,n=!1){return n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,i)}toLocal(t,i,n,l){return i&&(t=i.toGlobal(t,n,l)),l||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,n)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){this.parent?.removeChild(this)}setTransform(t=0,i=0,n=1,l=1,o=0,h=0,c=0,p=0,m=0){return this.position.x=t,this.position.y=i,this.scale.x=n||1,this.scale.y=l||1,this.rotation=o,this.skew.x=h,this.skew.y=c,this.pivot.x=p,this.pivot.y=m,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new jA),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*PE}set angle(t){this.transform.rotation=t*FE}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex!==t&&(this._zIndex=t,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const i=this._mask.isMaskData?this._mask.maskObject:this._mask;i&&(i._maskRefCount--,i._maskRefCount===0&&(i.renderable=!0,i.isMask=!1))}if(this._mask=t,this._mask){const i=this._mask.isMaskData?this._mask.maskObject:this._mask;i&&(i._maskRefCount===0&&(i.renderable=!1,i.isMask=!0),i._maskRefCount++)}}}}class jA extends ve{constructor(){super(...arguments),this.sortDirty=null}}ve.prototype.displayObjectUpdateTransform=ve.prototype.updateTransform;const qA=new de;function YA(s,t){return s.zIndex===t.zIndex?s._lastSortedIndex-t._lastSortedIndex:s.zIndex-t.zIndex}const Tx=class kd extends ve{constructor(){super(),this.children=[],this.sortableChildren=kd.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(t){}addChild(...t){if(t.length>1)for(let i=0;i<t.length;i++)this.addChild(t[i]);else{const i=t[0];i.parent&&i.parent.removeChild(i),i.parent=this,this.sortDirty=!0,i.transform._parentID=-1,this.children.push(i),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",i,this,this.children.length-1),i.emit("added",this)}return t[0]}addChildAt(t,i){if(i<0||i>this.children.length)throw new Error(`${t}addChildAt: The index ${i} supplied is out of bounds ${this.children.length}`);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(i,0,t),this._boundsID++,this.onChildrenChange(i),t.emit("added",this),this.emit("childAdded",t,this,i),t}swapChildren(t,i){if(t===i)return;const n=this.getChildIndex(t),l=this.getChildIndex(i);this.children[n]=i,this.children[l]=t,this.onChildrenChange(n<l?n:l)}getChildIndex(t){const i=this.children.indexOf(t);if(i===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return i}setChildIndex(t,i){if(i<0||i>=this.children.length)throw new Error(`The index ${i} supplied is out of bounds ${this.children.length}`);const n=this.getChildIndex(t);ta(this.children,n,1),this.children.splice(i,0,t),this.onChildrenChange(i)}getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]}removeChild(...t){if(t.length>1)for(let i=0;i<t.length;i++)this.removeChild(t[i]);else{const i=t[0],n=this.children.indexOf(i);if(n===-1)return null;i.parent=null,i.transform._parentID=-1,ta(this.children,n,1),this._boundsID++,this.onChildrenChange(n),i.emit("removed",this),this.emit("childRemoved",i,this,n)}return t[0]}removeChildAt(t){const i=this.getChildAt(t);return i.parent=null,i.transform._parentID=-1,ta(this.children,t,1),this._boundsID++,this.onChildrenChange(t),i.emit("removed",this),this.emit("childRemoved",i,this,t),i}removeChildren(t=0,i=this.children.length){const n=t,l=i,o=l-n;let h;if(o>0&&o<=l){h=this.children.splice(n,o);for(let c=0;c<h.length;++c)h[c].parent=null,h[c].transform&&(h[c].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(let c=0;c<h.length;++c)h[c].emit("removed",this),this.emit("childRemoved",h[c],this,c);return h}else if(o===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let t=!1;for(let i=0,n=this.children.length;i<n;++i){const l=this.children[i];l._lastSortedIndex=i,!t&&l.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(YA),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let t=0,i=this.children.length;t<i;++t){const n=this.children[t];n.visible&&n.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let t=0;t<this.children.length;t++){const i=this.children[t];if(!(!i.visible||!i.renderable))if(i.calculateBounds(),i._mask){const n=i._mask.isMaskData?i._mask.maskObject:i._mask;n?(n.calculateBounds(),this._bounds.addBoundsMask(i._bounds,n._bounds)):this._bounds.addBounds(i._bounds)}else i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(t,i=!1){const n=super.getLocalBounds(t);if(!i)for(let l=0,o=this.children.length;l<o;++l){const h=this.children[l];h.visible&&h.updateTransform()}return n}_calculateBounds(){}_renderWithCulling(t){const i=t.renderTexture.sourceFrame;if(!(i.width>0&&i.height>0))return;let n,l;this.cullArea?(n=this.cullArea,l=this.worldTransform):this._render!==kd.prototype._render&&(n=this.getBounds(!0));const o=t.projection.transform;if(o&&(l?(l=qA.copyFrom(l),l.prepend(o)):l=o),n&&i.intersects(n,l))this._render(t);else if(this.cullArea)return;for(let h=0,c=this.children.length;h<c;++h){const p=this.children[h],m=p.cullable;p.cullable=m||!this.cullArea,p.render(t),p.cullable=m}}render(t){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters?.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(let i=0,n=this.children.length;i<n;++i)this.children[i].render(t)}}renderAdvanced(t){const i=this.filters,n=this._mask;if(i){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let o=0;o<i.length;o++)i[o].enabled&&this._enabledFilters.push(i[o])}const l=i&&this._enabledFilters?.length||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==Be.NONE));if(l&&t.batch.flush(),i&&this._enabledFilters?.length&&t.filter.push(this,this._enabledFilters),n&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(let o=0,h=this.children.length;o<h;++o)this.children[o].render(t)}l&&t.batch.flush(),n&&t.mask.pop(this),i&&this._enabledFilters?.length&&t.filter.pop()}_render(t){}destroy(t){super.destroy(),this.sortDirty=!1;const i=typeof t=="boolean"?t:t?.children,n=this.removeChildren(0,this.children.length);if(i)for(let l=0;l<n.length;++l)n[l].destroy(t)}get width(){return this.scale.x*this.getLocalBounds().width}set width(t){const i=this.getLocalBounds().width;i!==0?this.scale.x=t/i:this.scale.x=1,this._width=t}get height(){return this.scale.y*this.getLocalBounds().height}set height(t){const i=this.getLocalBounds().height;i!==0?this.scale.y=t/i:this.scale.y=1,this._height=t}};Tx.defaultSortableChildren=!1;let Me=Tx;Me.prototype.containerUpdateTransform=Me.prototype.updateTransform;Object.defineProperties(gt,{SORTABLE_CHILDREN:{get(){return Me.defaultSortableChildren},set(s){jt("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Me.defaultSortableChildren=s}}});const ol=new $t,WA=new Uint16Array([0,1,2,0,2,3]);class la extends Me{constructor(t){super(),this._anchor=new Or(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new fe(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=Nt.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||St.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=WA,this.pluginName="batch",this.isSprite=!0,this._roundPixels=gt.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=mn(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=mn(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const i=this.transform.worldTransform,n=i.a,l=i.b,o=i.c,h=i.d,c=i.tx,p=i.ty,m=this.vertexData,g=t.trim,y=t.orig,x=this._anchor;let _=0,b=0,w=0,A=0;if(g?(b=g.x-x._x*y.width,_=b+g.width,A=g.y-x._y*y.height,w=A+g.height):(b=-x._x*y.width,_=b+y.width,A=-x._y*y.height,w=A+y.height),m[0]=n*b+o*A+c,m[1]=h*A+l*b+p,m[2]=n*_+o*A+c,m[3]=h*A+l*_+p,m[4]=n*_+o*w+c,m[5]=h*w+l*_+p,m[6]=n*b+o*w+c,m[7]=h*w+l*b+p,this._roundPixels){const C=gt.RESOLUTION;for(let U=0;U<m.length;++U)m[U]=Math.round(m[U]*C)/C}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,i=this.vertexTrimmedData,n=t.orig,l=this._anchor,o=this.transform.worldTransform,h=o.a,c=o.b,p=o.c,m=o.d,g=o.tx,y=o.ty,x=-l._x*n.width,_=x+n.width,b=-l._y*n.height,w=b+n.height;if(i[0]=h*x+p*b+g,i[1]=m*b+c*x+y,i[2]=h*_+p*b+g,i[3]=m*b+c*_+y,i[4]=h*_+p*w+g,i[5]=m*w+c*_+y,i[6]=h*x+p*w+g,i[7]=m*w+c*x+y,this._roundPixels){const A=gt.RESOLUTION;for(let C=0;C<i.length;++C)i[C]=Math.round(i[C]*A)/A}}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,i=this._texture.orig;!t||t.width===i.width&&t.height===i.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new Tu),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Ht),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,ol);const i=this._texture.orig.width,n=this._texture.orig.height,l=-i*this.anchor.x;let o=0;return ol.x>=l&&ol.x<l+i&&(o=-n*this.anchor.y,ol.y>=o&&ol.y<o+n)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t?.texture){const i=typeof t=="boolean"?t:t?.baseTexture;this._texture.destroy(!!i)}this._texture=null}static from(t,i){const n=t instanceof St?t:St.from(t,i);return new la(n)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const i=mn(this.scale.x)||1;this.scale.x=i*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const i=mn(this.scale.y)||1;this.scale.y=i*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||St.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}const Ex=new de;ve.prototype._cacheAsBitmap=!1;ve.prototype._cacheData=null;ve.prototype._cacheAsBitmapResolution=null;ve.prototype._cacheAsBitmapMultisample=null;class $A{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(ve.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(s){s!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=s,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(s){s!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=s,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(s){if(this._cacheAsBitmap===s)return;this._cacheAsBitmap=s;let t;s?(this._cacheData||(this._cacheData=new $A),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}});ve.prototype._renderCached=function(s){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(s),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(s))};ve.prototype._initCachedDisplayObject=function(s){if(this._cacheData?.sprite)return;const t=this.alpha;this.alpha=1,s.batch.flush();const i=this.getLocalBounds(new Ht,!0);if(this.filters?.length){const x=this.filters[0].padding;i.pad(x)}const n=this.cacheAsBitmapResolution||s.resolution;i.ceil(n),i.width=Math.max(i.width,1/n),i.height=Math.max(i.height,1/n);const l=s.renderTexture.current,o=s.renderTexture.sourceFrame.clone(),h=s.renderTexture.destinationFrame.clone(),c=s.projection.transform,p=is.create({width:i.width,height:i.height,resolution:n,multisample:this.cacheAsBitmapMultisample??s.multisample}),m=`cacheAsBitmap_${Jn()}`;this._cacheData.textureCacheId=m,Gt.addToCache(p.baseTexture,m),St.addToCache(p,m);const g=this.transform.localTransform.copyTo(Ex).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,s.render(this,{renderTexture:p,clear:!0,transform:g,skipUpdateTransform:!1}),s.framebuffer.blit(),s.projection.transform=c,s.renderTexture.bind(l,o,h),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;const y=new la(p);y.transform.worldTransform=this.transform.worldTransform,y.anchor.x=-(i.x/i.width),y.anchor.y=-(i.y/i.height),y.alpha=t,y._bounds=this._bounds,this._cacheData.sprite=y,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=y.containsPoint.bind(y)};ve.prototype._renderCachedCanvas=function(s){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(s),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(s))};ve.prototype._initCachedDisplayObjectCanvas=function(s){if(this._cacheData?.sprite)return;const t=this.getLocalBounds(new Ht,!0),i=this.alpha;this.alpha=1;const n=s.canvasContext.activeContext,l=s._projTransform,o=this.cacheAsBitmapResolution||s.resolution;t.ceil(o),t.width=Math.max(t.width,1/o),t.height=Math.max(t.height,1/o);const h=is.create({width:t.width,height:t.height,resolution:o}),c=`cacheAsBitmap_${Jn()}`;this._cacheData.textureCacheId=c,Gt.addToCache(h.baseTexture,c),St.addToCache(h,c);const p=Ex;this.transform.localTransform.copyTo(p),p.invert(),p.tx-=t.x,p.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,s.render(this,{renderTexture:h,clear:!0,transform:p,skipUpdateTransform:!1}),s.canvasContext.activeContext=n,s._projTransform=l,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;const m=new la(h);m.transform.worldTransform=this.transform.worldTransform,m.anchor.x=-(t.x/t.width),m.anchor.y=-(t.y/t.height),m.alpha=i,m._bounds=this._bounds,this._cacheData.sprite=m,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=s._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=m.containsPoint.bind(m)};ve.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};ve.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};ve.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Gt.removeFromCache(this._cacheData.textureCacheId),St.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};ve.prototype._cacheAsBitmapDestroy=function(s){this.cacheAsBitmap=!1,this.destroy(s)};ve.prototype.name=null;Me.prototype.getChildByName=function(s,t){for(let i=0,n=this.children.length;i<n;i++)if(this.children[i].name===s)return this.children[i];if(t)for(let i=0,n=this.children.length;i<n;i++){const l=this.children[i];if(!l.getChildByName)continue;const o=l.getChildByName(s,!0);if(o)return o}return null};ve.prototype.getGlobalPosition=function(s=new $t,t=!1){return this.parent?this.parent.toGlobal(this.position,s,t):(s.x=this.position.x,s.y=this.position.y),s};var ZA=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class KA extends Ke{constructor(t=1){super(GA,ZA,{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}const QA={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},JA=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function tS(s){const t=QA[s],i=t.length;let n=JA,l="";const o="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let h;for(let c=0;c<s;c++){let p=o.replace("%index%",c.toString());h=c,c>=i&&(h=s-c-1),p=p.replace("%value%",t[h].toString()),l+=p,l+=`
`}return n=n.replace("%blur%",l),n=n.replace("%size%",s.toString()),n}const eS=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function iS(s,t){const i=Math.ceil(s/2);let n=eS,l="",o;t?o="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":o="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let h=0;h<s;h++){let c=o.replace("%index%",h.toString());c=c.replace("%sampleIndex%",`${h-(i-1)}.0`),l+=c,l+=`
`}return n=n.replace("%blur%",l),n=n.replace("%size%",s.toString()),n}class Xd extends Ke{constructor(t,i=8,n=4,l=Ke.defaultResolution,o=5){const h=iS(o,t),c=tS(o);super(h,c),this.horizontal=t,this.resolution=l,this._quality=0,this.quality=n,this.blur=i}apply(t,i,n,l){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/i.width):this.uniforms.strength=1/n.height*(n.height/i.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/i.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/i.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,i,n,l);else{const o=t.getFilterTexture(),h=t.renderer;let c=i,p=o;this.state.blend=!1,t.applyFilter(this,c,p,tr.CLEAR);for(let m=1;m<this.passes-1;m++){t.bindAndClear(c,tr.BLIT),this.uniforms.uSampler=p;const g=p;p=c,c=g,h.shader.bind(this),h.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,p,n,l),t.returnFilterTexture(o)}}get blur(){return this.strength}set blur(t){this.padding=1+Math.abs(t)*2,this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}class rS extends Ke{constructor(t=8,i=4,n=Ke.defaultResolution,l=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new Xd(!0,t,i,n,l),this.blurYFilter=new Xd(!1,t,i,n,l),this.resolution=n,this.quality=i,this.blur=t,this.repeatEdgePixels=!1}apply(t,i,n,l){const o=Math.abs(this.blurXFilter.strength),h=Math.abs(this.blurYFilter.strength);if(o&&h){const c=t.getFilterTexture();this.blurXFilter.apply(t,i,c,tr.CLEAR),this.blurYFilter.apply(t,c,n,l),t.returnFilterTexture(c)}else h?this.blurYFilter.apply(t,i,n,l):this.blurXFilter.apply(t,i,n,l)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}var nS=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class Vd extends Ke{constructor(){const t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(mx,nS,t),this.alpha=1}_loadMatrix(t,i=!1){let n=t;i&&(this._multiply(n,this.uniforms.m,t),n=this._colorMatrix(n)),this.uniforms.m=n}_multiply(t,i,n){return t[0]=i[0]*n[0]+i[1]*n[5]+i[2]*n[10]+i[3]*n[15],t[1]=i[0]*n[1]+i[1]*n[6]+i[2]*n[11]+i[3]*n[16],t[2]=i[0]*n[2]+i[1]*n[7]+i[2]*n[12]+i[3]*n[17],t[3]=i[0]*n[3]+i[1]*n[8]+i[2]*n[13]+i[3]*n[18],t[4]=i[0]*n[4]+i[1]*n[9]+i[2]*n[14]+i[3]*n[19]+i[4],t[5]=i[5]*n[0]+i[6]*n[5]+i[7]*n[10]+i[8]*n[15],t[6]=i[5]*n[1]+i[6]*n[6]+i[7]*n[11]+i[8]*n[16],t[7]=i[5]*n[2]+i[6]*n[7]+i[7]*n[12]+i[8]*n[17],t[8]=i[5]*n[3]+i[6]*n[8]+i[7]*n[13]+i[8]*n[18],t[9]=i[5]*n[4]+i[6]*n[9]+i[7]*n[14]+i[8]*n[19]+i[9],t[10]=i[10]*n[0]+i[11]*n[5]+i[12]*n[10]+i[13]*n[15],t[11]=i[10]*n[1]+i[11]*n[6]+i[12]*n[11]+i[13]*n[16],t[12]=i[10]*n[2]+i[11]*n[7]+i[12]*n[12]+i[13]*n[17],t[13]=i[10]*n[3]+i[11]*n[8]+i[12]*n[13]+i[13]*n[18],t[14]=i[10]*n[4]+i[11]*n[9]+i[12]*n[14]+i[13]*n[19]+i[14],t[15]=i[15]*n[0]+i[16]*n[5]+i[17]*n[10]+i[18]*n[15],t[16]=i[15]*n[1]+i[16]*n[6]+i[17]*n[11]+i[18]*n[16],t[17]=i[15]*n[2]+i[16]*n[7]+i[17]*n[12]+i[18]*n[17],t[18]=i[15]*n[3]+i[16]*n[8]+i[17]*n[13]+i[18]*n[18],t[19]=i[15]*n[4]+i[16]*n[9]+i[17]*n[14]+i[18]*n[19]+i[19],t}_colorMatrix(t){const i=new Float32Array(t);return i[4]/=255,i[9]/=255,i[14]/=255,i[19]/=255,i}brightness(t,i){const n=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(n,i)}tint(t,i){const[n,l,o]=fe.shared.setValue(t).toArray(),h=[n,0,0,0,0,0,l,0,0,0,0,0,o,0,0,0,0,0,1,0];this._loadMatrix(h,i)}greyscale(t,i){const n=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(n,i)}blackAndWhite(t){const i=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(i,t)}hue(t,i){t=(t||0)/180*Math.PI;const n=Math.cos(t),l=Math.sin(t),o=Math.sqrt,h=1/3,c=o(h),p=n+(1-n)*h,m=h*(1-n)-c*l,g=h*(1-n)+c*l,y=h*(1-n)+c*l,x=n+h*(1-n),_=h*(1-n)-c*l,b=h*(1-n)-c*l,w=h*(1-n)+c*l,A=n+h*(1-n),C=[p,m,g,0,0,y,x,_,0,0,b,w,A,0,0,0,0,0,1,0];this._loadMatrix(C,i)}contrast(t,i){const n=(t||0)+1,l=-.5*(n-1),o=[n,0,0,0,l,0,n,0,0,l,0,0,n,0,l,0,0,0,1,0];this._loadMatrix(o,i)}saturate(t=0,i){const n=t*2/3+1,l=(n-1)*-.5,o=[n,l,l,0,0,l,n,l,0,0,l,l,n,0,0,0,0,0,1,0];this._loadMatrix(o,i)}desaturate(){this.saturate(-1)}negative(t){const i=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(i,t)}sepia(t){const i=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(i,t)}technicolor(t){const i=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(i,t)}polaroid(t){const i=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(i,t)}toBGR(t){const i=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(i,t)}kodachrome(t){const i=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(i,t)}browni(t){const i=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(i,t)}vintage(t){const i=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(i,t)}colorTone(t,i,n,l,o){t=t||.2,i=i||.15,n=n||16770432,l=l||3375104;const h=fe.shared,[c,p,m]=h.setValue(n).toArray(),[g,y,x]=h.setValue(l).toArray(),_=[.3,.59,.11,0,0,c,p,m,t,0,g,y,x,i,0,c-g,p-y,m-x,0,0];this._loadMatrix(_,o)}night(t,i){t=t||.1;const n=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(n,i)}predator(t,i){const n=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(n,i)}lsd(t){const i=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(i,t)}reset(){const t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}Vd.prototype.grayscale=Vd.prototype.greyscale;var sS=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,aS=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class lS extends Ke{constructor(t,i){const n=new de;t.renderable=!1,super(aS,sS,{mapSampler:t._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=n,i==null&&(i=20),this.scale=new $t(i,i)}apply(t,i,n,l){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const o=this.maskSprite.worldTransform,h=Math.sqrt(o.a*o.a+o.b*o.b),c=Math.sqrt(o.c*o.c+o.d*o.d);h!==0&&c!==0&&(this.uniforms.rotation[0]=o.a/h,this.uniforms.rotation[1]=o.b/h,this.uniforms.rotation[2]=o.c/c,this.uniforms.rotation[3]=o.d/c),t.applyFilter(this,i,n,l)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}}var oS=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,uS=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class hS extends Ke{constructor(){super(uS,oS)}}var cS=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class fS extends Ke{constructor(t=.5,i=Math.random()){super(mx,cS,{uNoise:0,uSeed:0}),this.noise=t,this.seed=i}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}const Wv={AlphaFilter:KA,BlurFilter:rS,BlurFilterPass:Xd,ColorMatrixFilter:Vd,DisplacementFilter:lS,FXAAFilter:hS,NoiseFilter:fS};Object.entries(Wv).forEach(([s,t])=>{Object.defineProperty(Wv,s,{get(){return jt("7.1.0",`filters.${s} has moved to ${s}`),t}})});class dS{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this.tickerAdded||!this.domElement||(yi.system.add(this.tickerUpdate,this,ts.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(yi.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const t=this.events.rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY}))}tickerUpdate(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const pn=new dS;class bl{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=bl.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new $t,this.page=new $t,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,i,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,i,n,l,o){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class Eu extends bl{constructor(){super(...arguments),this.client=new $t,this.movement=new $t,this.offset=new $t,this.global=new $t,this.screen=new $t}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,i,n){return t.worldTransform.applyInverse(n||this.global,i)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,i,n,l,o,h,c,p,m,g,y,x,_,b,w){throw new Error("Method not implemented.")}}class Fi extends Eu{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class ia extends Eu{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}ia.DOM_DELTA_PIXEL=0,ia.DOM_DELTA_LINE=1,ia.DOM_DELTA_PAGE=2;const pS=2048,mS=new $t,cd=new $t;class gS{constructor(t){this.dispatch=new xl,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,i){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:i,priority:0}),this.mappingTable[t].sort((n,l)=>n.priority-l.priority)}dispatchEvent(t,i){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,i),this.dispatch.emit(i||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const i=this.mappingTable[t.type];if(i)for(let n=0,l=i.length;n<l;n++)i[n].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,i){pn.pauseUpdate=!0;const n=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",l=this[n](this.rootTarget,this.rootTarget.eventMode,mS.set(t,i),this.hitTestFn,this.hitPruneFn);return l&&l[0]}propagate(t,i){if(!t.target)return;const n=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let l=0,o=n.length-1;l<o;l++)if(t.currentTarget=n[l],this.notifyTarget(t,i),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,i),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let l=n.length-2;l>=0;l--)if(t.currentTarget=n[l],this.notifyTarget(t,i),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,i,n=this._allInteractiveElements){if(n.length===0)return;t.eventPhase=t.BUBBLING_PHASE;const l=Array.isArray(i)?i:[i];for(let o=n.length-1;o>=0;o--)l.forEach(h=>{t.currentTarget=n[o],this.notifyTarget(t,h)})}propagationPath(t){const i=[t];for(let n=0;n<pS&&t!==this.rootTarget;n++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");i.push(t.parent),t=t.parent}return i.reverse(),i}hitTestMoveRecursive(t,i,n,l,o,h=!1){let c=!1;if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||i==="dynamic")&&(pn.pauseUpdate=!1),t.interactiveChildren&&t.children){const g=t.children;for(let y=g.length-1;y>=0;y--){const x=g[y],_=this.hitTestMoveRecursive(x,this._isInteractive(i)?i:x.eventMode,n,l,o,h||o(t,n));if(_){if(_.length>0&&!_[_.length-1].parent)continue;const b=t.isInteractive();(_.length>0||b)&&(b&&this._allInteractiveElements.push(t),_.push(t)),this._hitElements.length===0&&(this._hitElements=_),c=!0}}}const p=this._isInteractive(i),m=t.isInteractive();return p&&m&&this._allInteractiveElements.push(t),h||this._hitElements.length>0?null:c?this._hitElements:p&&!o(t,n)&&l(t,n)?m?[t]:[]:null}hitTestRecursive(t,i,n,l,o){if(this._interactivePrune(t)||o(t,n))return null;if((t.eventMode==="dynamic"||i==="dynamic")&&(pn.pauseUpdate=!1),t.interactiveChildren&&t.children){const p=t.children;for(let m=p.length-1;m>=0;m--){const g=p[m],y=this.hitTestRecursive(g,this._isInteractive(i)?i:g.eventMode,n,l,o);if(y){if(y.length>0&&!y[y.length-1].parent)continue;const x=t.isInteractive();return(y.length>0||x)&&y.push(t),y}}}const h=this._isInteractive(i),c=t.isInteractive();return h&&l(t,n)?c?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!!(!t||t.isMask||!t.visible||!t.renderable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren||t.isMask)}hitPruneFn(t,i){if(t.hitArea&&(t.worldTransform.applyInverse(i,cd),!t.hitArea.contains(cd.x,cd.y)))return!0;if(t._mask){const n=t._mask.isMaskData?t._mask.maskObject:t._mask;if(n&&!n.containsPoint?.(i))return!0}return!1}hitTestFn(t,i){return t.eventMode==="passive"?!1:t.hitArea?!0:t.containsPoint?t.containsPoint(i):!1}notifyTarget(t,i){i=i??t.type;const n=`on${i}`;t.currentTarget[n]?.(t);const l=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${i}capture`:i;this.notifyListeners(t,l),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,i)}mapPointerDown(t){if(!(t instanceof Fi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.createPointerEvent(t);if(this.dispatchEvent(i,"pointerdown"),i.pointerType==="touch")this.dispatchEvent(i,"touchstart");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const l=i.button===2;this.dispatchEvent(i,l?"rightdown":"mousedown")}const n=this.trackingData(t.pointerId);n.pressTargetsByButton[t.button]=i.composedPath(),this.freeEvent(i)}mapPointerMove(t){if(!(t instanceof Fi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const i=this.createPointerEvent(t);this._isPointerMoveEvent=!1;const n=i.pointerType==="mouse"||i.pointerType==="pen",l=this.trackingData(t.pointerId),o=this.findMountedTarget(l.overTargets);if(l.overTargets?.length>0&&o!==i.target){const p=t.type==="mousemove"?"mouseout":"pointerout",m=this.createPointerEvent(t,p,o);if(this.dispatchEvent(m,"pointerout"),n&&this.dispatchEvent(m,"mouseout"),!i.composedPath().includes(o)){const g=this.createPointerEvent(t,"pointerleave",o);for(g.eventPhase=g.AT_TARGET;g.target&&!i.composedPath().includes(g.target);)g.currentTarget=g.target,this.notifyTarget(g),n&&this.notifyTarget(g,"mouseleave"),g.target=g.target.parent;this.freeEvent(g)}this.freeEvent(m)}if(o!==i.target){const p=t.type==="mousemove"?"mouseover":"pointerover",m=this.clonePointerEvent(i,p);this.dispatchEvent(m,"pointerover"),n&&this.dispatchEvent(m,"mouseover");let g=o?.parent;for(;g&&g!==this.rootTarget.parent&&g!==i.target;)g=g.parent;if(!g||g===this.rootTarget.parent){const y=this.clonePointerEvent(i,"pointerenter");for(y.eventPhase=y.AT_TARGET;y.target&&y.target!==o&&y.target!==this.rootTarget.parent;)y.currentTarget=y.target,this.notifyTarget(y),n&&this.notifyTarget(y,"mouseenter"),y.target=y.target.parent;this.freeEvent(y)}this.freeEvent(m)}const h=[],c=this.enableGlobalMoveEvents??!0;this.moveOnAll?h.push("pointermove"):this.dispatchEvent(i,"pointermove"),c&&h.push("globalpointermove"),i.pointerType==="touch"&&(this.moveOnAll?h.splice(1,0,"touchmove"):this.dispatchEvent(i,"touchmove"),c&&h.push("globaltouchmove")),n&&(this.moveOnAll?h.splice(1,0,"mousemove"):this.dispatchEvent(i,"mousemove"),c&&h.push("globalmousemove"),this.cursor=i.target?.cursor),h.length>0&&this.all(i,h),this._allInteractiveElements.length=0,this._hitElements.length=0,l.overTargets=i.composedPath(),this.freeEvent(i)}mapPointerOver(t){if(!(t instanceof Fi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(t.pointerId),n=this.createPointerEvent(t),l=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),l&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=n.target?.cursor);const o=this.clonePointerEvent(n,"pointerenter");for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),l&&this.notifyTarget(o,"mouseenter"),o.target=o.target.parent;i.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(o)}mapPointerOut(t){if(!(t instanceof Fi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(t.pointerId);if(i.overTargets){const n=t.pointerType==="mouse"||t.pointerType==="pen",l=this.findMountedTarget(i.overTargets),o=this.createPointerEvent(t,"pointerout",l);this.dispatchEvent(o),n&&this.dispatchEvent(o,"mouseout");const h=this.createPointerEvent(t,"pointerleave",l);for(h.eventPhase=h.AT_TARGET;h.target&&h.target!==this.rootTarget.parent;)h.currentTarget=h.target,this.notifyTarget(h),n&&this.notifyTarget(h,"mouseleave"),h.target=h.target.parent;i.overTargets=null,this.freeEvent(o),this.freeEvent(h)}this.cursor=null}mapPointerUp(t){if(!(t instanceof Fi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=performance.now(),n=this.createPointerEvent(t);if(this.dispatchEvent(n,"pointerup"),n.pointerType==="touch")this.dispatchEvent(n,"touchend");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const c=n.button===2;this.dispatchEvent(n,c?"rightup":"mouseup")}const l=this.trackingData(t.pointerId),o=this.findMountedTarget(l.pressTargetsByButton[t.button]);let h=o;if(o&&!n.composedPath().includes(o)){let c=o;for(;c&&!n.composedPath().includes(c);){if(n.currentTarget=c,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch")this.notifyTarget(n,"touchendoutside");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const p=n.button===2;this.notifyTarget(n,p?"rightupoutside":"mouseupoutside")}c=c.parent}delete l.pressTargetsByButton[t.button],h=c}if(h){const c=this.clonePointerEvent(n,"click");c.target=h,c.path=null,l.clicksByButton[t.button]||(l.clicksByButton[t.button]={clickCount:0,target:c.target,timeStamp:i});const p=l.clicksByButton[t.button];if(p.target===c.target&&i-p.timeStamp<200?++p.clickCount:p.clickCount=1,p.target=c.target,p.timeStamp=i,c.detail=p.clickCount,c.pointerType==="mouse"){const m=c.button===2;this.dispatchEvent(c,m?"rightclick":"click")}else c.pointerType==="touch"&&this.dispatchEvent(c,"tap");this.dispatchEvent(c,"pointertap"),this.freeEvent(c)}this.freeEvent(n)}mapPointerUpOutside(t){if(!(t instanceof Fi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(t.pointerId),n=this.findMountedTarget(i.pressTargetsByButton[t.button]),l=this.createPointerEvent(t);if(n){let o=n;for(;o;)l.currentTarget=o,this.notifyTarget(l,"pointerupoutside"),l.pointerType==="touch"?this.notifyTarget(l,"touchendoutside"):(l.pointerType==="mouse"||l.pointerType==="pen")&&this.notifyTarget(l,l.button===2?"rightupoutside":"mouseupoutside"),o=o.parent;delete i.pressTargetsByButton[t.button]}this.freeEvent(l)}mapWheel(t){if(!(t instanceof ia)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const i=this.createWheelEvent(t);this.dispatchEvent(i),this.freeEvent(i)}findMountedTarget(t){if(!t)return null;let i=t[0];for(let n=1;n<t.length&&t[n].parent===i;n++)i=t[n];return i}createPointerEvent(t,i,n){const l=this.allocateEvent(Fi);return this.copyPointerData(t,l),this.copyMouseData(t,l),this.copyData(t,l),l.nativeEvent=t.nativeEvent,l.originalEvent=t,l.target=n??this.hitTest(l.global.x,l.global.y)??this._hitElements[0],typeof i=="string"&&(l.type=i),l}createWheelEvent(t){const i=this.allocateEvent(ia);return this.copyWheelData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.nativeEvent=t.nativeEvent,i.originalEvent=t,i.target=this.hitTest(i.global.x,i.global.y),i}clonePointerEvent(t,i){const n=this.allocateEvent(Fi);return n.nativeEvent=t.nativeEvent,n.originalEvent=t.originalEvent,this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.target=t.target,n.path=t.composedPath().slice(),n.type=i??n.type,n}copyWheelData(t,i){i.deltaMode=t.deltaMode,i.deltaX=t.deltaX,i.deltaY=t.deltaY,i.deltaZ=t.deltaZ}copyPointerData(t,i){t instanceof Fi&&i instanceof Fi&&(i.pointerId=t.pointerId,i.width=t.width,i.height=t.height,i.isPrimary=t.isPrimary,i.pointerType=t.pointerType,i.pressure=t.pressure,i.tangentialPressure=t.tangentialPressure,i.tiltX=t.tiltX,i.tiltY=t.tiltY,i.twist=t.twist)}copyMouseData(t,i){t instanceof Eu&&i instanceof Eu&&(i.altKey=t.altKey,i.button=t.button,i.buttons=t.buttons,i.client.copyFrom(t.client),i.ctrlKey=t.ctrlKey,i.metaKey=t.metaKey,i.movement.copyFrom(t.movement),i.screen.copyFrom(t.screen),i.shiftKey=t.shiftKey,i.global.copyFrom(t.global))}copyData(t,i){i.isTrusted=t.isTrusted,i.srcElement=t.srcElement,i.timeStamp=performance.now(),i.type=t.type,i.detail=t.detail,i.view=t.view,i.which=t.which,i.layer.copyFrom(t.layer),i.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const i=this.eventPool.get(t).pop()||new t(this);return i.eventPhase=i.NONE,i.currentTarget=null,i.path=null,i.target=null,i}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const i=t.constructor;this.eventPool.has(i)||this.eventPool.set(i,[]),this.eventPool.get(i).push(t)}notifyListeners(t,i){const n=t.currentTarget._events[i];if(n&&t.currentTarget.isInteractive())if("fn"in n)n.once&&t.currentTarget.removeListener(i,n.fn,void 0,!0),n.fn.call(n.context,t);else for(let l=0,o=n.length;l<o&&!t.propagationImmediatelyStopped;l++)n[l].once&&t.currentTarget.removeListener(i,n[l].fn,void 0,!0),n[l].fn.call(n[l].context,t)}}const yS=1,vS={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},jd=class qd{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new gS(null),pn.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Fi(null),this.rootWheelEvent=new ia(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...qd.defaultEventFeatures},{set:(i,n,l)=>(n==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=l),i[n]=l,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(t){const{view:i,resolution:n}=this.renderer;this.setTargetElement(i),this.resolution=n,qd._defaultEventMode=t.eventMode??"auto",Object.assign(this.features,t.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(t){t=t||"default";let i=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(i=!1),this.currentCursor===t)return;this.currentCursor=t;const n=this.cursorStyles[t];if(n)switch(typeof n){case"string":i&&(this.domElement.style.cursor=n);break;case"function":n(t);break;case"object":i&&Object.assign(this.domElement.style,n);break}else i&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}get pointer(){return this.rootPointerEvent}onPointerDown(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const i=this.normalizeToPointerData(t);this.autoPreventDefault&&i[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(let n=0,l=i.length;n<l;n++){const o=i[n],h=this.bootstrapEvent(this.rootPointerEvent,o);this.rootBoundary.mapEvent(h)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(t){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,pn.pointerMoved();const i=this.normalizeToPointerData(t);for(let n=0,l=i.length;n<l;n++){const o=this.bootstrapEvent(this.rootPointerEvent,i[n]);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let i=t.target;t.composedPath&&t.composedPath().length>0&&(i=t.composedPath()[0]);const n=i!==this.domElement?"outside":"",l=this.normalizeToPointerData(t);for(let o=0,h=l.length;o<h;o++){const c=this.bootstrapEvent(this.rootPointerEvent,l[o]);c.type+=n,this.rootBoundary.mapEvent(c)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const i=this.normalizeToPointerData(t);for(let n=0,l=i.length;n<l;n++){const o=this.bootstrapEvent(this.rootPointerEvent,i[n]);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){if(!this.features.wheel)return;const i=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(i)}setTargetElement(t){this.removeEvents(),this.domElement=t,pn.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;pn.addTickerListener();const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;pn.removeTickerListener();const t=this.domElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(t,i,n){const l=this.domElement.isConnected?this.domElement.getBoundingClientRect():{width:this.domElement.width,height:this.domElement.height,left:0,top:0},o=1/this.resolution;t.x=(i-l.left)*(this.domElement.width/l.width)*o,t.y=(n-l.top)*(this.domElement.height/l.height)*o}normalizeToPointerData(t){const i=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let n=0,l=t.changedTouches.length;n<l;n++){const o=t.changedTouches[n];typeof o.button>"u"&&(o.button=0),typeof o.buttons>"u"&&(o.buttons=1),typeof o.isPrimary>"u"&&(o.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof o.width>"u"&&(o.width=o.radiusX||1),typeof o.height>"u"&&(o.height=o.radiusY||1),typeof o.tiltX>"u"&&(o.tiltX=0),typeof o.tiltY>"u"&&(o.tiltY=0),typeof o.pointerType>"u"&&(o.pointerType="touch"),typeof o.pointerId>"u"&&(o.pointerId=o.identifier||0),typeof o.pressure>"u"&&(o.pressure=o.force||.5),typeof o.twist>"u"&&(o.twist=0),typeof o.tangentialPressure>"u"&&(o.tangentialPressure=0),typeof o.layerX>"u"&&(o.layerX=o.offsetX=o.clientX),typeof o.layerY>"u"&&(o.layerY=o.offsetY=o.clientY),o.isNormalized=!0,o.type=t.type,i.push(o)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){const n=t;typeof n.isPrimary>"u"&&(n.isPrimary=!0),typeof n.width>"u"&&(n.width=1),typeof n.height>"u"&&(n.height=1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="mouse"),typeof n.pointerId>"u"&&(n.pointerId=yS),typeof n.pressure>"u"&&(n.pressure=.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),n.isNormalized=!0,i.push(n)}else i.push(t);return i}normalizeWheelEvent(t){const i=this.rootWheelEvent;return this.transferMouseData(i,t),i.deltaX=t.deltaX,i.deltaY=t.deltaY,i.deltaZ=t.deltaZ,i.deltaMode=t.deltaMode,this.mapPositionToPoint(i.screen,t.clientX,t.clientY),i.global.copyFrom(i.screen),i.offset.copyFrom(i.screen),i.nativeEvent=t,i.type=t.type,i}bootstrapEvent(t,i){return t.originalEvent=null,t.nativeEvent=i,t.pointerId=i.pointerId,t.width=i.width,t.height=i.height,t.isPrimary=i.isPrimary,t.pointerType=i.pointerType,t.pressure=i.pressure,t.tangentialPressure=i.tangentialPressure,t.tiltX=i.tiltX,t.tiltY=i.tiltY,t.twist=i.twist,this.transferMouseData(t,i),this.mapPositionToPoint(t.screen,i.clientX,i.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=i.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=vS[t.type]||t.type),t}transferMouseData(t,i){t.isTrusted=i.isTrusted,t.srcElement=i.srcElement,t.timeStamp=performance.now(),t.type=i.type,t.altKey=i.altKey,t.button=i.button,t.buttons=i.buttons,t.client.x=i.clientX,t.client.y=i.clientY,t.ctrlKey=i.ctrlKey,t.metaKey=i.metaKey,t.movement.x=i.movementX,t.movement.y=i.movementY,t.page.x=i.pageX,t.page.y=i.pageY,t.relatedTarget=null,t.shiftKey=i.shiftKey}};jd.extension={name:"events",type:[pt.RendererSystem,pt.CanvasRendererSystem]},jd.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let Yd=jd;wt.add(Yd);function $v(s){return s==="dynamic"||s==="static"}const _S={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??$v(Yd.defaultEventMode)},set interactive(s){jt("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=s,this.eventMode=s?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Yd.defaultEventMode},set eventMode(s){this._internalInteractive=$v(s),this._internalEventMode=s},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(s,t,i){const n=typeof i=="boolean"&&i||typeof i=="object"&&i.capture,l=typeof i=="object"?i.signal:void 0,o=typeof i=="object"?i.once===!0:!1,h=typeof t=="function"?void 0:t;s=n?`${s}capture`:s;const c=typeof t=="function"?t:t.handleEvent,p=this;l&&l.addEventListener("abort",()=>{p.off(s,c,h)}),o?p.once(s,c,h):p.on(s,c,h)},removeEventListener(s,t,i){const n=typeof i=="boolean"&&i||typeof i=="object"&&i.capture,l=typeof t=="function"?void 0:t;s=n?`${s}capture`:s,t=typeof t=="function"?t:t.handleEvent,this.off(s,t,l)},dispatchEvent(s){if(!(s instanceof bl))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return s.defaultPrevented=!1,s.path=null,s.target=this,s.manager.dispatchEvent(s),!s.defaultPrevented}};ve.mixin(_S);const xS={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};ve.mixin(xS);const bS=9,Zo=100,TS=0,ES=0,Zv=2,Kv=1,AS=-1e3,SS=-1e3,wS=2;class Ax{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Dr.tablet||Dr.phone)&&this.createTouchHook();const i=document.createElement("div");i.style.width=`${Zo}px`,i.style.height=`${Zo}px`,i.style.position="absolute",i.style.top=`${TS}px`,i.style.left=`${ES}px`,i.style.zIndex=Zv.toString(),this.div=i,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const t=document.createElement("button");t.style.width=`${Kv}px`,t.style.height=`${Kv}px`,t.style.position="absolute",t.style.top=`${AS}px`,t.style.left=`${SS}px`,t.style.zIndex=wS.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.isInteractive()&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);const i=t.children;if(i)for(let n=0;n<i.length;n++)this.updateAccessibleObjects(i[n])}update(){const t=performance.now();if(Dr.android.device&&t<this.androidUpdateCount||(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:i,y:n,width:l,height:o}=this.renderer.view.getBoundingClientRect(),{width:h,height:c,resolution:p}=this.renderer,m=l/h*p,g=o/c*p;let y=this.div;y.style.left=`${i}px`,y.style.top=`${n}px`,y.style.width=`${h}px`,y.style.height=`${c}px`;for(let x=0;x<this.children.length;x++){const _=this.children[x];if(_.renderId!==this.renderId)_._accessibleActive=!1,ta(this.children,x,1),this.div.removeChild(_._accessibleDiv),this.pool.push(_._accessibleDiv),_._accessibleDiv=null,x--;else{y=_._accessibleDiv;let b=_.hitArea;const w=_.worldTransform;_.hitArea?(y.style.left=`${(w.tx+b.x*w.a)*m}px`,y.style.top=`${(w.ty+b.y*w.d)*g}px`,y.style.width=`${b.width*w.a*m}px`,y.style.height=`${b.height*w.d*g}px`):(b=_.getBounds(),this.capHitArea(b),y.style.left=`${b.x*m}px`,y.style.top=`${b.y*g}px`,y.style.width=`${b.width*m}px`,y.style.height=`${b.height*g}px`,y.title!==_.accessibleTitle&&_.accessibleTitle!==null&&(y.title=_.accessibleTitle),y.getAttribute("aria-label")!==_.accessibleHint&&_.accessibleHint!==null&&y.setAttribute("aria-label",_.accessibleHint)),(_.accessibleTitle!==y.title||_.tabIndex!==y.tabIndex)&&(y.title=_.accessibleTitle,y.tabIndex=_.tabIndex,this.debug&&this.updateDebugHTML(y))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:i,height:n}=this.renderer;t.x+t.width>i&&(t.width=i-t.x),t.y+t.height>n&&(t.height=n-t.y)}addChild(t){let i=this.pool.pop();i||(i=document.createElement("button"),i.style.width=`${Zo}px`,i.style.height=`${Zo}px`,i.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",i.style.position="absolute",i.style.zIndex=Zv.toString(),i.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?i.setAttribute("aria-live","off"):i.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?i.setAttribute("aria-relevant","additions"):i.setAttribute("aria-relevant","text"),i.addEventListener("click",this._onClick.bind(this)),i.addEventListener("focus",this._onFocus.bind(this)),i.addEventListener("focusout",this._onFocusOut.bind(this))),i.style.pointerEvents=t.accessiblePointerEvents,i.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?i.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(i.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&i.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(i),t._accessibleActive=!0,t._accessibleDiv=i,i.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,i){const{displayObject:n}=t.target,l=this.renderer.events.rootBoundary,o=Object.assign(new bl(l),{target:n});l.rootTarget=this.renderer.lastObjectRendered,i.forEach(h=>l.dispatchEvent(o,h))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===bS&&this.activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}Ax.extension={name:"accessibility",type:[pt.RendererPlugin,pt.CanvasRendererPlugin]};wt.add(Ax);const Sx=class Wd{constructor(t){this.stage=new Me,t=Object.assign({forceCanvas:!1},t),this.renderer=LA(t),Wd._plugins.forEach(i=>{i.init.call(this,t)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer?.view}get screen(){return this.renderer?.screen}destroy(t,i){const n=Wd._plugins.slice(0);n.reverse(),n.forEach(l=>{l.destroy.call(this)}),this.stage.destroy(i),this.stage=null,this.renderer.destroy(t),this.renderer=null}};Sx._plugins=[];let wx=Sx;wt.handleByList(pt.Application,wx._plugins);class Cx{static init(t){Object.defineProperty(this,"resizeTo",{set(i){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=i,i&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let i,n;if(this._resizeTo===globalThis.window)i=globalThis.innerWidth,n=globalThis.innerHeight;else{const{clientWidth:l,clientHeight:o}=this._resizeTo;i=l,n=o}this.renderer.resize(i,n),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}Cx.extension=pt.Application;wt.add(Cx);const Qv={loader:pt.LoadParser,resolver:pt.ResolveParser,cache:pt.CacheParser,detection:pt.DetectionParser};wt.handle(pt.Asset,s=>{const t=s.ref;Object.entries(Qv).filter(([i])=>!!t[i]).forEach(([i,n])=>wt.add(Object.assign(t[i],{extension:t[i].extension??n})))},s=>{const t=s.ref;Object.keys(Qv).filter(i=>!!t[i]).forEach(i=>wt.remove(t[i]))});class CS{constructor(t,i=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=i}add(t){t.forEach(i=>{this._assetList.push(i)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],i=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<i;n++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function oa(s,t){if(Array.isArray(t)){for(const i of t)if(s.startsWith(`data:${i}`))return!0;return!1}return s.startsWith(`data:${t}`)}function xn(s,t){const i=s.split("?")[0],n=Fe.extname(i).toLowerCase();return Array.isArray(t)?t.includes(n):n===t}const Gi=(s,t,i=!1)=>(Array.isArray(s)||(s=[s]),t?s.map(n=>typeof n=="string"||i?t(n):n):s),$d=(s,t)=>{const i=t.split("?")[1];return i&&(s+=`?${i}`),s};function Rx(s,t,i,n,l){const o=t[i];for(let h=0;h<o.length;h++){const c=o[h];i<t.length-1?Rx(s.replace(n[i],c),t,i+1,n,l):l.push(s.replace(n[i],c))}}function RS(s){const t=/\{(.*?)\}/g,i=s.match(t),n=[];if(i){const l=[];i.forEach(o=>{const h=o.substring(1,o.length-1).split(",");l.push(h)}),Rx(s,l,0,i,n)}else n.push(s);return n}const Au=s=>!Array.isArray(s);class MS{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const i=this._cache.get(t);return i||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),i}set(t,i){const n=Gi(t);let l;for(let c=0;c<this.parsers.length;c++){const p=this.parsers[c];if(p.test(i)){l=p.getCacheableAssets(n,i);break}}l||(l={},n.forEach(c=>{l[c]=i}));const o=Object.keys(l),h={cacheKeys:o,keys:n};if(n.forEach(c=>{this._cacheMap.set(c,h)}),o.forEach(c=>{const p=l?l[c]:i;this._cache.has(c)&&this._cache.get(c)!==p&&console.warn("[Cache] already has key:",c),this._cache.set(c,l[c])}),i instanceof St){const c=i;n.forEach(p=>{c.baseTexture!==St.EMPTY.baseTexture&&Gt.addToCache(c.baseTexture,p),St.addToCache(c,p)})}}remove(t){if(!this._cacheMap.has(t)){console.warn(`[Assets] Asset id ${t} was not found in the Cache`);return}const i=this._cacheMap.get(t);i.cacheKeys.forEach(n=>{this._cache.delete(n)}),i.keys.forEach(n=>{this._cacheMap.delete(n)})}get parsers(){return this._parsers}}const Zn=new MS;class DS{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,i,n)=>(this._parsersValidated=!1,t[i]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,i){const n={promise:null,parser:null};return n.promise=(async()=>{let l=null,o=null;if(i.loadParser&&(o=this._parserHash[i.loadParser],o||console.warn(`[Assets] specified load parser "${i.loadParser}" not found while loading ${t}`)),!o){for(let h=0;h<this.parsers.length;h++){const c=this.parsers[h];if(c.load&&c.test?.(t,i,this)){o=c;break}}if(!o)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}l=await o.load(t,i,this),n.parser=o;for(let h=0;h<this.parsers.length;h++){const c=this.parsers[h];c.parse&&c.parse&&await c.testParse?.(l,i,this)&&(l=await c.parse(l,i,this)||l,n.parser=c)}return l})(),n}async load(t,i){this._parsersValidated||this._validateParsers();let n=0;const l={},o=Au(t),h=Gi(t,m=>({alias:[m],src:m})),c=h.length,p=h.map(async m=>{const g=Fe.toAbsolute(m.src);if(!l[m.src])try{this.promiseCache[g]||(this.promiseCache[g]=this._getLoadPromiseAndParser(g,m)),l[m.src]=await this.promiseCache[g].promise,i&&i(++n/c)}catch(y){throw delete this.promiseCache[g],delete l[m.src],new Error(`[Loader.load] Failed to load ${g}.
${y}`)}});return await Promise.all(p),o?l[h[0].src]:l}async unload(t){const i=Gi(t,n=>({alias:[n],src:n})).map(async n=>{const l=Fe.toAbsolute(n.src),o=this.promiseCache[l];if(o){const h=await o.promise;delete this.promiseCache[l],o.parser?.unload?.(h,n,this)}});await Promise.all(i)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,i)=>(t[i.name]&&console.warn(`[Assets] loadParser name conflict "${i.name}"`),{...t,[i.name]:i}),{})}}var ki=(s=>(s[s.Low=0]="Low",s[s.Normal=1]="Normal",s[s.High=2]="High",s))(ki||{});const OS=".json",BS="application/json",IS={extension:{type:pt.LoadParser,priority:ki.Low},name:"loadJson",test(s){return oa(s,BS)||xn(s,OS)},async load(s){return await(await gt.ADAPTER.fetch(s)).json()}};wt.add(IS);const NS=".txt",US="text/plain",LS={name:"loadTxt",extension:{type:pt.LoadParser,priority:ki.Low},test(s){return oa(s,US)||xn(s,NS)},async load(s){return await(await gt.ADAPTER.fetch(s)).text()}};wt.add(LS);const PS=["normal","bold","100","200","300","400","500","600","700","800","900"],FS=[".ttf",".otf",".woff",".woff2"],GS=["font/ttf","font/otf","font/woff","font/woff2"],zS=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function HS(s){const t=Fe.extname(s),i=Fe.basename(s,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1));let n=i.length>0;for(const o of i)if(!o.match(zS)){n=!1;break}let l=i.join(" ");return n||(l=`"${l.replace(/[\\"]/g,"\\$&")}"`),l}const kS=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function XS(s){return kS.test(s)?s:encodeURI(s)}const VS={extension:{type:pt.LoadParser,priority:ki.Low},name:"loadWebFont",test(s){return oa(s,GS)||xn(s,FS)},async load(s,t){const i=gt.ADAPTER.getFontFaceSet();if(i){const n=[],l=t.data?.family??HS(s),o=t.data?.weights?.filter(c=>PS.includes(c))??["normal"],h=t.data??{};for(let c=0;c<o.length;c++){const p=o[c],m=new FontFace(l,`url(${XS(s)})`,{...h,weight:p});await m.load(),i.add(m),n.push(m)}return n.length===1?n[0]:n}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(s){(Array.isArray(s)?s:[s]).forEach(t=>gt.ADAPTER.getFontFaceSet().delete(t))}};wt.add(VS);const jS=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let ra=null,Zd=class{constructor(){ra||(ra=URL.createObjectURL(new Blob([jS],{type:"application/javascript"}))),this.worker=new Worker(ra)}};Zd.revokeObjectURL=function(){ra&&(URL.revokeObjectURL(ra),ra=null)};const qS=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let na=null;class Mx{constructor(){na||(na=URL.createObjectURL(new Blob([qS],{type:"application/javascript"}))),this.worker=new Worker(na)}}Mx.revokeObjectURL=function(){na&&(URL.revokeObjectURL(na),na=null)};let Jv=0,fd;class YS{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const{worker:i}=new Zd;i.addEventListener("message",n=>{i.terminate(),Zd.revokeObjectURL(),t(n.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){fd===void 0&&(fd=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<fd&&(this._createdWorkers++,t=new Mx().worker,t.addEventListener("message",i=>{this.complete(i.data),this.returnWorker(i.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){t.error!==void 0?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,i){await this._initWorkers();const n=new Promise((l,o)=>{this.queue.push({id:t,arguments:i,resolve:l,reject:o})});return this.next(),n}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const i=this.queue.pop(),n=i.id;this.resolveHash[Jv]={resolve:i.resolve,reject:i.reject},t.postMessage({data:i.arguments,uuid:Jv++,id:n})}}const t_=new YS;function Tl(s,t,i){s.resource.internal=!0;const n=new St(s),l=()=>{delete t.promiseCache[i],Zn.has(i)&&Zn.remove(i)};return n.baseTexture.once("destroyed",()=>{i in t.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),l())}),n.once("destroyed",()=>{s.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),l())}),n}const WS=[".jpeg",".jpg",".png",".webp",".avif"],$S=["image/jpeg","image/png","image/webp","image/avif"];async function ZS(s){const t=await gt.ADAPTER.fetch(s);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${s}: ${t.status} ${t.statusText}`);const i=await t.blob();return await createImageBitmap(i)}const Lu={name:"loadTextures",extension:{type:pt.LoadParser,priority:ki.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(s){return oa(s,$S)||xn(s,WS)},async load(s,t,i){const n=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let l;n?this.config.preferWorkers&&await t_.isImageBitmapSupported()?l=await t_.loadImageBitmap(s):l=await ZS(s):l=await new Promise((c,p)=>{const m=new Image;m.crossOrigin=this.config.crossOrigin,m.src=s,m.complete?c(m):(m.onload=()=>c(m),m.onerror=g=>p(g))});const o={...t.data};o.resolution??(o.resolution=Ir(s)),n&&o.resourceOptions?.ownsImageBitmap===void 0&&(o.resourceOptions={...o.resourceOptions},o.resourceOptions.ownsImageBitmap=!0);const h=new Gt(l,o);return h.resource.src=s,Tl(h,i,s)},unload(s){s.destroy(!0)}};wt.add(Lu);const KS=".svg",QS="image/svg+xml",JS={extension:{type:pt.LoadParser,priority:ki.High},name:"loadSVG",test(s){return oa(s,QS)||xn(s,KS)},async testParse(s){return Gd.test(s)},async parse(s,t,i){const n=new Gd(s,t?.data?.resourceOptions);await n.load();const l=new Gt(n,{resolution:Ir(s),...t?.data});return l.resource.src=t.src,Tl(l,i,t.src)},async load(s,t){return(await gt.ADAPTER.fetch(s)).text()},unload:Lu.unload};wt.add(JS);const tw=[".mp4",".m4v",".webm",".ogv"],ew=["video/mp4","video/webm","video/ogg"],iw={name:"loadVideo",extension:{type:pt.LoadParser,priority:ki.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(s){return oa(s,ew)||xn(s,tw)},async load(s,t,i){let n;const l=await(await gt.ADAPTER.fetch(s)).blob(),o=URL.createObjectURL(l);try{const h={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...t?.data?.resourceOptions,autoLoad:!0},c=new bx(o,h);await c.load();const p=new Gt(c,{alphaMode:await oE(),resolution:Ir(s),...t?.data});p.resource.src=s,n=Tl(p,i,s),n.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(o)})}catch(h){throw URL.revokeObjectURL(o),h}return n},unload(s){s.destroy(!0)}};wt.add(iw);class rw{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,i)=>`${t}${this._bundleIdConnector}${i}`,extractAssetIdFromBundle:(t,i)=>i.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(i=>{this._preferredOrder.push(i),i.priority||(i.priority=Object.keys(i.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const i=t;this._defaultSearchParams=Object.keys(i).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(i[n])}`).join("&")}}getAlias(t){const{alias:i,name:n,src:l,srcs:o}=t;return Gi(i||n||l||o,h=>typeof h=="string"?h:Array.isArray(h)?h.map(c=>c?.src??c?.srcs??c):h?.src||h?.srcs?h.src??h.srcs:h,!0)}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(i=>{this.addBundle(i.name,i.assets)})}addBundle(t,i){const n=[];Array.isArray(i)?i.forEach(l=>{const o=l.src??l.srcs,h=l.alias??l.name;let c;if(typeof h=="string"){const p=this._createBundleAssetId(t,h);n.push(p),c=[h,p]}else{const p=h.map(m=>this._createBundleAssetId(t,m));n.push(...p),c=[...h,...p]}this.add({...l,alias:c,src:o})}):Object.keys(i).forEach(l=>{const o=[l,this._createBundleAssetId(t,l)];if(typeof i[l]=="string")this.add({alias:o,src:i[l]});else if(Array.isArray(i[l]))this.add({alias:o,src:i[l]});else{const h=i[l],c=h.src??h.srcs;this.add({...h,alias:o,src:Array.isArray(c)?c:[c]})}n.push(...o)}),this._bundles[t]=n}add(t,i,n,l,o){const h=[];typeof t=="string"||Array.isArray(t)&&typeof t[0]=="string"?(jt("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),h.push({alias:t,src:i,data:n,format:l,loadParser:o})):Array.isArray(t)?h.push(...t):h.push(t);let c;c=p=>{this.hasKey(p)&&console.warn(`[Resolver] already has key: ${p} overwriting`)},Gi(h).forEach(p=>{const{src:m,srcs:g}=p;let{data:y,format:x,loadParser:_}=p;const b=Gi(m||g).map(C=>typeof C=="string"?RS(C):Array.isArray(C)?C:[C]),w=this.getAlias(p);Array.isArray(w)?w.forEach(c):c(w);const A=[];b.forEach(C=>{C.forEach(U=>{let O={};if(typeof U!="object"){O.src=U;for(let L=0;L<this._parsers.length;L++){const B=this._parsers[L];if(B.test(U)){O=B.parse(U);break}}}else y=U.data??y,x=U.format??x,_=U.loadParser??_,O={...O,...U};if(!w)throw new Error(`[Resolver] alias is undefined for this asset: ${O.src}`);O=this.buildResolvedAsset(O,{aliases:w,data:y,format:x,loadParser:_}),A.push(O)})}),w.forEach(C=>{this._assetMap[C]=A})})}resolveBundle(t){const i=Au(t);t=Gi(t);const n={};return t.forEach(l=>{const o=this._bundles[l];if(o){const h=this.resolve(o),c={};for(const p in h){const m=h[p];c[this._extractAssetIdFromBundle(l,p)]=m}n[l]=c}}),i?n[t[0]]:n}resolveUrl(t){const i=this.resolve(t);if(typeof t!="string"){const n={};for(const l in i)n[l]=i[l].src;return n}return i.src}resolve(t){const i=Au(t);t=Gi(t);const n={};return t.forEach(l=>{if(!this._resolverHash[l])if(this._assetMap[l]){let o=this._assetMap[l];const h=o[0],c=this._getPreferredOrder(o);c?.priority.forEach(p=>{c.params[p].forEach(m=>{const g=o.filter(y=>y[p]?y[p]===m:!1);g.length&&(o=g)})}),this._resolverHash[l]=o[0]??h}else this._resolverHash[l]=this.buildResolvedAsset({alias:[l],src:l},{});n[l]=this._resolverHash[l]}),i?n[t[0]]:n}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let i=0;i<t.length;i++){const n=t[0],l=this._preferredOrder.find(o=>o.params.format.includes(n.format));if(l)return l}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const i=/\?/.test(t)?"&":"?";return`${t}${i}${this._defaultSearchParams}`}buildResolvedAsset(t,i){const{aliases:n,data:l,loadParser:o,format:h}=i;return(this._basePath||this._rootPath)&&(t.src=Fe.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=n??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...l||{},...t.data},t.loadParser=o??t.loadParser,t.format=h??t.format??Fe.extname(t.src).slice(1),t.srcs=t.src,t.name=t.alias,t}}class nw{constructor(){this._detections=[],this._initialized=!1,this.resolver=new rw,this.loader=new DS,this.cache=Zn,this._backgroundLoader=new CS(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let o=t.manifest;typeof o=="string"&&(o=await this.load(o)),this.resolver.addManifest(o)}const i=t.texturePreference?.resolution??1,n=typeof i=="number"?[i]:i,l=await this._detectFormats({preferredFormats:t.texturePreference?.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:l,resolution:n}}),t.preferences&&this.setPreferences(t.preferences)}add(t,i,n,l,o){this.resolver.add(t,i,n,l,o)}async load(t,i){this._initialized||await this.init();const n=Au(t),l=Gi(t).map(c=>{if(typeof c!="string"){const p=this.resolver.getAlias(c);return p.some(m=>!this.resolver.hasKey(m))&&this.add(c),Array.isArray(p)?p[0]:p}return this.resolver.hasKey(c)||this.add({alias:c,src:c}),c}),o=this.resolver.resolve(l),h=await this._mapLoadToResolve(o,i);return n?h[l[0]]:h}addBundle(t,i){this.resolver.addBundle(t,i)}async loadBundle(t,i){this._initialized||await this.init();let n=!1;typeof t=="string"&&(n=!0,t=[t]);const l=this.resolver.resolveBundle(t),o={},h=Object.keys(l);let c=0,p=0;const m=()=>{i?.(++c/p)},g=h.map(y=>{const x=l[y];return p+=Object.keys(x).length,this._mapLoadToResolve(x,m).then(_=>{o[y]=_})});return await Promise.all(g),n?o[t[0]]:o}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const i=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(i))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const i=this.resolver.resolveBundle(t);Object.values(i).forEach(n=>{this._backgroundLoader.add(Object.values(n))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return Zn.get(t);const i={};for(let n=0;n<t.length;n++)i[n]=Zn.get(t[n]);return i}async _mapLoadToResolve(t,i){const n=Object.values(t),l=Object.keys(t);this._backgroundLoader.active=!1;const o=await this.loader.load(n,i);this._backgroundLoader.active=!0;const h={};return n.forEach((c,p)=>{const m=o[c.src],g=[c.src];c.alias&&g.push(...c.alias),h[l[p]]=m,Zn.set(g,m)}),h}async unload(t){this._initialized||await this.init();const i=Gi(t).map(l=>typeof l!="string"?l.src:l),n=this.resolver.resolve(i);await this._unloadFromResolved(n)}async unloadBundle(t){this._initialized||await this.init(),t=Gi(t);const i=this.resolver.resolveBundle(t),n=Object.keys(i).map(l=>this._unloadFromResolved(i[l]));await Promise.all(n)}async _unloadFromResolved(t){const i=Object.values(t);i.forEach(n=>{Zn.remove(n.src)}),await this.loader.unload(i)}async _detectFormats(t){let i=[];t.preferredFormats&&(i=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const n of t.detections)t.skipDetections||await n.test()?i=await n.add(i):t.skipDetections||(i=await n.remove(i));return i=i.filter((n,l)=>i.indexOf(n)===l),i}get detections(){return this._detections}get preferWorkers(){return Lu.config.preferWorkers}set preferWorkers(t){jt("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:t})}setPreferences(t){this.loader.parsers.forEach(i=>{i.config&&Object.keys(i.config).filter(n=>n in t).forEach(n=>{i.config[n]=t[n]})})}}const Ko=new nw;wt.handleByList(pt.LoadParser,Ko.loader.parsers).handleByList(pt.ResolveParser,Ko.resolver.parsers).handleByList(pt.CacheParser,Ko.cache.parsers).handleByList(pt.DetectionParser,Ko.detections);const sw={extension:pt.CacheParser,test:s=>Array.isArray(s)&&s.every(t=>t instanceof St),getCacheableAssets:(s,t)=>{const i={};return s.forEach(n=>{t.forEach((l,o)=>{i[n+(o===0?"":o+1)]=l})}),i}};wt.add(sw);async function Dx(s){if("Image"in globalThis)return new Promise(t=>{const i=new Image;i.onload=()=>{t(!0)},i.onerror=()=>{t(!1)},i.src=s});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(s)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const aw={extension:{type:pt.DetectionParser,priority:1},test:async()=>Dx("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async s=>[...s,"avif"],remove:async s=>s.filter(t=>t!=="avif")};wt.add(aw);const lw={extension:{type:pt.DetectionParser,priority:0},test:async()=>Dx("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async s=>[...s,"webp"],remove:async s=>s.filter(t=>t!=="webp")};wt.add(lw);const e_=["png","jpg","jpeg"],ow={extension:{type:pt.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async s=>[...s,...e_],remove:async s=>s.filter(t=>!e_.includes(t))};wt.add(ow);const uw="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function fp(s){return uw?!1:document.createElement("video").canPlayType(s)!==""}const hw={extension:{type:pt.DetectionParser,priority:0},test:async()=>fp("video/webm"),add:async s=>[...s,"webm"],remove:async s=>s.filter(t=>t!=="webm")};wt.add(hw);const cw={extension:{type:pt.DetectionParser,priority:0},test:async()=>fp("video/mp4"),add:async s=>[...s,"mp4","m4v"],remove:async s=>s.filter(t=>t!=="mp4"&&t!=="m4v")};wt.add(cw);const fw={extension:{type:pt.DetectionParser,priority:0},test:async()=>fp("video/ogg"),add:async s=>[...s,"ogv"],remove:async s=>s.filter(t=>t!=="ogv")};wt.add(fw);const dw={extension:pt.ResolveParser,test:Lu.test,parse:s=>({resolution:parseFloat(gt.RETINA_PREFIX.exec(s)?.[1]??"1"),format:Fe.extname(s).slice(1),src:s})};wt.add(dw);var je=(s=>(s[s.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",s[s.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",s[s.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",s[s.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",s[s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",s[s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",s[s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",s[s.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",s[s.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",s[s.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",s[s.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",s[s.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",s[s.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",s[s.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",s[s.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",s[s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",s[s.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",s[s.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",s[s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",s[s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",s[s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",s[s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",s[s.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",s[s.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",s[s.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",s[s.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",s[s.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",s[s.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",s[s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",s[s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",s[s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",s))(je||{});const Su={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let Ki,$s;function i_(){$s={bptc:Ki.getExtension("EXT_texture_compression_bptc"),astc:Ki.getExtension("WEBGL_compressed_texture_astc"),etc:Ki.getExtension("WEBGL_compressed_texture_etc"),s3tc:Ki.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Ki.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:Ki.getExtension("WEBGL_compressed_texture_pvrtc")||Ki.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:Ki.getExtension("WEBGL_compressed_texture_etc1"),atc:Ki.getExtension("WEBGL_compressed_texture_atc")}}const pw={extension:{type:pt.DetectionParser,priority:2},test:async()=>{const s=gt.ADAPTER.createCanvas().getContext("webgl");return s?(Ki=s,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async s=>{$s||i_();const t=[];for(const i in $s)$s[i]&&t.push(i);return[...t,...s]},remove:async s=>($s||i_(),s.filter(t=>!(t in $s)))};wt.add(pw);class mw extends Ou{constructor(t,i={width:1,height:1,autoLoad:!0}){let n,l;typeof t=="string"?(n=t,l=new Uint8Array):(n=null,l=t),super(l,i),this.origin=n,this.buffer=l?new wd(l):null,this._load=null,this.loaded=!1,this.origin!==null&&i.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(t=>t.blob()).then(t=>t.arrayBuffer()).then(t=>(this.data=new Uint32Array(t),this.buffer=new wd(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),this)),this._load)}}class Qn extends mw{constructor(t,i){super(t,i),this.format=i.format,this.levels=i.levels||1,this._width=i.width,this._height=i.height,this._extension=Qn._formatToExtension(this.format),(i.levelBuffers||this.buffer)&&(this._levelBuffers=i.levelBuffers||Qn._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,i,n){const l=t.gl;if(!t.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;l.pixelStorei(l.UNPACK_ALIGNMENT,4);for(let o=0,h=this.levels;o<h;o++){const{levelID:c,levelWidth:p,levelHeight:m,levelBuffer:g}=this._levelBuffers[o];l.compressedTexImage2D(l.TEXTURE_2D,c,this.format,p,m,0,g)}return!0}onBlobLoaded(){this._levelBuffers=Qn._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=35916&&t<=35919)return"s3tc_sRGB";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t===36196)return"etc1";if(t===35986||t===35987||t===34798)return"atc";if(t>=36492&&t<=36495)return"bptc";if(t===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${t}`)}static _createLevelBuffers(t,i,n,l,o,h,c){const p=new Array(n);let m=t.byteOffset,g=h,y=c,x=g+l-1&~(l-1),_=y+o-1&~(o-1),b=x*_*Su[i];for(let w=0;w<n;w++)p[w]={levelID:w,levelWidth:n>1?g:x,levelHeight:n>1?y:_,levelBuffer:new Uint8Array(t.buffer,m,b)},m+=b,g=g>>1||1,y=y>>1||1,x=g+l-1&~(l-1),_=y+o-1&~(o-1),b=x*_*Su[i];return p}}const dd=4,Qo=124,gw=32,r_=20,yw=542327876,Jo={HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},vw={FOURCC:2},tu={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3},_w=1,xw=2,bw=4,Tw=64,Ew=512,Aw=131072,Sw=827611204,ww=861165636,Cw=894720068,Rw=808540228,Mw=4,Dw={[Sw]:je.COMPRESSED_RGBA_S3TC_DXT1_EXT,[ww]:je.COMPRESSED_RGBA_S3TC_DXT3_EXT,[Cw]:je.COMPRESSED_RGBA_S3TC_DXT5_EXT},Ow={70:je.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:je.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:je.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:je.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:je.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:je.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:je.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:je.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:je.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:je.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:je.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:je.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:je.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function Bw(s){const t=new Uint32Array(s);if(t[0]!==yw)throw new Error("Invalid DDS file magic word");const i=new Uint32Array(s,0,Qo/Uint32Array.BYTES_PER_ELEMENT),n=i[Jo.HEIGHT],l=i[Jo.WIDTH],o=i[Jo.MIPMAP_COUNT],h=new Uint32Array(s,Jo.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,gw/Uint32Array.BYTES_PER_ELEMENT),c=h[_w];if(c&bw){const p=h[vw.FOURCC];if(p!==Rw){const U=Dw[p],O=dd+Qo,L=new Uint8Array(s,O);return[new Qn(L,{format:U,width:l,height:n,levels:o})]}const m=dd+Qo,g=new Uint32Array(t.buffer,m,r_/Uint32Array.BYTES_PER_ELEMENT),y=g[tu.DXGI_FORMAT],x=g[tu.RESOURCE_DIMENSION],_=g[tu.MISC_FLAG],b=g[tu.ARRAY_SIZE],w=Ow[y];if(w===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${y}`);if(_===Mw)throw new Error("DDSParser does not support cubemap textures");if(x===6)throw new Error("DDSParser does not supported 3D texture data");const A=new Array,C=dd+Qo+r_;if(b===1)A.push(new Uint8Array(s,C));else{const U=Su[w];let O=0,L=l,B=n;for(let D=0;D<o;D++){const q=Math.max(1,L+3&-4),rt=Math.max(1,B+3&-4),at=q*rt*U;O+=at,L=L>>>1,B=B>>>1}let H=C;for(let D=0;D<b;D++)A.push(new Uint8Array(s,H,O)),H+=O}return A.map(U=>new Qn(U,{format:w,width:l,height:n,levels:o}))}throw c&Tw?new Error("DDSParser does not support uncompressed texture data."):c&Ew?new Error("DDSParser does not supported YUV uncompressed texture data."):c&Aw?new Error("DDSParser does not support single-channel (lumninance) texture data!"):c&xw?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const n_=[171,75,84,88,32,49,49,187,13,10,26,10],Iw=67305985,Li={ENDIANNESS:12,GL_TYPE:16,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Kd=64,s_={[Dt.UNSIGNED_BYTE]:1,[Dt.UNSIGNED_SHORT]:2,[Dt.INT]:4,[Dt.UNSIGNED_INT]:4,[Dt.FLOAT]:4,[Dt.HALF_FLOAT]:8},Nw={[ht.RGBA]:4,[ht.RGB]:3,[ht.RG]:2,[ht.RED]:1,[ht.LUMINANCE]:1,[ht.LUMINANCE_ALPHA]:2,[ht.ALPHA]:1},Uw={[Dt.UNSIGNED_SHORT_4_4_4_4]:2,[Dt.UNSIGNED_SHORT_5_5_5_1]:2,[Dt.UNSIGNED_SHORT_5_6_5]:2};function Lw(s,t,i=!1){const n=new DataView(t);if(!Pw(s,n))return null;const l=n.getUint32(Li.ENDIANNESS,!0)===Iw,o=n.getUint32(Li.GL_TYPE,l),h=n.getUint32(Li.GL_FORMAT,l),c=n.getUint32(Li.GL_INTERNAL_FORMAT,l),p=n.getUint32(Li.PIXEL_WIDTH,l),m=n.getUint32(Li.PIXEL_HEIGHT,l)||1,g=n.getUint32(Li.PIXEL_DEPTH,l)||1,y=n.getUint32(Li.NUMBER_OF_ARRAY_ELEMENTS,l)||1,x=n.getUint32(Li.NUMBER_OF_FACES,l),_=n.getUint32(Li.NUMBER_OF_MIPMAP_LEVELS,l),b=n.getUint32(Li.BYTES_OF_KEY_VALUE_DATA,l);if(m===0||g!==1)throw new Error("Only 2D textures are supported");if(x!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(y!==1)throw new Error("WebGL does not support array textures");const w=4,A=4,C=p+3&-4,U=m+3&-4,O=new Array(y);let L=p*m;o===0&&(L=C*U);let B;if(o!==0?s_[o]?B=s_[o]*Nw[h]:B=Uw[o]:B=Su[c],B===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const H=i?Gw(n,b,l):null;let D=L*B,q=p,rt=m,at=C,it=U,k=Kd+b;for(let Z=0;Z<_;Z++){const J=n.getUint32(k,l);let dt=k+4;for(let T=0;T<y;T++){let R=O[T];R||(R=O[T]=new Array(_)),R[Z]={levelID:Z,levelWidth:_>1||o!==0?q:at,levelHeight:_>1||o!==0?rt:it,levelBuffer:new Uint8Array(t,dt,D)},dt+=D}k+=J+4,k=k%4!==0?k+4-k%4:k,q=q>>1||1,rt=rt>>1||1,at=q+w-1&-4,it=rt+A-1&-4,D=at*it*B}return o!==0?{uncompressed:O.map(Z=>{let J=Z[0].levelBuffer,dt=!1;return o===Dt.FLOAT?J=new Float32Array(Z[0].levelBuffer.buffer,Z[0].levelBuffer.byteOffset,Z[0].levelBuffer.byteLength/4):o===Dt.UNSIGNED_INT?(dt=!0,J=new Uint32Array(Z[0].levelBuffer.buffer,Z[0].levelBuffer.byteOffset,Z[0].levelBuffer.byteLength/4)):o===Dt.INT&&(dt=!0,J=new Int32Array(Z[0].levelBuffer.buffer,Z[0].levelBuffer.byteOffset,Z[0].levelBuffer.byteLength/4)),{resource:new Ou(J,{width:Z[0].levelWidth,height:Z[0].levelHeight}),type:o,format:dt?Fw(h):h}}),kvData:H}:{compressed:O.map(Z=>new Qn(null,{format:c,width:p,height:m,levels:_,levelBuffers:Z})),kvData:H}}function Pw(s,t){for(let i=0;i<n_.length;i++)if(t.getUint8(i)!==n_[i])return console.error(`${s} is not a valid *.ktx file!`),!1;return!0}function Fw(s){switch(s){case ht.RGBA:return ht.RGBA_INTEGER;case ht.RGB:return ht.RGB_INTEGER;case ht.RG:return ht.RG_INTEGER;case ht.RED:return ht.RED_INTEGER;default:return s}}function Gw(s,t,i){const n=new Map;let l=0;for(;l<t;){const o=s.getUint32(Kd+l,i),h=Kd+l+4,c=3-(o+3)%4;if(o===0||o>t-l){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let p=0;for(;p<o&&s.getUint8(h+p)!==0;p++);if(p===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const m=new TextDecoder().decode(new Uint8Array(s.buffer,h,p)),g=new DataView(s.buffer,h+p+1,o-p-1);n.set(m,g),l+=4+o+c}return n}const zw={extension:{type:pt.LoadParser,priority:ki.High},name:"loadDDS",test(s){return xn(s,".dds")},async load(s,t,i){const n=await(await gt.ADAPTER.fetch(s)).arrayBuffer(),l=Bw(n).map(o=>{const h=new Gt(o,{mipmap:nr.OFF,alphaMode:si.NO_PREMULTIPLIED_ALPHA,resolution:Ir(s),...t.data});return Tl(h,i,s)});return l.length===1?l[0]:l},unload(s){Array.isArray(s)?s.forEach(t=>t.destroy(!0)):s.destroy(!0)}};wt.add(zw);const Hw={extension:{type:pt.LoadParser,priority:ki.High},name:"loadKTX",test(s){return xn(s,".ktx")},async load(s,t,i){const n=await(await gt.ADAPTER.fetch(s)).arrayBuffer(),{compressed:l,uncompressed:o,kvData:h}=Lw(s,n),c=l??o,p={mipmap:nr.OFF,alphaMode:si.NO_PREMULTIPLIED_ALPHA,resolution:Ir(s),...t.data},m=c.map(g=>{c===o&&Object.assign(p,{type:g.type,format:g.format});const y=g.resource??g,x=new Gt(y,p);return x.ktxKeyValueData=h,Tl(x,i,s)});return m.length===1?m[0]:m},unload(s){Array.isArray(s)?s.forEach(t=>t.destroy(!0)):s.destroy(!0)}};wt.add(Hw);const kw=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],Xw={extension:pt.ResolveParser,test:s=>{const t=Fe.extname(s).slice(1);return["basis","ktx","dds"].includes(t)},parse:s=>{const t=s.split("."),i=t.pop();if(["ktx","dds"].includes(i)){const n=t.pop();if(kw.includes(n))return{resolution:parseFloat(gt.RETINA_PREFIX.exec(s)?.[1]??"1"),format:n,src:s}}return{resolution:parseFloat(gt.RETINA_PREFIX.exec(s)?.[1]??"1"),format:i,src:s}}};wt.add(Xw);const eu=new Ht,Vw=4,Ox=class pl{constructor(t){this.renderer=t,this._rendererPremultipliedAlpha=!1}contextChange(){const t=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}async image(t,i,n,l){const o=new Image;return o.src=await this.base64(t,i,n,l),o}async base64(t,i,n,l){const o=this.canvas(t,l);if(o.toBlob!==void 0)return new Promise((h,c)=>{o.toBlob(p=>{if(!p){c(new Error("ICanvas.toBlob failed!"));return}const m=new FileReader;m.onload=()=>h(m.result),m.onerror=c,m.readAsDataURL(p)},i,n)});if(o.toDataURL!==void 0)return o.toDataURL(i,n);if(o.convertToBlob!==void 0){const h=await o.convertToBlob({type:i,quality:n});return new Promise((c,p)=>{const m=new FileReader;m.onload=()=>c(m.result),m.onerror=p,m.readAsDataURL(h)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(t,i){const{pixels:n,width:l,height:o,flipY:h,premultipliedAlpha:c}=this._rawPixels(t,i);h&&pl._flipY(n,l,o),c&&pl._unpremultiplyAlpha(n);const p=new AE(l,o,1),m=new ImageData(new Uint8ClampedArray(n.buffer),l,o);return p.context.putImageData(m,0,0),p.canvas}pixels(t,i){const{pixels:n,width:l,height:o,flipY:h,premultipliedAlpha:c}=this._rawPixels(t,i);return h&&pl._flipY(n,l,o),c&&pl._unpremultiplyAlpha(n),n}_rawPixels(t,i){const n=this.renderer;if(!n)throw new Error("The Extract has already been destroyed");let l,o=!1,h=!1,c,p=!1;t&&(t instanceof is?c=t:(c=n.generateTexture(t,{region:i,resolution:n.resolution,multisample:n.multisample}),p=!0,i&&(eu.width=i.width,eu.height=i.height,i=eu)));const m=n.gl;if(c){if(l=c.baseTexture.resolution,i=i??c.frame,o=!1,h=c.baseTexture.alphaMode>0&&c.baseTexture.format===ht.RGBA,!p){n.renderTexture.bind(c);const _=c.framebuffer.glFramebuffers[n.CONTEXT_UID];_.blitFramebuffer&&n.framebuffer.bind(_.blitFramebuffer)}}else l=n.resolution,i||(i=eu,i.width=n.width/l,i.height=n.height/l),o=!0,h=this._rendererPremultipliedAlpha,n.renderTexture.bind();const g=Math.max(Math.round(i.width*l),1),y=Math.max(Math.round(i.height*l),1),x=new Uint8Array(Vw*g*y);return m.readPixels(Math.round(i.x*l),Math.round(i.y*l),g,y,m.RGBA,m.UNSIGNED_BYTE,x),p&&c?.destroy(!0),{pixels:x,width:g,height:y,flipY:o,premultipliedAlpha:h}}destroy(){this.renderer=null}static _flipY(t,i,n){const l=i<<2,o=n>>1,h=new Uint8Array(l);for(let c=0;c<o;c++){const p=c*l,m=(n-c-1)*l;h.set(t.subarray(p,p+l)),t.copyWithin(p,m,m+l),t.set(h,m)}}static _unpremultiplyAlpha(t){t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));const i=t.length;for(let n=0;n<i;n+=4){const l=t[n+3];if(l!==0){const o=255.001/l;t[n]=t[n]*o+.5,t[n+1]=t[n+1]*o+.5,t[n+2]=t[n+2]*o+.5}}}};Ox.extension={name:"extract",type:pt.RendererSystem};let jw=Ox;wt.add(jw);const wu={build(s){const t=s.points;let i,n,l,o,h,c;if(s.type===qe.CIRC){const b=s.shape;i=b.x,n=b.y,h=c=b.radius,l=o=0}else if(s.type===qe.ELIP){const b=s.shape;i=b.x,n=b.y,h=b.width,c=b.height,l=o=0}else{const b=s.shape,w=b.width/2,A=b.height/2;i=b.x+w,n=b.y+A,h=c=Math.max(0,Math.min(b.radius,Math.min(w,A))),l=w-h,o=A-c}if(!(h>=0&&c>=0&&l>=0&&o>=0)){t.length=0;return}const p=Math.ceil(2.3*Math.sqrt(h+c)),m=p*8+(l?4:0)+(o?4:0);if(t.length=m,m===0)return;if(p===0){t.length=8,t[0]=t[6]=i+l,t[1]=t[3]=n+o,t[2]=t[4]=i-l,t[5]=t[7]=n-o;return}let g=0,y=p*4+(l?2:0)+2,x=y,_=m;{const b=l+h,w=o,A=i+b,C=i-b,U=n+w;if(t[g++]=A,t[g++]=U,t[--y]=U,t[--y]=C,o){const O=n-w;t[x++]=C,t[x++]=O,t[--_]=O,t[--_]=A}}for(let b=1;b<p;b++){const w=Math.PI/2*(b/p),A=l+Math.cos(w)*h,C=o+Math.sin(w)*c,U=i+A,O=i-A,L=n+C,B=n-C;t[g++]=U,t[g++]=L,t[--y]=L,t[--y]=O,t[x++]=O,t[x++]=B,t[--_]=B,t[--_]=U}{const b=l,w=o+c,A=i+b,C=i-b,U=n+w,O=n-w;t[g++]=A,t[g++]=U,t[--_]=O,t[--_]=A,l&&(t[g++]=C,t[g++]=U,t[--_]=O,t[--_]=C)}},triangulate(s,t){const i=s.points,n=t.points,l=t.indices;if(i.length===0)return;let o=n.length/2;const h=o;let c,p;if(s.type!==qe.RREC){const g=s.shape;c=g.x,p=g.y}else{const g=s.shape;c=g.x+g.width/2,p=g.y+g.height/2}const m=s.matrix;n.push(s.matrix?m.a*c+m.c*p+m.tx:c,s.matrix?m.b*c+m.d*p+m.ty:p),o++,n.push(i[0],i[1]);for(let g=2;g<i.length;g+=2)n.push(i[g],i[g+1]),l.push(o++,h,o);l.push(h+1,h,o)}};function a_(s,t=!1){const i=s.length;if(i<6)return;let n=0;for(let l=0,o=s[i-2],h=s[i-1];l<i;l+=2){const c=s[l],p=s[l+1];n+=(c-o)*(p+h),o=c,h=p}if(!t&&n>0||t&&n<=0){const l=i/2;for(let o=l+l%2;o<i;o+=2){const h=i-o-2,c=i-o-1,p=o,m=o+1;[s[h],s[p]]=[s[p],s[h]],[s[c],s[m]]=[s[m],s[c]]}}}const Bx={build(s){s.points=s.shape.points.slice()},triangulate(s,t){let i=s.points;const n=s.holes,l=t.points,o=t.indices;if(i.length>=6){a_(i,!1);const h=[];for(let m=0;m<n.length;m++){const g=n[m];a_(g.points,!0),h.push(i.length/2),i=i.concat(g.points)}const c=TT(i,h,2);if(!c)return;const p=l.length/2;for(let m=0;m<c.length;m+=3)o.push(c[m]+p),o.push(c[m+1]+p),o.push(c[m+2]+p);for(let m=0;m<i.length;m++)l.push(i[m])}}},qw={build(s){const t=s.shape,i=t.x,n=t.y,l=t.width,o=t.height,h=s.points;h.length=0,l>=0&&o>=0&&h.push(i,n,i+l,n,i+l,n+o,i,n+o)},triangulate(s,t){const i=s.points,n=t.points;if(i.length===0)return;const l=n.length/2;n.push(i[0],i[1],i[2],i[3],i[6],i[7],i[4],i[5]),t.indices.push(l,l+1,l+2,l+1,l+2,l+3)}},Yw={build(s){wu.build(s)},triangulate(s,t){wu.triangulate(s,t)}};var Ri=(s=>(s.MITER="miter",s.BEVEL="bevel",s.ROUND="round",s))(Ri||{}),gn=(s=>(s.BUTT="butt",s.ROUND="round",s.SQUARE="square",s))(gn||{});const sa={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(s,t=20){if(!this.adaptive||!s||isNaN(s))return t;let i=Math.ceil(s/this.maxLength);return i<this.minSegments?i=this.minSegments:i>this.maxSegments&&(i=this.maxSegments),i}};class l_{static curveTo(t,i,n,l,o,h){const c=h[h.length-2],p=h[h.length-1]-i,m=c-t,g=l-i,y=n-t,x=Math.abs(p*y-m*g);if(x<1e-8||o===0)return(h[h.length-2]!==t||h[h.length-1]!==i)&&h.push(t,i),null;const _=p*p+m*m,b=g*g+y*y,w=p*g+m*y,A=o*Math.sqrt(_)/x,C=o*Math.sqrt(b)/x,U=A*w/_,O=C*w/b,L=A*y+C*m,B=A*g+C*p,H=m*(C+U),D=p*(C+U),q=y*(A+O),rt=g*(A+O),at=Math.atan2(D-B,H-L),it=Math.atan2(rt-B,q-L);return{cx:L+t,cy:B+i,radius:o,startAngle:at,endAngle:it,anticlockwise:m*g>y*p}}static arc(t,i,n,l,o,h,c,p,m){const g=c-h,y=sa._segmentsCount(Math.abs(g)*o,Math.ceil(Math.abs(g)/yu)*40),x=g/(y*2),_=x*2,b=Math.cos(x),w=Math.sin(x),A=y-1,C=A%1/A;for(let U=0;U<=A;++U){const O=U+C*U,L=x+h+_*O,B=Math.cos(L),H=-Math.sin(L);m.push((b*B+w*H)*o+n,(b*-H+w*B)*o+l)}}}class Ww{constructor(){this.reset()}begin(t,i,n){this.reset(),this.style=t,this.start=i,this.attribStart=n}end(t,i){this.attribSize=i-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class dp{static curveLength(t,i,n,l,o,h,c,p){let m=0,g=0,y=0,x=0,_=0,b=0,w=0,A=0,C=0,U=0,O=0,L=t,B=i;for(let H=1;H<=10;++H)g=H/10,y=g*g,x=y*g,_=1-g,b=_*_,w=b*_,A=w*t+3*b*g*n+3*_*y*o+x*c,C=w*i+3*b*g*l+3*_*y*h+x*p,U=L-A,O=B-C,L=A,B=C,m+=Math.sqrt(U*U+O*O);return m}static curveTo(t,i,n,l,o,h,c){const p=c[c.length-2],m=c[c.length-1];c.length-=2;const g=sa._segmentsCount(dp.curveLength(p,m,t,i,n,l,o,h));let y=0,x=0,_=0,b=0,w=0;c.push(p,m);for(let A=1,C=0;A<=g;++A)C=A/g,y=1-C,x=y*y,_=x*y,b=C*C,w=b*C,c.push(_*p+3*x*C*t+3*y*b*n+w*o,_*m+3*x*C*i+3*y*b*l+w*h)}}function o_(s,t,i,n,l,o,h,c){const p=s-i*l,m=t-n*l,g=s+i*o,y=t+n*o;let x,_;h?(x=n,_=-i):(x=-n,_=i);const b=p+x,w=m+_,A=g+x,C=y+_;return c.push(b,w,A,C),2}function Xn(s,t,i,n,l,o,h,c){const p=i-s,m=n-t;let g=Math.atan2(p,m),y=Math.atan2(l-s,o-t);c&&g<y?g+=Math.PI*2:!c&&g>y&&(y+=Math.PI*2);let x=g;const _=y-g,b=Math.abs(_),w=Math.sqrt(p*p+m*m),A=(15*b*Math.sqrt(w)/Math.PI>>0)+1,C=_/A;if(x+=C,c){h.push(s,t,i,n);for(let U=1,O=x;U<A;U++,O+=C)h.push(s,t,s+Math.sin(O)*w,t+Math.cos(O)*w);h.push(s,t,l,o)}else{h.push(i,n,s,t);for(let U=1,O=x;U<A;U++,O+=C)h.push(s+Math.sin(O)*w,t+Math.cos(O)*w,s,t);h.push(l,o,s,t)}return A*2}function $w(s,t){const i=s.shape;let n=s.points||i.points.slice();const l=t.closePointEps;if(n.length===0)return;const o=s.lineStyle,h=new $t(n[0],n[1]),c=new $t(n[n.length-2],n[n.length-1]),p=i.type!==qe.POLY||i.closeStroke,m=Math.abs(h.x-c.x)<l&&Math.abs(h.y-c.y)<l;if(p){n=n.slice(),m&&(n.pop(),n.pop(),c.set(n[n.length-2],n[n.length-1]));const R=(h.x+c.x)*.5,M=(c.y+h.y)*.5;n.unshift(R,M),n.push(R,M)}const g=t.points,y=n.length/2;let x=n.length;const _=g.length/2,b=o.width/2,w=b*b,A=o.miterLimit*o.miterLimit;let C=n[0],U=n[1],O=n[2],L=n[3],B=0,H=0,D=-(U-L),q=C-O,rt=0,at=0,it=Math.sqrt(D*D+q*q);D/=it,q/=it,D*=b,q*=b;const k=o.alignment,Z=(1-k)*2,J=k*2;p||(o.cap===gn.ROUND?x+=Xn(C-D*(Z-J)*.5,U-q*(Z-J)*.5,C-D*Z,U-q*Z,C+D*J,U+q*J,g,!0)+2:o.cap===gn.SQUARE&&(x+=o_(C,U,D,q,Z,J,!0,g))),g.push(C-D*Z,U-q*Z,C+D*J,U+q*J);for(let R=1;R<y-1;++R){C=n[(R-1)*2],U=n[(R-1)*2+1],O=n[R*2],L=n[R*2+1],B=n[(R+1)*2],H=n[(R+1)*2+1],D=-(U-L),q=C-O,it=Math.sqrt(D*D+q*q),D/=it,q/=it,D*=b,q*=b,rt=-(L-H),at=O-B,it=Math.sqrt(rt*rt+at*at),rt/=it,at/=it,rt*=b,at*=b;const M=O-C,z=U-L,N=O-B,E=H-L,I=M*N+z*E,P=z*N-E*M,V=P<0;if(Math.abs(P)<.001*Math.abs(I)){g.push(O-D*Z,L-q*Z,O+D*J,L+q*J),I>=0&&(o.join===Ri.ROUND?x+=Xn(O,L,O-D*Z,L-q*Z,O-rt*Z,L-at*Z,g,!1)+4:x+=2,g.push(O-rt*J,L-at*J,O+rt*Z,L+at*Z));continue}const tt=(-D+C)*(-q+L)-(-D+O)*(-q+U),lt=(-rt+B)*(-at+L)-(-rt+O)*(-at+H),ot=(M*lt-N*tt)/P,ft=(E*tt-z*lt)/P,ct=(ot-O)*(ot-O)+(ft-L)*(ft-L),ut=O+(ot-O)*Z,yt=L+(ft-L)*Z,Tt=O-(ot-O)*J,Mt=L-(ft-L)*J,Lt=Math.min(M*M+z*z,N*N+E*E),Et=V?Z:J,_t=Lt+Et*Et*w,oe=ct<=_t;let ue=o.join;if(ue===Ri.MITER&&ct/w>A&&(ue=Ri.BEVEL),oe)switch(ue){case Ri.MITER:{g.push(ut,yt,Tt,Mt);break}case Ri.BEVEL:{V?g.push(ut,yt,O+D*J,L+q*J,ut,yt,O+rt*J,L+at*J):g.push(O-D*Z,L-q*Z,Tt,Mt,O-rt*Z,L-at*Z,Tt,Mt),x+=2;break}case Ri.ROUND:{V?(g.push(ut,yt,O+D*J,L+q*J),x+=Xn(O,L,O+D*J,L+q*J,O+rt*J,L+at*J,g,!0)+4,g.push(ut,yt,O+rt*J,L+at*J)):(g.push(O-D*Z,L-q*Z,Tt,Mt),x+=Xn(O,L,O-D*Z,L-q*Z,O-rt*Z,L-at*Z,g,!1)+4,g.push(O-rt*Z,L-at*Z,Tt,Mt));break}}else{switch(g.push(O-D*Z,L-q*Z,O+D*J,L+q*J),ue){case Ri.MITER:{V?g.push(Tt,Mt,Tt,Mt):g.push(ut,yt,ut,yt),x+=2;break}case Ri.ROUND:{V?x+=Xn(O,L,O+D*J,L+q*J,O+rt*J,L+at*J,g,!0)+2:x+=Xn(O,L,O-D*Z,L-q*Z,O-rt*Z,L-at*Z,g,!1)+2;break}}g.push(O-rt*Z,L-at*Z,O+rt*J,L+at*J),x+=2}}C=n[(y-2)*2],U=n[(y-2)*2+1],O=n[(y-1)*2],L=n[(y-1)*2+1],D=-(U-L),q=C-O,it=Math.sqrt(D*D+q*q),D/=it,q/=it,D*=b,q*=b,g.push(O-D*Z,L-q*Z,O+D*J,L+q*J),p||(o.cap===gn.ROUND?x+=Xn(O-D*(Z-J)*.5,L-q*(Z-J)*.5,O-D*Z,L-q*Z,O+D*J,L+q*J,g,!1)+2:o.cap===gn.SQUARE&&(x+=o_(O,L,D,q,Z,J,!1,g)));const dt=t.indices,T=sa.epsilon*sa.epsilon;for(let R=_;R<x+_-2;++R)C=g[R*2],U=g[R*2+1],O=g[(R+1)*2],L=g[(R+1)*2+1],B=g[(R+2)*2],H=g[(R+2)*2+1],!(Math.abs(C*(L-H)+O*(H-U)+B*(U-L))<T)&&dt.push(R,R+1,R+2)}function Zw(s,t){let i=0;const n=s.shape,l=s.points||n.points,o=n.type!==qe.POLY||n.closeStroke;if(l.length===0)return;const h=t.points,c=t.indices,p=l.length/2,m=h.length/2;let g=m;for(h.push(l[0],l[1]),i=1;i<p;i++)h.push(l[i*2],l[i*2+1]),c.push(g,g+1),g++;o&&c.push(g,m)}function u_(s,t){s.lineStyle.native?Zw(s,t):$w(s,t)}class pp{static curveLength(t,i,n,l,o,h){const c=t-2*n+o,p=i-2*l+h,m=2*n-2*t,g=2*l-2*i,y=4*(c*c+p*p),x=4*(c*m+p*g),_=m*m+g*g,b=2*Math.sqrt(y+x+_),w=Math.sqrt(y),A=2*y*w,C=2*Math.sqrt(_),U=x/w;return(A*b+w*x*(b-C)+(4*_*y-x*x)*Math.log((2*w+U+b)/(U+C)))/(4*A)}static curveTo(t,i,n,l,o){const h=o[o.length-2],c=o[o.length-1],p=sa._segmentsCount(pp.curveLength(h,c,t,i,n,l));let m=0,g=0;for(let y=1;y<=p;++y){const x=y/p;m=h+(t-h)*x,g=c+(i-c)*x,o.push(m+(t+(n-t)*x-m)*x,g+(i+(l-i)*x-g)*x)}}}const pd={[qe.POLY]:Bx,[qe.CIRC]:wu,[qe.ELIP]:wu,[qe.RECT]:qw,[qe.RREC]:Yw},h_=[],iu=[];class Cu{constructor(t,i=null,n=null,l=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=n,this.fillStyle=i,this.matrix=l,this.type=t.type}clone(){return new Cu(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const js=new $t,Ix=class Nx extends F_{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Tu,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),iu.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const i=this.batches[t];i.reset(),h_.push(i)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,i=null,n=null,l=null){const o=new Cu(t,i,n,l);return this.graphicsData.push(o),this.dirty++,this}drawHole(t,i=null){if(!this.graphicsData.length)return null;const n=new Cu(t,null,null,i),l=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=l.lineStyle,l.holes.push(n),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const i=this.graphicsData;for(let n=0;n<i.length;++n){const l=i[n];if(l.fillStyle.visible&&l.shape&&(l.matrix?l.matrix.applyInverse(t,js):js.copyFrom(t),l.shape.contains(js.x,js.y))){let o=!1;if(l.holes){for(let h=0;h<l.holes.length;h++)if(l.holes[h].shape.contains(js.x,js.y)){o=!0;break}}if(!o)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const t=this.uvs,i=this.graphicsData;let n=null,l=null;this.batches.length>0&&(n=this.batches[this.batches.length-1],l=n.style);for(let p=this.shapeIndex;p<i.length;p++){this.shapeIndex++;const m=i[p],g=m.fillStyle,y=m.lineStyle;pd[m.type].build(m),m.matrix&&this.transformPoints(m.points,m.matrix),(g.visible||y.visible)&&this.processHoles(m.holes);for(let x=0;x<2;x++){const _=x===0?g:y;if(!_.visible)continue;const b=_.texture.baseTexture,w=this.indices.length,A=this.points.length/2;b.wrapMode=yn.REPEAT,x===0?this.processFill(m):this.processLine(m);const C=this.points.length/2-A;C!==0&&(n&&!this._compareStyles(l,_)&&(n.end(w,A),n=null),n||(n=h_.pop()||new Ww,n.begin(_,w,A),this.batches.push(n),l=_),this.addUvs(this.points,t,_.texture,A,C,_.matrix))}}const o=this.indices.length,h=this.points.length/2;if(n&&n.end(o,h),this.batches.length===0){this.batchable=!0;return}const c=h>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&c===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=c?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(t,i){return!(!t||!i||t.texture.baseTexture!==i.texture.baseTexture||t.color+t.alpha!==i.color+i.alpha||!!t.native!=!!i.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,i=this.graphicsData.length;t<i;t++){const n=this.graphicsData[t],l=n.fillStyle,o=n.lineStyle;if(l&&!l.texture.baseTexture.valid||o&&!o.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const t=this.batches;for(let i=0,n=t.length;i<n;i++){const l=t[i];for(let o=0;o<l.size;o++){const h=l.start+o;this.indicesUint16[h]=this.indicesUint16[h]-l.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const t=this.batches;for(let i=0;i<t.length;i++)if(t[i].style.native)return!1;return this.points.length<Nx.BATCHABLE_SIZE*2}buildDrawCalls(){let t=++Gt._globalBatch;for(let y=0;y<this.drawCalls.length;y++)this.drawCalls[y].texArray.clear(),iu.push(this.drawCalls[y]);this.drawCalls.length=0;const i=this.colors,n=this.textureIds;let l=iu.pop();l||(l=new Md,l.texArray=new Id),l.texArray.count=0,l.start=0,l.size=0,l.type=er.TRIANGLES;let o=0,h=null,c=0,p=!1,m=er.TRIANGLES,g=0;this.drawCalls.push(l);for(let y=0;y<this.batches.length;y++){const x=this.batches[y],_=8,b=x.style,w=b.texture.baseTexture;p!==!!b.native&&(p=!!b.native,m=p?er.LINES:er.TRIANGLES,h=null,o=_,t++),h!==w&&(h=w,w._batchEnabled!==t&&(o===_&&(t++,o=0,l.size>0&&(l=iu.pop(),l||(l=new Md,l.texArray=new Id),this.drawCalls.push(l)),l.start=g,l.size=0,l.texArray.count=0,l.type=m),w.touched=1,w._batchEnabled=t,w._batchLocation=o,w.wrapMode=yn.REPEAT,l.texArray.elements[l.texArray.count++]=w,o++)),l.size+=x.size,g+=x.size,c=w._batchLocation,this.addColors(i,b.color,b.alpha,x.attribSize,x.attribStart),this.addTextureIds(n,c,x.attribSize,x.attribStart)}Gt._globalBatch=t,this.packAttributes()}packAttributes(){const t=this.points,i=this.uvs,n=this.colors,l=this.textureIds,o=new ArrayBuffer(t.length*3*4),h=new Float32Array(o),c=new Uint32Array(o);let p=0;for(let m=0;m<t.length/2;m++)h[p++]=t[m*2],h[p++]=t[m*2+1],h[p++]=i[m*2],h[p++]=i[m*2+1],c[p++]=n[m],h[p++]=l[m];this._buffer.update(o),this._indexBuffer.update(this.indicesUint16)}processFill(t){t.holes.length?Bx.triangulate(t,this):pd[t.type].triangulate(t,this)}processLine(t){u_(t,this);for(let i=0;i<t.holes.length;i++)u_(t.holes[i],this)}processHoles(t){for(let i=0;i<t.length;i++){const n=t[i];pd[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}}calculateBounds(){const t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,i){for(let n=0;n<t.length/2;n++){const l=t[n*2],o=t[n*2+1];t[n*2]=i.a*l+i.c*o+i.tx,t[n*2+1]=i.b*l+i.d*o+i.ty}}addColors(t,i,n,l,o=0){const h=fe.shared.setValue(i).toLittleEndianNumber(),c=fe.shared.setValue(h).toPremultiplied(n);t.length=Math.max(t.length,o+l);for(let p=0;p<l;p++)t[o+p]=c}addTextureIds(t,i,n,l=0){t.length=Math.max(t.length,l+n);for(let o=0;o<n;o++)t[l+o]=i}addUvs(t,i,n,l,o,h=null){let c=0;const p=i.length,m=n.frame;for(;c<o;){let y=t[(l+c)*2],x=t[(l+c)*2+1];if(h){const _=h.a*y+h.c*x+h.tx;x=h.b*y+h.d*x+h.ty,y=_}c++,i.push(y/m.width,x/m.height)}const g=n.baseTexture;(m.width<g.width||m.height<g.height)&&this.adjustUvs(i,n,p,o)}adjustUvs(t,i,n,l){const o=i.baseTexture,h=1e-6,c=n+l*2,p=i.frame,m=p.width/o.width,g=p.height/o.height;let y=p.x/p.width,x=p.y/p.height,_=Math.floor(t[n]+h),b=Math.floor(t[n+1]+h);for(let w=n+2;w<c;w+=2)_=Math.min(_,Math.floor(t[w]+h)),b=Math.min(b,Math.floor(t[w+1]+h));y-=_,x-=b;for(let w=n;w<c;w+=2)t[w]=(t[w]+y)*m,t[w+1]=(t[w+1]+x)*g}};Ix.BATCHABLE_SIZE=100;let Kw=Ix;class Pu{constructor(){this.color=16777215,this.alpha=1,this.texture=St.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new Pu;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=St.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class mp extends Pu{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=gn.BUTT,this.join=Ri.MITER,this.miterLimit=10}clone(){const t=new mp;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=gn.BUTT,this.join=Ri.MITER,this.miterLimit=10}}const md={},Qd=class cu extends Me{constructor(t=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Pu,this._lineStyle=new mp,this._matrix=null,this._holeMode=!1,this.state=sr.for2d(),this._geometry=t||new Kw,this._geometry.refCount++,this._transformID=-1,this._tintColor=new fe(16777215),this.blendMode=Nt.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new cu(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,i=0,n,l=.5,o=!1){return typeof t=="number"&&(t={width:t,color:i,alpha:n,alignment:l,native:o}),this.lineTextureStyle(t)}lineTextureStyle(t){const i={width:0,texture:St.WHITE,color:t?.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:gn.BUTT,join:Ri.MITER,miterLimit:10};t=Object.assign(i,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const n=t.width>0&&t.alpha>0;return n?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:n},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,i=this.currentPath.points.length;i>2&&(this.drawShape(this.currentPath),this.currentPath=new Kn,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[i-2],t[i-1]))}else this.currentPath=new Kn,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,i){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=i,this}lineTo(t,i){this.currentPath||this.moveTo(0,0);const n=this.currentPath.points,l=n[n.length-2],o=n[n.length-1];return(l!==t||o!==i)&&n.push(t,i),this}_initCurve(t=0,i=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,i]):this.moveTo(t,i)}quadraticCurveTo(t,i,n,l){this._initCurve();const o=this.currentPath.points;return o.length===0&&this.moveTo(0,0),pp.curveTo(t,i,n,l,o),this}bezierCurveTo(t,i,n,l,o,h){return this._initCurve(),dp.curveTo(t,i,n,l,o,h,this.currentPath.points),this}arcTo(t,i,n,l,o){this._initCurve(t,i);const h=this.currentPath.points,c=l_.curveTo(t,i,n,l,o,h);if(c){const{cx:p,cy:m,radius:g,startAngle:y,endAngle:x,anticlockwise:_}=c;this.arc(p,m,g,y,x,_)}return this}arc(t,i,n,l,o,h=!1){if(l===o)return this;if(!h&&o<=l?o+=yu:h&&l<=o&&(l+=yu),o-l===0)return this;const c=t+Math.cos(l)*n,p=i+Math.sin(l)*n,m=this._geometry.closePointEps;let g=this.currentPath?this.currentPath.points:null;if(g){const y=Math.abs(g[g.length-2]-c),x=Math.abs(g[g.length-1]-p);y<m&&x<m||g.push(c,p)}else this.moveTo(c,p),g=this.currentPath.points;return l_.arc(c,p,t,i,n,l,o,h,g),this}beginFill(t=0,i){return this.beginTextureFill({texture:St.WHITE,color:t,alpha:i})}normalizeColor(t){const i=fe.shared.setValue(t.color??0);t.color=i.toNumber(),t.alpha??(t.alpha=i.alpha)}beginTextureFill(t){const i={texture:St.WHITE,color:16777215,matrix:null};t=Object.assign(i,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const n=t.alpha>0;return n?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:n},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,i,n,l){return this.drawShape(new Ht(t,i,n,l))}drawRoundedRect(t,i,n,l,o){return this.drawShape(new Nu(t,i,n,l,o))}drawCircle(t,i,n){return this.drawShape(new Bu(t,i,n))}drawEllipse(t,i,n,l){return this.drawShape(new Iu(t,i,n,l))}drawPolygon(...t){let i,n=!0;const l=t[0];l.points?(n=l.closeStroke,i=l.points):Array.isArray(t[0])?i=t[0]:i=t;const o=new Kn(i);return o.closeStroke=n,this.drawShape(o),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===qe.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)}_render(t){this.finishPoly();const i=this._geometry;i.updateBatches(),i.batchable?(this.batchDirty!==i.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,i=this.blendMode,n=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(t.points);for(let l=0;l<n;l++){const o=t.batches[l],h=o.style.color,c=new Float32Array(this.vertexData.buffer,o.attribStart*4*2,o.attribSize*2),p=new Float32Array(t.uvsFloat32.buffer,o.attribStart*4*2,o.attribSize*2),m=new Uint16Array(t.indicesUint16.buffer,o.start*2,o.size),g={vertexData:c,blendMode:i,indices:m,uvs:p,_batchRGB:fe.shared.setValue(h).toRgbArray(),_tintRGB:h,_texture:o.style.texture,alpha:o.style.alpha,worldAlpha:1};this.batches[l]=g}}_renderBatched(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let i=0,n=this.batches.length;i<n;i++){const l=this.batches[i];l.worldAlpha=this.worldAlpha*l.alpha,t.plugins[this.pluginName].render(l)}}}_renderDirect(t){const i=this._resolveDirectShader(t),n=this._geometry,l=this.worldAlpha,o=i.uniforms,h=n.drawCalls;o.translationMatrix=this.transform.worldTransform,fe.shared.setValue(this._tintColor).premultiply(l).toArray(o.tint),t.shader.bind(i),t.geometry.bind(n,i),t.state.set(this.state);for(let c=0,p=h.length;c<p;c++)this._renderDrawCallDirect(t,n.drawCalls[c])}_renderDrawCallDirect(t,i){const{texArray:n,type:l,size:o,start:h}=i,c=n.count;for(let p=0;p<c;p++)t.texture.bind(n.elements[p],p);t.geometry.draw(l,o,h)}_resolveDirectShader(t){let i=this.shader;const n=this.pluginName;if(!i){if(!md[n]){const{maxTextures:l}=t.plugins[n],o=new Int32Array(l);for(let p=0;p<l;p++)o[p]=p;const h={tint:new Float32Array([1,1,1,1]),translationMatrix:new de,default:Hi.from({uSamplers:o},!0)},c=t.plugins[n]._shader.program;md[n]=new rr(c,h)}i=md[n]}return i}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:i,minY:n,maxX:l,maxY:o}=t.bounds;this._bounds.addFrame(this.transform,i,n,l,o)}containsPoint(t){return this.worldTransform.applyInverse(t,cu._TEMP_POINT),this._geometry.containsPoint(cu._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let t=0;t<this.batches.length;t++){const i=this.batches[t];i._tintRGB=fe.shared.setValue(this._tintColor).multiply(i._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const i=this.transform.worldTransform,n=i.a,l=i.b,o=i.c,h=i.d,c=i.tx,p=i.ty,m=this._geometry.points,g=this.vertexData;let y=0;for(let x=0;x<m.length;x+=2){const _=m[x],b=m[x+1];g[y++]=n*_+o*b+c,g[y++]=h*b+l*_+p}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}};Qd.curves=sa,Qd._TEMP_POINT=new $t;let Le=Qd;class Qw{constructor(t,i){this.uvBuffer=t,this.uvMatrix=i,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const i=this.uvBuffer.data;(!this.data||this.data.length!==i.length)&&(this.data=new Float32Array(i.length)),this.uvMatrix.multiplyUvs(i,this.data),this._updateID++}}const gd=new $t,c_=new Kn,Ux=class Lx extends Me{constructor(t,i,n,l=er.TRIANGLES){super(),this.geometry=t,this.shader=i,this.state=n||sr.for2d(),this.drawMode=l,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=gt.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(t){this.shader=t}get material(){return this.shader}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(t){this.shader.tint=t}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(t){this.shader.texture=t}_render(t){const i=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===er.TRIANGLES&&i.length<Lx.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(t){const i=this.shader;i.alpha=this.worldAlpha,i.update&&i.update(),t.batch.flush(),i.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(i),t.state.set(this.state),t.geometry.bind(this.geometry,i),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(t){const i=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=i.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;const l=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[l]),t.plugins[l].render(this)}calculateVertices(){const t=this.geometry.buffers[0],i=t.data,n=t._updateID;if(n===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==i.length&&(this.vertexData=new Float32Array(i.length));const l=this.transform.worldTransform,o=l.a,h=l.b,c=l.c,p=l.d,m=l.tx,g=l.ty,y=this.vertexData;for(let x=0;x<y.length/2;x++){const _=i[x*2],b=i[x*2+1];y[x*2]=o*_+c*b+m,y[x*2+1]=h*_+p*b+g}if(this._roundPixels){const x=gt.RESOLUTION;for(let _=0;_<y.length;++_)y[_]=Math.round(y[_]*x)/x}this.vertexDirty=n}calculateUvs(){const t=this.geometry.buffers[1],i=this.shader;i.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new Qw(t,i.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,gd);const i=this.geometry.getBuffer("aVertexPosition").data,n=c_.points,l=this.geometry.getIndex().data,o=l.length,h=this.drawMode===4?3:1;for(let c=0;c+2<o;c+=h){const p=l[c]*2,m=l[c+1]*2,g=l[c+2]*2;if(n[0]=i[p],n[1]=i[p+1],n[2]=i[m],n[3]=i[m+1],n[4]=i[g],n[5]=i[g+1],c_.contains(gd.x,gd.y))return!0}return!1}destroy(t){super.destroy(t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};Ux.BATCHABLE_SIZE=100;let f_=Ux;class Jw extends vn{constructor(t,i,n){super();const l=new Ae(t),o=new Ae(i,!0),h=new Ae(n,!0,!0);this.addAttribute("aVertexPosition",l,2,!1,Dt.FLOAT).addAttribute("aTextureCoord",o,2,!1,Dt.FLOAT).addIndex(h),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var tC=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,eC=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class d_ extends rr{constructor(t,i){const n={uSampler:t,alpha:1,uTextureMatrix:de.IDENTITY,uColor:new Float32Array([1,1,1,1])};i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i),i.uniforms&&Object.assign(n,i.uniforms),super(i.program||Br.from(eC,tC),n),this._colorDirty=!1,this.uvMatrix=new Q_(t),this.batchable=i.program===void 0,this.pluginName=i.pluginName,this._tintColor=new fe(i.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=i.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this.tint&&(this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const t=this.texture.baseTexture.alphaMode;fe.shared.setValue(this._tintColor).premultiply(this._alpha,t).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class p_{constructor(t,i,n){this.geometry=new vn,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(let l=0;l<t.length;++l){let o=t[l];o={attributeName:o.attributeName,size:o.size,uploadFunction:o.uploadFunction,type:o.type||Dt.FLOAT,offset:o.offset},i[l]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let i=0;this.indexBuffer=new Ae(TE(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let h=0;h<this.dynamicProperties.length;++h){const c=this.dynamicProperties[h];c.offset=i,i+=c.size,this.dynamicStride+=c.size}const n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new Ae(this.dynamicData,!1,!1);let l=0;this.staticStride=0;for(let h=0;h<this.staticProperties.length;++h){const c=this.staticProperties[h];c.offset=l,l+=c.size,this.staticStride+=c.size}const o=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(o),this.staticDataUint32=new Uint32Array(o),this.staticBuffer=new Ae(this.staticData,!0,!1);for(let h=0;h<this.dynamicProperties.length;++h){const c=this.dynamicProperties[h];t.addAttribute(c.attributeName,this.dynamicBuffer,0,c.type===Dt.UNSIGNED_BYTE,c.type,this.dynamicStride*4,c.offset*4)}for(let h=0;h<this.staticProperties.length;++h){const c=this.staticProperties[h];t.addAttribute(c.attributeName,this.staticBuffer,0,c.type===Dt.UNSIGNED_BYTE,c.type,this.staticStride*4,c.offset*4)}}uploadDynamic(t,i,n){for(let l=0;l<this.dynamicProperties.length;l++){const o=this.dynamicProperties[l];o.uploadFunction(t,i,n,o.type===Dt.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,o.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,i,n){for(let l=0;l<this.staticProperties.length;l++){const o=this.staticProperties[l];o.uploadFunction(t,i,n,o.type===Dt.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,o.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var iC=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,rC=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class Px extends Uu{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new de,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Dt.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=rr.from(rC,iC,{}),this.state=sr.for2d()}render(t){const i=t.children,n=t._maxSize,l=t._batchSize,o=this.renderer;let h=i.length;if(h===0)return;h>n&&!t.autoResize&&(h=n);let c=t._buffers;c||(c=t._buffers=this.generateBuffers(t));const p=i[0]._texture.baseTexture,m=p.alphaMode>0;this.state.blendMode=U_(t.blendMode,m),o.state.set(this.state);const g=o.gl,y=t.worldTransform.copyTo(this.tempMatrix);y.prepend(o.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=y.toArray(!0),this.shader.uniforms.uColor=fe.shared.setValue(t.tintRgb).premultiply(t.worldAlpha,m).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=p,this.renderer.shader.bind(this.shader);let x=!1;for(let _=0,b=0;_<h;_+=l,b+=1){let w=h-_;w>l&&(w=l),b>=c.length&&c.push(this._generateOneMoreBuffer(t));const A=c[b];A.uploadDynamic(i,_,w);const C=t._bufferUpdateIDs[b]||0;x=x||A._updateID<C,x&&(A._updateID=t._updateID,A.uploadStatic(i,_,w)),o.geometry.bind(A.geometry),g.drawElements(g.TRIANGLES,w*6,g.UNSIGNED_SHORT,0)}}generateBuffers(t){const i=[],n=t._maxSize,l=t._batchSize,o=t._properties;for(let h=0;h<n;h+=l)i.push(new p_(this.properties,o,l));return i}_generateOneMoreBuffer(t){const i=t._batchSize,n=t._properties;return new p_(this.properties,n,i)}uploadVertices(t,i,n,l,o,h){let c=0,p=0,m=0,g=0;for(let y=0;y<n;++y){const x=t[i+y],_=x._texture,b=x.scale.x,w=x.scale.y,A=_.trim,C=_.orig;A?(p=A.x-x.anchor.x*C.width,c=p+A.width,g=A.y-x.anchor.y*C.height,m=g+A.height):(c=C.width*(1-x.anchor.x),p=C.width*-x.anchor.x,m=C.height*(1-x.anchor.y),g=C.height*-x.anchor.y),l[h]=p*b,l[h+1]=g*w,l[h+o]=c*b,l[h+o+1]=g*w,l[h+o*2]=c*b,l[h+o*2+1]=m*w,l[h+o*3]=p*b,l[h+o*3+1]=m*w,h+=o*4}}uploadPosition(t,i,n,l,o,h){for(let c=0;c<n;c++){const p=t[i+c].position;l[h]=p.x,l[h+1]=p.y,l[h+o]=p.x,l[h+o+1]=p.y,l[h+o*2]=p.x,l[h+o*2+1]=p.y,l[h+o*3]=p.x,l[h+o*3+1]=p.y,h+=o*4}}uploadRotation(t,i,n,l,o,h){for(let c=0;c<n;c++){const p=t[i+c].rotation;l[h]=p,l[h+o]=p,l[h+o*2]=p,l[h+o*3]=p,h+=o*4}}uploadUvs(t,i,n,l,o,h){for(let c=0;c<n;++c){const p=t[i+c]._texture._uvs;p?(l[h]=p.x0,l[h+1]=p.y0,l[h+o]=p.x1,l[h+o+1]=p.y1,l[h+o*2]=p.x2,l[h+o*2+1]=p.y2,l[h+o*3]=p.x3,l[h+o*3+1]=p.y3,h+=o*4):(l[h]=0,l[h+1]=0,l[h+o]=0,l[h+o+1]=0,l[h+o*2]=0,l[h+o*2+1]=0,l[h+o*3]=0,l[h+o*3+1]=0,h+=o*4)}}uploadTint(t,i,n,l,o,h){for(let c=0;c<n;++c){const p=t[i+c],m=fe.shared.setValue(p._tintRGB).toPremultiplied(p.alpha,p.texture.baseTexture.alphaMode>0);l[h]=m,l[h+o]=m,l[h+o*2]=m,l[h+o*3]=m,h+=o*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}Px.extension={name:"particle",type:pt.RendererPlugin};wt.add(Px);var Fu=(s=>(s[s.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",s[s.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",s))(Fu||{});const ru={willReadFrequently:!0},Qi=class Ct{static get experimentalLetterSpacingSupported(){let t=Ct._experimentalLetterSpacingSupported;if(t!==void 0){const i=gt.ADAPTER.getCanvasRenderingContext2D().prototype;t=Ct._experimentalLetterSpacingSupported="letterSpacing"in i||"textLetterSpacing"in i}return t}constructor(t,i,n,l,o,h,c,p,m){this.text=t,this.style=i,this.width=n,this.height=l,this.lines=o,this.lineWidths=h,this.lineHeight=c,this.maxLineWidth=p,this.fontProperties=m}static measureText(t,i,n,l=Ct._canvas){n=n??i.wordWrap;const o=i.toFontString(),h=Ct.measureFont(o);h.fontSize===0&&(h.fontSize=i.fontSize,h.ascent=i.fontSize);const c=l.getContext("2d",ru);c.font=o;const p=(n?Ct.wordWrap(t,i,l):t).split(/(?:\r\n|\r|\n)/),m=new Array(p.length);let g=0;for(let b=0;b<p.length;b++){const w=Ct._measureText(p[b],i.letterSpacing,c);m[b]=w,g=Math.max(g,w)}let y=g+i.strokeThickness;i.dropShadow&&(y+=i.dropShadowDistance);const x=i.lineHeight||h.fontSize+i.strokeThickness;let _=Math.max(x,h.fontSize+i.strokeThickness*2)+i.leading+(p.length-1)*(x+i.leading);return i.dropShadow&&(_+=i.dropShadowDistance),new Ct(t,i,y,_,p,m,x+i.leading,g,h)}static _measureText(t,i,n){let l=!1;Ct.experimentalLetterSpacingSupported&&(Ct.experimentalLetterSpacing?(n.letterSpacing=`${i}px`,n.textLetterSpacing=`${i}px`,l=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));let o=n.measureText(t).width;return o>0&&(l?o-=i:o+=(Ct.graphemeSegmenter(t).length-1)*i),o}static wordWrap(t,i,n=Ct._canvas){const l=n.getContext("2d",ru);let o=0,h="",c="";const p=Object.create(null),{letterSpacing:m,whiteSpace:g}=i,y=Ct.collapseSpaces(g),x=Ct.collapseNewlines(g);let _=!y;const b=i.wordWrapWidth+m,w=Ct.tokenize(t);for(let A=0;A<w.length;A++){let C=w[A];if(Ct.isNewline(C)){if(!x){c+=Ct.addLine(h),_=!y,h="",o=0;continue}C=" "}if(y){const O=Ct.isBreakingSpace(C),L=Ct.isBreakingSpace(h[h.length-1]);if(O&&L)continue}const U=Ct.getFromCache(C,m,p,l);if(U>b)if(h!==""&&(c+=Ct.addLine(h),h="",o=0),Ct.canBreakWords(C,i.breakWords)){const O=Ct.wordWrapSplit(C);for(let L=0;L<O.length;L++){let B=O[L],H=B,D=1;for(;O[L+D];){const rt=O[L+D];if(!Ct.canBreakChars(H,rt,C,L,i.breakWords))B+=rt;else break;H=rt,D++}L+=D-1;const q=Ct.getFromCache(B,m,p,l);q+o>b&&(c+=Ct.addLine(h),_=!1,h="",o=0),h+=B,o+=q}}else{h.length>0&&(c+=Ct.addLine(h),h="",o=0);const O=A===w.length-1;c+=Ct.addLine(C,!O),_=!1,h="",o=0}else U+o>b&&(_=!1,c+=Ct.addLine(h),h="",o=0),(h.length>0||!Ct.isBreakingSpace(C)||_)&&(h+=C,o+=U)}return c+=Ct.addLine(h,!1),c}static addLine(t,i=!0){return t=Ct.trimRight(t),t=i?`${t}
`:t,t}static getFromCache(t,i,n,l){let o=n[t];return typeof o!="number"&&(o=Ct._measureText(t,i,l)+i,n[t]=o),o}static collapseSpaces(t){return t==="normal"||t==="pre-line"}static collapseNewlines(t){return t==="normal"}static trimRight(t){if(typeof t!="string")return"";for(let i=t.length-1;i>=0;i--){const n=t[i];if(!Ct.isBreakingSpace(n))break;t=t.slice(0,-1)}return t}static isNewline(t){return typeof t!="string"?!1:Ct._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,i){return typeof t!="string"?!1:Ct._breakingSpaces.includes(t.charCodeAt(0))}static tokenize(t){const i=[];let n="";if(typeof t!="string")return i;for(let l=0;l<t.length;l++){const o=t[l],h=t[l+1];if(Ct.isBreakingSpace(o,h)||Ct.isNewline(o)){n!==""&&(i.push(n),n=""),i.push(o);continue}n+=o}return n!==""&&i.push(n),i}static canBreakWords(t,i){return i}static canBreakChars(t,i,n,l,o){return!0}static wordWrapSplit(t){return Ct.graphemeSegmenter(t)}static measureFont(t){if(Ct._fonts[t])return Ct._fonts[t];const i={ascent:0,descent:0,fontSize:0},n=Ct._canvas,l=Ct._context;l.font=t;const o=Ct.METRICS_STRING+Ct.BASELINE_SYMBOL,h=Math.ceil(l.measureText(o).width);let c=Math.ceil(l.measureText(Ct.BASELINE_SYMBOL).width);const p=Math.ceil(Ct.HEIGHT_MULTIPLIER*c);if(c=c*Ct.BASELINE_MULTIPLIER|0,h===0||p===0)return Ct._fonts[t]=i,i;n.width=h,n.height=p,l.fillStyle="#f00",l.fillRect(0,0,h,p),l.font=t,l.textBaseline="alphabetic",l.fillStyle="#000",l.fillText(o,0,c);const m=l.getImageData(0,0,h,p).data,g=m.length,y=h*4;let x=0,_=0,b=!1;for(x=0;x<c;++x){for(let w=0;w<y;w+=4)if(m[_+w]!==255){b=!0;break}if(!b)_+=y;else break}for(i.ascent=c-x,_=g-y,b=!1,x=p;x>c;--x){for(let w=0;w<y;w+=4)if(m[_+w]!==255){b=!0;break}if(!b)_-=y;else break}return i.descent=x-c,i.fontSize=i.ascent+i.descent,Ct._fonts[t]=i,i}static clearMetrics(t=""){t?delete Ct._fonts[t]:Ct._fonts={}}static get _canvas(){if(!Ct.__canvas){let t;try{const i=new OffscreenCanvas(0,0);if(i.getContext("2d",ru)?.measureText)return Ct.__canvas=i,i;t=gt.ADAPTER.createCanvas()}catch{t=gt.ADAPTER.createCanvas()}t.width=t.height=10,Ct.__canvas=t}return Ct.__canvas}static get _context(){return Ct.__context||(Ct.__context=Ct._canvas.getContext("2d",ru)),Ct.__context}};Qi.METRICS_STRING="|q",Qi.BASELINE_SYMBOL="M",Qi.BASELINE_MULTIPLIER=1.4,Qi.HEIGHT_MULTIPLIER=2,Qi.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const s=new Intl.Segmenter;return t=>[...s.segment(t)].map(i=>i.segment)}return s=>[...s]})(),Qi.experimentalLetterSpacing=!1,Qi._fonts={},Qi._newlines=[10,13],Qi._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let dn=Qi;const nC=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Fx=class ml{constructor(t){this.styleID=0,this.reset(),vd(this,t,t)}clone(){const t={};return vd(t,this,ml.defaultStyle),new ml(t)}reset(){vd(this,ml.defaultStyle,ml.defaultStyle)}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(t){const i=yd(t);this._dropShadowColor!==i&&(this._dropShadowColor=i,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}get fill(){return this._fill}set fill(t){const i=yd(t);this._fill!==i&&(this._fill=i,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(t){sC(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.styleID++)}get stroke(){return this._stroke}set stroke(t){const i=yd(t);this._stroke!==i&&(this._stroke=i,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}toFontString(){const t=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let i=this.fontFamily;Array.isArray(this.fontFamily)||(i=this.fontFamily.split(","));for(let n=i.length-1;n>=0;n--){let l=i[n].trim();!/([\"\'])[^\'\"]+\1/.test(l)&&!nC.includes(l)&&(l=`"${l}"`),i[n]=l}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${t} ${i.join(",")}`}};Fx.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Fu.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let _n=Fx;function yd(s){const t=fe.shared,i=n=>{const l=t.setValue(n);return l.alpha===1?l.toHex():l.toRgbaString()};return Array.isArray(s)?s.map(i):i(s)}function sC(s,t){if(!Array.isArray(s)||!Array.isArray(t)||s.length!==t.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==t[i])return!1;return!0}function vd(s,t,i){for(const n in i)Array.isArray(t[n])?s[n]=t[n].slice():s[n]=t[n]}const aC={texture:!0,children:!1,baseTexture:!0},Gx=class Jd extends la{constructor(t,i,n){let l=!1;n||(n=gt.ADAPTER.createCanvas(),l=!0),n.width=3,n.height=3;const o=St.from(n);o.orig=new Ht,o.trim=new Ht,super(o),this._ownCanvas=l,this.canvas=n,this.context=n.getContext("2d",{willReadFrequently:!0}),this._resolution=Jd.defaultResolution??gt.RESOLUTION,this._autoResolution=Jd.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=i,this.localStyleID=-1}static get experimentalLetterSpacing(){return dn.experimentalLetterSpacing}static set experimentalLetterSpacing(t){jt("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),dn.experimentalLetterSpacing=t}updateText(t){const i=this._style;if(this.localStyleID!==i.styleID&&(this.dirty=!0,this.localStyleID=i.styleID),!this.dirty&&t)return;this._font=this._style.toFontString();const n=this.context,l=dn.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),o=l.width,h=l.height,c=l.lines,p=l.lineHeight,m=l.lineWidths,g=l.maxLineWidth,y=l.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,o)+i.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,h)+i.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=i.strokeThickness,n.textBaseline=i.textBaseline,n.lineJoin=i.lineJoin,n.miterLimit=i.miterLimit;let x,_;const b=i.dropShadow?2:1;for(let w=0;w<b;++w){const A=i.dropShadow&&w===0,C=A?Math.ceil(Math.max(1,h)+i.padding*2):0,U=C*this._resolution;if(A){n.fillStyle="black",n.strokeStyle="black";const L=i.dropShadowColor,B=i.dropShadowBlur*this._resolution,H=i.dropShadowDistance*this._resolution;n.shadowColor=fe.shared.setValue(L).setAlpha(i.dropShadowAlpha).toRgbaString(),n.shadowBlur=B,n.shadowOffsetX=Math.cos(i.dropShadowAngle)*H,n.shadowOffsetY=Math.sin(i.dropShadowAngle)*H+U}else n.fillStyle=this._generateFillStyle(i,c,l),n.strokeStyle=i.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;let O=(p-y.fontSize)/2;p-y.fontSize<0&&(O=0);for(let L=0;L<c.length;L++)x=i.strokeThickness/2,_=i.strokeThickness/2+L*p+y.ascent+O,i.align==="right"?x+=g-m[L]:i.align==="center"&&(x+=(g-m[L])/2),i.stroke&&i.strokeThickness&&this.drawLetterSpacing(c[L],x+i.padding,_+i.padding-C,!0),i.fill&&this.drawLetterSpacing(c[L],x+i.padding,_+i.padding-C)}this.updateTexture()}drawLetterSpacing(t,i,n,l=!1){const o=this._style.letterSpacing;let h=!1;if(dn.experimentalLetterSpacingSupported&&(dn.experimentalLetterSpacing?(this.context.letterSpacing=`${o}px`,this.context.textLetterSpacing=`${o}px`,h=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),o===0||h){l?this.context.strokeText(t,i,n):this.context.fillText(t,i,n);return}let c=i;const p=dn.graphemeSegmenter(t);let m=this.context.measureText(t).width,g=0;for(let y=0;y<p.length;++y){const x=p[y];l?this.context.strokeText(x,c,n):this.context.fillText(x,c,n);let _="";for(let b=y+1;b<p.length;++b)_+=p[b];g=this.context.measureText(_).width,c+=m-g+o,m=g}}updateTexture(){const t=this.canvas;if(this._style.trim){const h=wE(t);h.data&&(t.width=h.width,t.height=h.height,this.context.putImageData(h.data,0,0))}const i=this._texture,n=this._style,l=n.trim?0:n.padding,o=i.baseTexture;i.trim.width=i._frame.width=t.width/this._resolution,i.trim.height=i._frame.height=t.height/this._resolution,i.trim.x=-l,i.trim.y=-l,i.orig.width=i._frame.width-l*2,i.orig.height=i._frame.height-l*2,this._onTextureUpdate(),o.setRealSize(t.width,t.height,this._resolution),i.updateUvs(),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(t,i){return this.updateText(!0),this._textureID===-1&&(t=!1),super.getBounds(t,i)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds.call(this,t)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(t,i,n){const l=t.fill;if(Array.isArray(l)){if(l.length===1)return l[0]}else return l;let o;const h=t.dropShadow?t.dropShadowDistance:0,c=t.padding||0,p=this.canvas.width/this._resolution-h-c*2,m=this.canvas.height/this._resolution-h-c*2,g=l.slice(),y=t.fillGradientStops.slice();if(!y.length){const x=g.length+1;for(let _=1;_<x;++_)y.push(_/x)}if(g.unshift(l[0]),y.unshift(0),g.push(l[l.length-1]),y.push(1),t.fillGradientType===Fu.LINEAR_VERTICAL){o=this.context.createLinearGradient(p/2,c,p/2,m+c);const x=n.fontProperties.fontSize+t.strokeThickness;for(let _=0;_<i.length;_++){const b=n.lineHeight*(_-1)+x,w=n.lineHeight*_;let A=w;_>0&&b>w&&(A=(w+b)/2);const C=w+x,U=n.lineHeight*(_+1);let O=C;_+1<i.length&&U<C&&(O=(C+U)/2);const L=(O-A)/m;for(let B=0;B<g.length;B++){let H=0;typeof y[B]=="number"?H=y[B]:H=B/g.length;let D=Math.min(1,Math.max(0,A/m+H*L));D=Number(D.toFixed(5)),o.addColorStop(D,g[B])}}}else{o=this.context.createLinearGradient(c,m/2,p+c,m/2);const x=g.length+1;let _=1;for(let b=0;b<g.length;b++){let w;typeof y[b]=="number"?w=y[b]:w=_/x,o.addColorStop(w,g[b]),_++}}return o}destroy(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},aC,t),super.destroy(t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this.updateText(!0);const i=mn(this.scale.x)||1;this.scale.x=i*t/this._texture.orig.width,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this.updateText(!0);const i=mn(this.scale.y)||1;this.scale.y=i*t/this._texture.orig.height,this._height=t}get style(){return this._style}set style(t){t=t||{},t instanceof _n?this._style=t:this._style=new _n(t),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}};Gx.defaultAutoResolution=!0;let vl=Gx;class lC{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function oC(s,t){let i=!1;if(s?._textures?.length){for(let n=0;n<s._textures.length;n++)if(s._textures[n]instanceof St){const l=s._textures[n].baseTexture;t.includes(l)||(t.push(l),i=!0)}}return i}function uC(s,t){if(s.baseTexture instanceof Gt){const i=s.baseTexture;return t.includes(i)||t.push(i),!0}return!1}function hC(s,t){if(s._texture&&s._texture instanceof St){const i=s._texture.baseTexture;return t.includes(i)||t.push(i),!0}return!1}function cC(s,t){return t instanceof vl?(t.updateText(!0),!0):!1}function fC(s,t){if(t instanceof _n){const i=t.toFontString();return dn.measureFont(i),!0}return!1}function dC(s,t){if(s instanceof vl){t.includes(s.style)||t.push(s.style),t.includes(s)||t.push(s);const i=s._texture.baseTexture;return t.includes(i)||t.push(i),!0}return!1}function pC(s,t){return s instanceof _n?(t.includes(s)||t.push(s),!0):!1}const zx=class Hx{constructor(t){this.limiter=new lC(Hx.uploadsPerFrame),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(dC),this.registerFindHook(pC),this.registerFindHook(oC),this.registerFindHook(uC),this.registerFindHook(hC),this.registerUploadHook(cC),this.registerUploadHook(fC)}upload(t){return new Promise(i=>{t&&this.add(t),this.queue.length?(this.completes.push(i),this.ticking||(this.ticking=!0,yi.system.addOnce(this.tick,this,ts.UTILITY))):i()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const t=this.queue[0];let i=!1;if(t&&!t._destroyed){for(let n=0,l=this.uploadHooks.length;n<l;n++)if(this.uploadHooks[n](this.uploadHookHelper,t)){this.queue.shift(),i=!0;break}}i||this.queue.shift()}if(this.queue.length)yi.system.addOnce(this.tick,this,ts.UTILITY);else{this.ticking=!1;const t=this.completes.slice(0);this.completes.length=0;for(let i=0,n=t.length;i<n;i++)t[i]()}}registerFindHook(t){return t&&this.addHooks.push(t),this}registerUploadHook(t){return t&&this.uploadHooks.push(t),this}add(t){for(let i=0,n=this.addHooks.length;i<n&&!this.addHooks[i](t,this.queue);i++);if(t instanceof Me)for(let i=t.children.length-1;i>=0;i--)this.add(t.children[i]);return this}destroy(){this.ticking&&yi.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};zx.uploadsPerFrame=4;let tp=zx;Object.defineProperties(gt,{UPLOADS_PER_FRAME:{get(){return tp.uploadsPerFrame},set(s){jt("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),tp.uploadsPerFrame=s}}});function kx(s,t){return t instanceof Gt?(t._glTextures[s.CONTEXT_UID]||s.texture.bind(t),!0):!1}function mC(s,t){if(!(t instanceof Le))return!1;const{geometry:i}=t;t.finishPoly(),i.updateBatches();const{batches:n}=i;for(let l=0;l<n.length;l++){const{texture:o}=n[l].style;o&&kx(s,o.baseTexture)}return i.batchable||s.geometry.bind(i,t._resolveDirectShader(s)),!0}function gC(s,t){return s instanceof Le?(t.push(s),!0):!1}class Xx extends tp{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(gC),this.registerUploadHook(kx),this.registerUploadHook(mC)}}Xx.extension={name:"prepare",type:pt.RendererSystem};wt.add(Xx);var yC=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,vC=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,_C=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,m_=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,xC=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const nu=new de;class Vx extends Uu{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new W_,this.state=sr.for2d()}contextChange(){const t=this.renderer,i={globals:t.globalUniforms};this.simpleShader=rr.from(m_,xC,i),this.shader=t.context.webGLVersion>1?rr.from(vC,yC,i):rr.from(m_,_C,i)}render(t){const i=this.renderer,n=this.quad;let l=n.vertices;l[0]=l[6]=t._width*-t.anchor.x,l[1]=l[3]=t._height*-t.anchor.y,l[2]=l[4]=t._width*(1-t.anchor.x),l[5]=l[7]=t._height*(1-t.anchor.y);const o=t.uvRespectAnchor?t.anchor.x:0,h=t.uvRespectAnchor?t.anchor.y:0;l=n.uvs,l[0]=l[6]=-o,l[1]=l[3]=-h,l[2]=l[4]=1-o,l[5]=l[7]=1-h,n.invalidate();const c=t._texture,p=c.baseTexture,m=p.alphaMode>0,g=t.tileTransform.localTransform,y=t.uvMatrix;let x=p.isPowerOfTwo&&c.frame.width===p.width&&c.frame.height===p.height;x&&(p._glTextures[i.CONTEXT_UID]?x=p.wrapMode!==yn.CLAMP:p.wrapMode===yn.CLAMP&&(p.wrapMode=yn.REPEAT));const _=x?this.simpleShader:this.shader,b=c.width,w=c.height,A=t._width,C=t._height;nu.set(g.a*b/A,g.b*b/C,g.c*w/A,g.d*w/C,g.tx/A,g.ty/C),nu.invert(),x?nu.prepend(y.mapCoord):(_.uniforms.uMapCoord=y.mapCoord.toArray(!0),_.uniforms.uClampFrame=y.uClampFrame,_.uniforms.uClampOffset=y.uClampOffset),_.uniforms.uTransform=nu.toArray(!0),_.uniforms.uColor=fe.shared.setValue(t.tint).premultiply(t.worldAlpha,m).toArray(_.uniforms.uColor),_.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),_.uniforms.uSampler=c,i.shader.bind(_),i.geometry.bind(n),this.state.blendMode=U_(t.blendMode,m),i.state.set(this.state),i.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}Vx.extension={name:"tilingSprite",type:pt.RendererPlugin};wt.add(Vx);const jx=class gl{constructor(t,i,n){this.linkedSheets=[],(t instanceof Gt||t instanceof St)&&(t={texture:t,data:i,resolutionFilename:n});const{texture:l,data:o,resolutionFilename:h=null,cachePrefix:c=""}=t;this.cachePrefix=c,this._texture=l instanceof St?l:null,this.baseTexture=l instanceof Gt?l:this._texture.baseTexture,this.textures={},this.animations={},this.data=o;const p=this.baseTexture.resource;this.resolution=this._updateResolution(h||(p?p.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(t=null){const{scale:i}=this.data.meta;let n=Ir(t,null);return n===null&&(n=typeof i=="number"?i:parseFloat(i??"1")),n!==1&&this.baseTexture.setResolution(n),n}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=gl.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let i=t;const n=gl.BATCH_SIZE;for(;i-t<n&&i<this._frameKeys.length;){const l=this._frameKeys[i],o=this._frames[l],h=o.frame;if(h){let c=null,p=null;const m=o.trimmed!==!1&&o.sourceSize?o.sourceSize:o.frame,g=new Ht(0,0,Math.floor(m.w)/this.resolution,Math.floor(m.h)/this.resolution);o.rotated?c=new Ht(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.h)/this.resolution,Math.floor(h.w)/this.resolution):c=new Ht(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution),o.trimmed!==!1&&o.spriteSourceSize&&(p=new Ht(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution)),this.textures[l]=new St(this.baseTexture,c,g,p,o.rotated?2:0,o.anchor,o.borders),St.addToCache(this.textures[l],this.cachePrefix+l.toString())}i++}}_processAnimations(){const t=this.data.animations||{};for(const i in t){this.animations[i]=[];for(let n=0;n<t[i].length;n++){const l=t[i][n];this.animations[i].push(this.textures[l])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*gl.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*gl.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){for(const i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};jx.BATCH_SIZE=1e3;let g_=jx;const bC=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function qx(s,t,i){const n={};if(s.forEach(l=>{n[l]=t}),Object.keys(t.textures).forEach(l=>{n[`${t.cachePrefix}${l}`]=t.textures[l]}),!i){const l=Fe.dirname(s[0]);t.linkedSheets.forEach((o,h)=>{Object.assign(n,qx([`${l}/${t.data.meta.related_multi_packs[h]}`],o,!0))})}return n}const TC={extension:pt.Asset,cache:{test:s=>s instanceof g_,getCacheableAssets:(s,t)=>qx(s,t,!1)},resolver:{test:s=>{const t=s.split("?")[0].split("."),i=t.pop(),n=t.pop();return i==="json"&&bC.includes(n)},parse:s=>{const t=s.split(".");return{resolution:parseFloat(gt.RETINA_PREFIX.exec(s)?.[1]??"1"),format:t[t.length-2],src:s}}},loader:{name:"spritesheetLoader",extension:{type:pt.LoadParser,priority:ki.Normal},async testParse(s,t){return Fe.extname(t.src).toLowerCase()===".json"&&!!s.frames},async parse(s,t,i){const{texture:n,imageFilename:l,cachePrefix:o}=t?.data??{};let h=Fe.dirname(t.src);h&&h.lastIndexOf("/")!==h.length-1&&(h+="/");let c;if(n&&n.baseTexture)c=n;else{const g=$d(h+(l??s.meta.image),t.src);c=(await i.load([g]))[g]}const p=new g_({texture:c.baseTexture,data:s,resolutionFilename:t.src,cachePrefix:o});await p.parse();const m=s?.meta?.related_multi_packs;if(Array.isArray(m)){const g=[];for(const x of m){if(typeof x!="string")continue;let _=h+x;t.data?.ignoreMultiPack||(_=$d(_,t.src),g.push(i.load({src:_,data:{ignoreMultiPack:!0}})))}const y=await Promise.all(g);p.linkedSheets=y,y.forEach(x=>{x.linkedSheets=[p].concat(p.linkedSheets.filter(_=>_!==x))})}return p},unload(s){s.destroy(!0)}}};wt.add(TC);class Ru{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class fu{static test(t){return typeof t=="string"&&t.startsWith("info face=")}static parse(t){const i=t.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const o in i){const h=i[o].match(/^[a-z]+/gm)[0],c=i[o].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),p={};for(const m in c){const g=c[m].split("="),y=g[0],x=g[1].replace(/"/gm,""),_=parseFloat(x),b=isNaN(_)?x:_;p[y]=b}n[h].push(p)}const l=new Ru;return n.info.forEach(o=>l.info.push({face:o.face,size:parseInt(o.size,10)})),n.common.forEach(o=>l.common.push({lineHeight:parseInt(o.lineHeight,10)})),n.page.forEach(o=>l.page.push({id:parseInt(o.id,10),file:o.file})),n.char.forEach(o=>l.char.push({id:parseInt(o.id,10),page:parseInt(o.page,10),x:parseInt(o.x,10),y:parseInt(o.y,10),width:parseInt(o.width,10),height:parseInt(o.height,10),xoffset:parseInt(o.xoffset,10),yoffset:parseInt(o.yoffset,10),xadvance:parseInt(o.xadvance,10)})),n.kerning.forEach(o=>l.kerning.push({first:parseInt(o.first,10),second:parseInt(o.second,10),amount:parseInt(o.amount,10)})),n.distanceField.forEach(o=>l.distanceField.push({distanceRange:parseInt(o.distanceRange,10),fieldType:o.fieldType})),l}}class ep{static test(t){const i=t;return typeof t!="string"&&"getElementsByTagName"in t&&i.getElementsByTagName("page").length&&i.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(t){const i=new Ru,n=t.getElementsByTagName("info"),l=t.getElementsByTagName("common"),o=t.getElementsByTagName("page"),h=t.getElementsByTagName("char"),c=t.getElementsByTagName("kerning"),p=t.getElementsByTagName("distanceField");for(let m=0;m<n.length;m++)i.info.push({face:n[m].getAttribute("face"),size:parseInt(n[m].getAttribute("size"),10)});for(let m=0;m<l.length;m++)i.common.push({lineHeight:parseInt(l[m].getAttribute("lineHeight"),10)});for(let m=0;m<o.length;m++)i.page.push({id:parseInt(o[m].getAttribute("id"),10)||0,file:o[m].getAttribute("file")});for(let m=0;m<h.length;m++){const g=h[m];i.char.push({id:parseInt(g.getAttribute("id"),10),page:parseInt(g.getAttribute("page"),10)||0,x:parseInt(g.getAttribute("x"),10),y:parseInt(g.getAttribute("y"),10),width:parseInt(g.getAttribute("width"),10),height:parseInt(g.getAttribute("height"),10),xoffset:parseInt(g.getAttribute("xoffset"),10),yoffset:parseInt(g.getAttribute("yoffset"),10),xadvance:parseInt(g.getAttribute("xadvance"),10)})}for(let m=0;m<c.length;m++)i.kerning.push({first:parseInt(c[m].getAttribute("first"),10),second:parseInt(c[m].getAttribute("second"),10),amount:parseInt(c[m].getAttribute("amount"),10)});for(let m=0;m<p.length;m++)i.distanceField.push({fieldType:p[m].getAttribute("fieldType"),distanceRange:parseInt(p[m].getAttribute("distanceRange"),10)});return i}}class ip{static test(t){return typeof t=="string"&&t.includes("<font>")?ep.test(gt.ADAPTER.parseXML(t)):!1}static parse(t){return ep.parse(gt.ADAPTER.parseXML(t))}}const _d=[fu,ep,ip];function EC(s){for(let t=0;t<_d.length;t++)if(_d[t].test(s))return _d[t];return null}function AC(s,t,i,n,l,o){const h=i.fill;if(Array.isArray(h)){if(h.length===1)return h[0]}else return h;let c;const p=i.dropShadow?i.dropShadowDistance:0,m=i.padding||0,g=s.width/n-p-m*2,y=s.height/n-p-m*2,x=h.slice(),_=i.fillGradientStops.slice();if(!_.length){const b=x.length+1;for(let w=1;w<b;++w)_.push(w/b)}if(x.unshift(h[0]),_.unshift(0),x.push(h[h.length-1]),_.push(1),i.fillGradientType===Fu.LINEAR_VERTICAL){c=t.createLinearGradient(g/2,m,g/2,y+m);let b=0;const w=(o.fontProperties.fontSize+i.strokeThickness)/y;for(let A=0;A<l.length;A++){const C=o.lineHeight*A;for(let U=0;U<x.length;U++){let O=0;typeof _[U]=="number"?O=_[U]:O=U/x.length;const L=C/y+O*w;let B=Math.max(b,L);B=Math.min(B,1),c.addColorStop(B,x[U]),b=B}}}else{c=t.createLinearGradient(m,y/2,g+m,y/2);const b=x.length+1;let w=1;for(let A=0;A<x.length;A++){let C;typeof _[A]=="number"?C=_[A]:C=w/b,c.addColorStop(C,x[A]),w++}}return c}function SC(s,t,i,n,l,o,h){const c=i.text,p=i.fontProperties;t.translate(n,l),t.scale(o,o);const m=h.strokeThickness/2,g=-(h.strokeThickness/2);if(t.font=h.toFontString(),t.lineWidth=h.strokeThickness,t.textBaseline=h.textBaseline,t.lineJoin=h.lineJoin,t.miterLimit=h.miterLimit,t.fillStyle=AC(s,t,h,o,[c],i),t.strokeStyle=h.stroke,h.dropShadow){const y=h.dropShadowColor,x=h.dropShadowBlur*o,_=h.dropShadowDistance*o;t.shadowColor=fe.shared.setValue(y).setAlpha(h.dropShadowAlpha).toRgbaString(),t.shadowBlur=x,t.shadowOffsetX=Math.cos(h.dropShadowAngle)*_,t.shadowOffsetY=Math.sin(h.dropShadowAngle)*_}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;h.stroke&&h.strokeThickness&&t.strokeText(c,m,g+i.lineHeight-p.descent),h.fill&&t.fillText(c,m,g+i.lineHeight-p.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function du(s){return s.codePointAt?s.codePointAt(0):s.charCodeAt(0)}function Yx(s){return Array.from?Array.from(s):s.split("")}function wC(s){typeof s=="string"&&(s=[s]);const t=[];for(let i=0,n=s.length;i<n;i++){const l=s[i];if(Array.isArray(l)){if(l.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${l.length}.`);const o=l[0].charCodeAt(0),h=l[1].charCodeAt(0);if(h<o)throw new Error("[BitmapFont]: Invalid character range.");for(let c=o,p=h;c<=p;c++)t.push(String.fromCharCode(c))}else t.push(...Yx(l))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const cn=class Ji{constructor(t,i,n){const[l]=t.info,[o]=t.common,[h]=t.page,[c]=t.distanceField,p=Ir(h.file),m={};this._ownsTextures=n,this.font=l.face,this.size=l.size,this.lineHeight=o.lineHeight/p,this.chars={},this.pageTextures=m;for(let g=0;g<t.page.length;g++){const{id:y,file:x}=t.page[g];m[y]=i instanceof Array?i[g]:i[x],c?.fieldType&&c.fieldType!=="none"&&(m[y].baseTexture.alphaMode=si.NO_PREMULTIPLIED_ALPHA,m[y].baseTexture.mipmap=nr.OFF)}for(let g=0;g<t.char.length;g++){const{id:y,page:x}=t.char[g];let{x:_,y:b,width:w,height:A,xoffset:C,yoffset:U,xadvance:O}=t.char[g];_/=p,b/=p,w/=p,A/=p,C/=p,U/=p,O/=p;const L=new Ht(_+m[x].frame.x/p,b+m[x].frame.y/p,w,A);this.chars[y]={xOffset:C,yOffset:U,xAdvance:O,kerning:{},texture:new St(m[x].baseTexture,L),page:x}}for(let g=0;g<t.kerning.length;g++){let{first:y,second:x,amount:_}=t.kerning[g];y/=p,x/=p,_/=p,this.chars[x]&&(this.chars[x].kerning[y]=_)}this.distanceFieldRange=c?.distanceRange,this.distanceFieldType=c?.fieldType?.toLowerCase()??"none"}destroy(){for(const t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(const t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}static install(t,i,n){let l;if(t instanceof Ru)l=t;else{const h=EC(t);if(!h)throw new Error("Unrecognized data format for font.");l=h.parse(t)}i instanceof St&&(i=[i]);const o=new Ji(l,i,n);return Ji.available[o.font]=o,o}static uninstall(t){const i=Ji.available[t];if(!i)throw new Error(`No font found named '${t}'`);i.destroy(),delete Ji.available[t]}static from(t,i,n){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:l,padding:o,resolution:h,textureWidth:c,textureHeight:p,...m}=Object.assign({},Ji.defaultOptions,n),g=wC(l),y=i instanceof _n?i:new _n(i),x=c,_=new Ru;_.info[0]={face:y.fontFamily,size:y.fontSize},_.common[0]={lineHeight:y.fontSize};let b=0,w=0,A,C,U,O=0;const L=[];for(let H=0;H<g.length;H++){A||(A=gt.ADAPTER.createCanvas(),A.width=c,A.height=p,C=A.getContext("2d"),U=new Gt(A,{resolution:h,...m}),L.push(new St(U)),_.page.push({id:L.length-1,file:""}));const D=g[H],q=dn.measureText(D,y,!1,A),rt=q.width,at=Math.ceil(q.height),it=Math.ceil((y.fontStyle==="italic"?2:1)*rt);if(w>=p-at*h){if(w===0)throw new Error(`[BitmapFont] textureHeight ${p}px is too small (fontFamily: '${y.fontFamily}', fontSize: ${y.fontSize}px, char: '${D}')`);--H,A=null,C=null,U=null,w=0,b=0,O=0;continue}if(O=Math.max(at+q.fontProperties.descent,O),it*h+b>=x){if(b===0)throw new Error(`[BitmapFont] textureWidth ${c}px is too small (fontFamily: '${y.fontFamily}', fontSize: ${y.fontSize}px, char: '${D}')`);--H,w+=O*h,w=Math.ceil(w),b=0,O=0;continue}SC(A,C,q,b,w,h,y);const k=du(q.text);_.char.push({id:k,page:L.length-1,x:b/h,y:w/h,width:it,height:at,xoffset:0,yoffset:0,xadvance:rt-(y.dropShadow?y.dropShadowDistance:0)-(y.stroke?y.strokeThickness:0)}),b+=(it+2*o)*h,b=Math.ceil(b)}if(!n?.skipKerning)for(let H=0,D=g.length;H<D;H++){const q=g[H];for(let rt=0;rt<D;rt++){const at=g[rt],it=C.measureText(q).width,k=C.measureText(at).width,Z=C.measureText(q+at).width-(it+k);Z&&_.kerning.push({first:du(q),second:du(at),amount:Z})}}const B=new Ji(_,L,!0);return Ji.available[t]!==void 0&&Ji.uninstall(t),Ji.available[t]=B,B}};cn.ALPHA=[["a","z"],["A","Z"]," "],cn.NUMERIC=[["0","9"]],cn.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],cn.ASCII=[[" ","~"]],cn.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:cn.ALPHANUMERIC},cn.available={};let fn=cn;var CC=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,RC=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const y_=[],v_=[],__=[],MC=class Wx extends Me{constructor(t,i={}){super();const{align:n,tint:l,maxWidth:o,letterSpacing:h,fontName:c,fontSize:p}=Object.assign({},Wx.styleDefaults,i);if(!fn.available[c])throw new Error(`Missing BitmapFont "${c}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=n,this._tintColor=new fe(l),this._font=void 0,this._fontName=c,this._fontSize=p,this.text=t,this._maxWidth=o,this._maxLineHeight=0,this._letterSpacing=h,this._anchor=new Or(()=>{this.dirty=!0},this,0,0),this._roundPixels=gt.ROUND_PIXELS,this.dirty=!0,this._resolution=gt.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){const t=fn.available[this._fontName],i=this.fontSize,n=i/t.size,l=new $t,o=[],h=[],c=[],p=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",m=Yx(p),g=this._maxWidth*t.size/i,y=t.distanceFieldType==="none"?y_:v_;let x=null,_=0,b=0,w=0,A=-1,C=0,U=0,O=0,L=0;for(let it=0;it<m.length;it++){const k=m[it],Z=du(k);if(/(?:\s)/.test(k)&&(A=it,C=_,L++),k==="\r"||k===`
`){h.push(_),c.push(-1),b=Math.max(b,_),++w,++U,l.x=0,l.y+=t.lineHeight,x=null,L=0;continue}const J=t.chars[Z];if(!J)continue;x&&J.kerning[x]&&(l.x+=J.kerning[x]);const dt=__.pop()||{texture:St.EMPTY,line:0,charCode:0,prevSpaces:0,position:new $t};dt.texture=J.texture,dt.line=w,dt.charCode=Z,dt.position.x=Math.round(l.x+J.xOffset+this._letterSpacing/2),dt.position.y=Math.round(l.y+J.yOffset),dt.prevSpaces=L,o.push(dt),_=dt.position.x+Math.max(J.xAdvance-J.xOffset,J.texture.orig.width),l.x+=J.xAdvance+this._letterSpacing,O=Math.max(O,J.yOffset+J.texture.height),x=Z,A!==-1&&g>0&&l.x>g&&(++U,ta(o,1+A-U,1+it-A),it=A,A=-1,h.push(C),c.push(o.length>0?o[o.length-1].prevSpaces:0),b=Math.max(b,C),w++,l.x=0,l.y+=t.lineHeight,x=null,L=0)}const B=m[m.length-1];B!=="\r"&&B!==`
`&&(/(?:\s)/.test(B)&&(_=C),h.push(_),b=Math.max(b,_),c.push(-1));const H=[];for(let it=0;it<=w;it++){let k=0;this._align==="right"?k=b-h[it]:this._align==="center"?k=(b-h[it])/2:this._align==="justify"&&(k=c[it]<0?0:(b-h[it])/c[it]),H.push(k)}const D=o.length,q={},rt=[],at=this._activePagesMeshData;y.push(...at);for(let it=0;it<D;it++){const k=o[it].texture,Z=k.baseTexture.uid;if(!q[Z]){let J=y.pop();if(!J){const T=new Jw;let R,M;t.distanceFieldType==="none"?(R=new d_(St.EMPTY),M=Nt.NORMAL):(R=new d_(St.EMPTY,{program:Br.from(RC,CC),uniforms:{uFWidth:0}}),M=Nt.NORMAL_NPM);const z=new f_(T,R);z.blendMode=M,J={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:z,vertices:null,uvs:null,indices:null}}J.index=0,J.indexCount=0,J.vertexCount=0,J.uvsCount=0,J.total=0;const{_textureCache:dt}=this;dt[Z]=dt[Z]||new St(k.baseTexture),J.mesh.texture=dt[Z],J.mesh.tint=this._tintColor.value,rt.push(J),q[Z]=J}q[Z].total++}for(let it=0;it<at.length;it++)rt.includes(at[it])||this.removeChild(at[it].mesh);for(let it=0;it<rt.length;it++)rt[it].mesh.parent!==this&&this.addChild(rt[it].mesh);this._activePagesMeshData=rt;for(const it in q){const k=q[it],Z=k.total;if(!(k.indices?.length>6*Z)||k.vertices.length<f_.BATCHABLE_SIZE*2)k.vertices=new Float32Array(8*Z),k.uvs=new Float32Array(8*Z),k.indices=new Uint16Array(6*Z);else{const J=k.total,dt=k.vertices;for(let T=J*4*2;T<dt.length;T++)dt[T]=0}k.mesh.size=6*Z}for(let it=0;it<D;it++){const k=o[it];let Z=k.position.x+H[k.line]*(this._align==="justify"?k.prevSpaces:1);this._roundPixels&&(Z=Math.round(Z));const J=Z*n,dt=k.position.y*n,T=k.texture,R=q[T.baseTexture.uid],M=T.frame,z=T._uvs,N=R.index++;R.indices[N*6+0]=0+N*4,R.indices[N*6+1]=1+N*4,R.indices[N*6+2]=2+N*4,R.indices[N*6+3]=0+N*4,R.indices[N*6+4]=2+N*4,R.indices[N*6+5]=3+N*4,R.vertices[N*8+0]=J,R.vertices[N*8+1]=dt,R.vertices[N*8+2]=J+M.width*n,R.vertices[N*8+3]=dt,R.vertices[N*8+4]=J+M.width*n,R.vertices[N*8+5]=dt+M.height*n,R.vertices[N*8+6]=J,R.vertices[N*8+7]=dt+M.height*n,R.uvs[N*8+0]=z.x0,R.uvs[N*8+1]=z.y0,R.uvs[N*8+2]=z.x1,R.uvs[N*8+3]=z.y1,R.uvs[N*8+4]=z.x2,R.uvs[N*8+5]=z.y2,R.uvs[N*8+6]=z.x3,R.uvs[N*8+7]=z.y3}this._textWidth=b*n,this._textHeight=(l.y+t.lineHeight)*n;for(const it in q){const k=q[it];if(this.anchor.x!==0||this.anchor.y!==0){let T=0;const R=this._textWidth*this.anchor.x,M=this._textHeight*this.anchor.y;for(let z=0;z<k.total;z++)k.vertices[T++]-=R,k.vertices[T++]-=M,k.vertices[T++]-=R,k.vertices[T++]-=M,k.vertices[T++]-=R,k.vertices[T++]-=M,k.vertices[T++]-=R,k.vertices[T++]-=M}this._maxLineHeight=O*n;const Z=k.mesh.geometry.getBuffer("aVertexPosition"),J=k.mesh.geometry.getBuffer("aTextureCoord"),dt=k.mesh.geometry.getIndex();Z.data=k.vertices,J.data=k.uvs,dt.data=k.indices,Z.update(),J.update(),dt.update()}for(let it=0;it<o.length;it++)__.push(o[it]);this._font=t,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);const{distanceFieldRange:i,distanceFieldType:n,size:l}=fn.available[this._fontName];if(n!=="none"){const{a:o,b:h,c,d:p}=this.worldTransform,m=Math.sqrt(o*o+h*h),g=Math.sqrt(c*c+p*p),y=(Math.abs(m)+Math.abs(g))/2,x=this.fontSize/l,_=t._view.resolution;for(const b of this._activePagesMeshData)b.mesh.shader.uniforms.uFWidth=y*i*x*_}super._render(t)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const t=fn.available[this._fontName];if(!t)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(t){if(this.tint!==t){this._tintColor.setValue(t);for(let i=0;i<this._activePagesMeshData.length;i++)this._activePagesMeshData[i].mesh.tint=t}}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.dirty=!0)}get fontName(){return this._fontName}set fontName(t){if(!fn.available[t])throw new Error(`Missing BitmapFont "${t}"`);this._fontName!==t&&(this._fontName=t,this.dirty=!0)}get fontSize(){return this._fontSize??fn.available[this._fontName].size}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}destroy(t){const{_textureCache:i}=this,n=fn.available[this._fontName].distanceFieldType==="none"?y_:v_;n.push(...this._activePagesMeshData);for(const l of this._activePagesMeshData)this.removeChild(l.mesh);this._activePagesMeshData=[],n.filter(l=>i[l.mesh.texture.baseTexture.uid]).forEach(l=>{l.mesh.texture=St.EMPTY});for(const l in i)i[l].destroy(),delete i[l];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(t)}};MC.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const DC=[".xml",".fnt"],OC={extension:{type:pt.LoadParser,priority:ki.Normal},name:"loadBitmapFont",test(s){return DC.includes(Fe.extname(s).toLowerCase())},async testParse(s){return fu.test(s)||ip.test(s)},async parse(s,t,i){const n=fu.test(s)?fu.parse(s):ip.parse(s),{src:l}=t,{page:o}=n,h=[];for(let m=0;m<o.length;++m){const g=o[m].file;let y=Fe.join(Fe.dirname(l),g);y=$d(y,l),h.push(y)}const c=await i.load(h),p=h.map(m=>c[m]);return fn.install(n,p,!0)},async load(s,t){return(await gt.ADAPTER.fetch(s)).text()},unload(s){s.destroy()}};wt.add(OC);const rp=class Zs extends _n{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(t){return new Zs(Object.keys(Zs.defaultOptions).reduce((i,n)=>({...i,[n]:t[n]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(t=>{URL.revokeObjectURL(t.src),t.refs--,t.refs===0&&(t.fontFace&&document.fonts.delete(t.fontFace),delete Zs.availableFonts[t.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(t,i={}){const{availableFonts:n}=Zs;if(n[t]){const l=n[t];return this._fonts.push(l),l.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return gt.ADAPTER.fetch(t).then(l=>l.blob()).then(async l=>new Promise((o,h)=>{const c=URL.createObjectURL(l),p=new FileReader;p.onload=()=>o([c,p.result]),p.onerror=h,p.readAsDataURL(l)})).then(async([l,o])=>{const h=Object.assign({family:Fe.basename(t,Fe.extname(t)),weight:"normal",style:"normal",display:"auto",src:l,dataSrc:o,refs:1,originalUrl:t,fontFace:null},i);n[t]=h,this._fonts.push(h),this.styleID++;const c=new FontFace(h.family,`url(${h.src})`,{weight:h.weight,style:h.style,display:h.display});h.fontFace=c,await c.load(),document.fonts.add(c),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...t){const i=t.filter(n=>!this._overrides.includes(n));i.length>0&&(this._overrides.push(...i),this.styleID++)}removeOverride(...t){const i=t.filter(n=>this._overrides.includes(n));i.length>0&&(this._overrides=this._overrides.filter(n=>!i.includes(n)),this.styleID++)}toCSS(t){return[`transform: scale(${t})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((t,i)=>`${t}
            @font-face {
                font-family: "${i.family}";
                src: url('${i.dataSrc}');
                font-weight: ${i.weight};
                font-style: ${i.style};
                font-display: ${i.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(t){this._stylesheet!==t&&(this._stylesheet=t,this.styleID++)}normalizeColor(t){return Array.isArray(t)&&(t=xE(t)),typeof t=="number"?_E(t):t}dropShadowToCSS(){let t=this.normalizeColor(this.dropShadowColor);const i=this.dropShadowAlpha,n=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),l=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);t.startsWith("#")&&i<1&&(t+=(i*255|0).toString(16).padStart(2,"0"));const o=`${n}px ${l}px`;return this.dropShadowBlur>0?`text-shadow: ${o} ${this.dropShadowBlur}px ${t}`:`text-shadow: ${o} ${t}`}reset(){Object.assign(this,Zs.defaultOptions)}onBeforeDraw(){const{fontsDirty:t}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&t?new Promise(i=>setTimeout(i,100)):Promise.resolve()}get isSafari(){const{userAgent:t}=gt.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(t)}set fillGradientStops(t){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(t){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(t){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(t){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(t){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(t){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(t){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};rp.availableFonts={},rp.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let xd=rp;const su=class Ks extends la{constructor(t="",i={}){super(St.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const n=new Image,l=St.from(n,{scaleMode:gt.SCALE_MODE,resourceOptions:{autoLoad:!1}});l.orig=new Ht,l.trim=new Ht,this.texture=l;const o="http://www.w3.org/2000/svg",h="http://www.w3.org/1999/xhtml",c=document.createElementNS(o,"svg"),p=document.createElementNS(o,"foreignObject"),m=document.createElementNS(h,"div"),g=document.createElementNS(h,"style");p.setAttribute("width","10000"),p.setAttribute("height","10000"),p.style.overflow="hidden",c.appendChild(p),this.maxWidth=Ks.defaultMaxWidth,this.maxHeight=Ks.defaultMaxHeight,this._domElement=m,this._styleElement=g,this._svgRoot=c,this._foreignObject=p,this._foreignObject.appendChild(g),this._foreignObject.appendChild(m),this._image=n,this._loadImage=new Image,this._autoResolution=Ks.defaultAutoResolution,this._resolution=Ks.defaultResolution??gt.RESOLUTION,this.text=t,this.style=i}measureText(t){const{text:i,style:n,resolution:l}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},t);Object.assign(this._domElement,{innerHTML:i,style:n.toCSS(l)}),this._styleElement.textContent=n.toGlobalCSS(),document.body.appendChild(this._svgRoot);const o=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:h,height:c}=o;(h>this.maxWidth||c>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const p=Math.min(this.maxWidth,Math.ceil(h)),m=Math.min(this.maxHeight,Math.ceil(c));return this._svgRoot.setAttribute("width",p.toString()),this._svgRoot.setAttribute("height",m.toString()),i!==this._text&&(this._domElement.innerHTML=this._text),n!==this._style&&(Object.assign(this._domElement,{style:this._style?.toCSS(l)}),this._styleElement.textContent=this._style?.toGlobalCSS()),{width:p+n.padding*2,height:m+n.padding*2}}async updateText(t=!0){const{style:i,_image:n,_loadImage:l}=this;if(this.localStyleID!==i.styleID&&(this.dirty=!0,this.localStyleID=i.styleID),!this.dirty&&t)return;const{width:o,height:h}=this.measureText();n.width=l.width=Math.ceil(Math.max(1,o)),n.height=l.height=Math.ceil(Math.max(1,h)),this._updateID++;const c=this._updateID;await new Promise(p=>{l.onload=async()=>{if(c<this._updateID){p();return}await i.onBeforeDraw(),n.src=l.src,l.onload=null,l.src="",this.updateTexture(),p()};const m=new XMLSerializer().serializeToString(this._svgRoot);l.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(m)}`})}get source(){return this._image}updateTexture(){const{style:t,texture:i,_image:n,resolution:l}=this,{padding:o}=t,{baseTexture:h}=i;i.trim.width=i._frame.width=n.width/l,i.trim.height=i._frame.height=n.height/l,i.trim.x=-o,i.trim.y=-o,i.orig.width=i._frame.width-o*2,i.orig.height=i._frame.height-o*2,this._onTextureUpdate(),h.setRealSize(n.width,n.height,l),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}_renderCanvas(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(t)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds(t)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},Ks.defaultDestroyOptions,t),super.destroy(t);const i=null;this.ownsStyle&&this._style?.cleanFonts(),this._style=i,this._svgRoot?.remove(),this._svgRoot=i,this._domElement?.remove(),this._domElement=i,this._foreignObject?.remove(),this._foreignObject=i,this._styleElement?.remove(),this._styleElement=i,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=i,this._image.src="",this._image=i}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(t){this.updateText(!0);const i=mn(this.scale.x)||1;this.scale.x=i*t/this._image.width/this.resolution,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(t){this.updateText(!0);const i=mn(this.scale.y)||1;this.scale.y=i*t/this._image.height/this.resolution,this._height=t}get style(){return this._style}set style(t){this._style!==t&&(t=t||{},t instanceof xd?(this.ownsStyle=!1,this._style=t):t instanceof _n?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=xd.from(t)):(this.ownsStyle=!0,this._style=new xd(t)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(t){t=String(t===""||t===null||t===void 0?" ":t),t=this.sanitiseText(t),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}sanitiseText(t){return t.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};su.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},su.defaultMaxWidth=2024,su.defaultMaxHeight=2024,su.defaultAutoResolution=!0;function BC(){const s=hn.useRef(null),[t,i]=hn.useState(10),[n,l]=hn.useState(0),[o,h]=hn.useState(1),c=hn.useRef(null),p=hn.useRef(null);return hn.useEffect(()=>{let m=10;const g=new wx({width:1200,height:700,backgroundColor:658983,antialias:!0});s.current?.appendChild(g.view);let y=10,x=0,_=1,b=!1,w=!1,A=!1,C=0;const U=xt=>10+(xt-1)*5,O=()=>{for(;C>=U(_);)C-=U(_),_+=1,h(_),_%5===0&&Lt(),_%10===0&&(m+=3,y=Math.min(y+3,m),i(y))},L=new Le;L.beginFill(988969).drawRect(0,0,1200,700).endFill(),g.stage.addChild(L);const B=new Le;B.lineStyle(1,1714247,.3);for(let xt=0;xt<1200;xt+=40)B.moveTo(xt,0),B.lineTo(xt,700);for(let xt=0;xt<700;xt+=40)B.moveTo(0,xt),B.lineTo(1200,xt);g.stage.addChild(B);const H=[[100,150],[400,150],[400,350],[800,350],[800,550],[1100,550]],D=H.slice(0,-1).map((xt,Rt)=>{const[Ut,Bt]=xt,[vt,pe]=H[Rt+1],Ur=Math.hypot(vt-Ut,pe-Bt);return{x1:Ut,y1:Bt,x2:vt,y2:pe,len:Ur}}),q=new Le;q.lineStyle(70,1718866,.5),q.moveTo(H[0][0],H[0][1]);for(let xt=1;xt<H.length;xt++)q.lineTo(H[xt][0],H[xt][1]);g.stage.addChild(q);const rt=new Le;rt.lineStyle(50,2775674),rt.moveTo(H[0][0],H[0][1]);for(let xt=1;xt<H.length;xt++)rt.lineTo(H[xt][0],H[xt][1]);g.stage.addChild(rt);const at=new Le;at.lineStyle(4,4915199,.6),at.moveTo(H[0][0],H[0][1]);for(let xt=1;xt<H.length;xt++)at.lineTo(H[xt][0],H[xt][1]);g.stage.addChild(at);const it=new Le;it.beginFill(65416).drawCircle(H[0][0],H[0][1],25).endFill(),it.beginFill(52326).drawCircle(H[0][0],H[0][1],15).endFill(),g.stage.addChild(it);const k=new Le;k.beginFill(16729156).drawCircle(H[H.length-1][0],H[H.length-1][1],25).endFill(),k.beginFill(13382451).drawCircle(H[H.length-1][0],H[H.length-1][1],15).endFill(),g.stage.addChild(k);const Z=new Me,J=new Le;J.beginFill(0,.6).drawRect(0,0,1200,700).endFill(),Z.addChild(J);const dt=new vl("En attente de joueur",{fill:"#ffffff",fontSize:40,fontWeight:"bold",fontFamily:"Arial"});dt.anchor.set(.5),dt.position.set(600,350),Z.addChild(dt),Z.visible=!0,g.stage.addChild(Z);const T=new Me;g.stage.addChild(T);const R=new Me;g.stage.addChild(R);const M=new Me;g.stage.addChild(M);const z=new Map;function N(xt){return xt==="Archer"?{range:320,cooldownMs:800}:xt==="Swordsman"?{range:200,cooldownMs:250}:xt==="Mage"?{range:250,cooldownMs:1e3}:xt==="Healer"?{range:180,cooldownMs:5e3}:{range:180,cooldownMs:800}}function E(xt,Rt,Ut){const Bt=new Me,vt=new Le;if(Ut==="Archer"){vt.beginFill(1718879).drawCircle(0,0,16).endFill();const pe=new Le;pe.lineStyle(3,4915199).arc(0,0,20,0,Math.PI,!1),Bt.addChild(vt,pe)}else if(Ut==="Swordsman"){vt.beginFill(6236698).drawCircle(0,0,20).endFill();const pe=new Le;pe.lineStyle(3,16755200).moveTo(0,-12).lineTo(0,12),Bt.addChild(vt,pe)}else if(Ut==="Mage"){vt.beginFill(6697932).drawCircle(0,0,18).endFill();const pe=new Le;pe.beginFill(11176191).drawCircle(0,0,8).endFill(),Bt.addChild(vt,pe)}else if(Ut==="Healer"){vt.beginFill(3066993).drawCircle(0,0,18).endFill();const pe=new Le;pe.lineStyle(3,16777215).moveTo(-5,0).lineTo(5,0).moveTo(0,-5).lineTo(0,5),Bt.addChild(vt,pe)}return Bt.x=xt,Bt.y=Rt,Bt}function I(xt){for(const Rt of xt){let Ut=z.get(Rt.towerId);if(Ut){if(Ut.type!==Rt.towerType){R.removeChild(Ut.node),Ut.node.destroy({children:!0}),Ut.node=E(Rt.x,Rt.y,Rt.towerType),R.addChild(Ut.node),Ut.type=Rt.towerType;const{range:Bt,cooldownMs:vt}=N(Rt.towerType);Ut.range=Bt,Ut.cooldownMs=vt}}else{const Bt=E(Rt.x,Rt.y,Rt.towerType),vt=new Me;M.addChild(vt);const{range:pe,cooldownMs:Ur}=N(Rt.towerType);Ut={id:Rt.towerId,type:Rt.towerType,node:Bt,range:pe,cooldownMs:Ur,lastShotAt:0,beamLayer:vt},z.set(Rt.towerId,Ut),R.addChild(Bt)}}}let P=null;async function V(){try{const xt=await fetch("https://game-api-4dbs.onrender.com/state",{cache:"no-store"});if(!xt.ok)return;const Rt=await xt.json();if(Array.isArray(Rt?.towers)){const Bt=Rt.towers.map(vt=>({towerId:vt.towerId??vt.id,towerType:vt.towerType??vt.type,x:vt.x,y:vt.y}));I(Bt)}const Ut=Array.isArray(Rt?.events)&&Rt.events.some(Bt=>Bt.type==="START_WAVE");w=Ut||Array.isArray(Rt?.players)&&Rt.players.length>0,(Ut||w)&&!A&&(A=!0,Z.visible=!1,yt=Tt,console.log(" Partie dmarre !")),!w&&A&&(Z.visible=!0)}catch{}}function tt(){V(),P=window.setInterval(V,900)}function lt(){P&&clearInterval(P)}tt();const ot=[],ft=new Me;g.stage.addChild(ft);function ct(xt,Rt){let Ut=Rt;for(const Bt of D){if(Ut<=Bt.len){const vt=Ut/Bt.len;return xt.sprite.x=Bt.x1+(Bt.x2-Bt.x1)*vt,xt.sprite.y=Bt.y1+(Bt.y2-Bt.y1)*vt,!1}Ut-=Bt.len}return!0}function ut(xt=0,Rt=110){const Ut=new Me,Bt=new Le;Bt.beginFill(16724787).drawCircle(0,0,14).endFill(),Ut.addChild(Bt),ft.addChild(Ut);const vt={sprite:Ut,progress:xt,glow:new Le,rotation:0,speed:Rt,hp:3,reachedEnd:!1};ct(vt,vt.progress),ot.push(vt)}let yt=0;const Tt=1200,Mt=new vl(" MINI-BOSS ",{fill:"#ffcc00",fontSize:60,fontWeight:"bold",fontFamily:"Arial"});Mt.anchor.set(.5),Mt.position.set(600,100),Mt.visible=!1,g.stage.addChild(Mt);function Lt(){Mt.visible=!0,Mt.alpha=1;let xt=0;const Rt=Ut=>{xt+=Ut,xt>150&&(Mt.alpha-=.05,Mt.alpha<=0&&(Mt.visible=!1,g.ticker.remove(Rt)))};g.ticker.add(Rt)}function Et(xt){if(!(!w||!A)&&!(z.size===0||ot.length===0))for(const Rt of z.values()){if(Rt.type==="Healer"||xt-Rt.lastShotAt<Rt.cooldownMs)continue;let Ut=null,Bt=1/0;for(const vt of ot){if(vt.hp<=0)continue;const pe=Math.hypot(Rt.node.x-vt.sprite.x,Rt.node.y-vt.sprite.y);pe<=Rt.range&&pe<Bt&&(Bt=pe,Ut=vt)}Ut&&(Rt.lastShotAt=xt,Ut.hp-=1)}}g.ticker.add(()=>{if(b)return;const xt=g.ticker.deltaMS,Rt=performance.now();if(!w||!A){Z.visible=!0;return}else Z.visible=!1;yt+=xt;const Ut=Math.max(700,Tt-(_-1)*50);yt>=Ut&&(ut(0,100+_*6),yt=0);for(let Bt=0;Bt<ot.length;Bt++){const vt=ot[Bt];vt.progress+=vt.speed*(xt/1e3),vt.reachedEnd=ct(vt,vt.progress)}Et(Rt);for(let Bt=ot.length-1;Bt>=0;Bt--){const vt=ot[Bt];vt.hp<=0&&(ft.removeChild(vt.sprite),vt.sprite.destroy({children:!0}),ot.splice(Bt,1),x+=100,l(x),C+=1,O()),vt.reachedEnd&&(ft.removeChild(vt.sprite),vt.sprite.destroy({children:!0}),ot.splice(Bt,1),y=Math.max(0,y-1),i(y),y<=0&&(b=!0,_t.visible=!0))}});const _t=new Me;_t.visible=!1;const oe=new Le;oe.beginFill(0,.8).drawRect(0,0,1200,700).endFill(),_t.addChild(oe);const ue=new vl("PARTIE TERMINE",{fill:"#ff4444",fontSize:80,fontWeight:"bold",fontFamily:"Arial"});ue.anchor.set(.5),ue.position.set(600,300),_t.addChild(ue),g.stage.addChild(_t);const ai=()=>{b&&(b=!1,y=10,x=0,_=1,C=0,i(10),l(0),h(1),_t.visible=!1,Z.visible=!w)};return g.view.addEventListener("click",ai),()=>{g.view.removeEventListener("click",ai),lt(),g.destroy(!0,!0)}},[]),ge.jsx("div",{style:{width:"100vw",height:"100vh",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",background:"linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%)"},children:ge.jsxs("div",{style:{position:"relative"},children:[ge.jsx("div",{ref:s,style:{borderRadius:"12px",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",border:"2px solid #2a3f5f"}}),ge.jsxs("div",{style:{position:"absolute",top:20,left:20,display:"flex",gap:15,flexDirection:"column"},children:[ge.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(255,68,68,0.95) 0%, rgba(200,40,40,0.95) 100%)",padding:"12px 20px",borderRadius:12,border:"2px solid rgba(255,100,100,0.5)",boxShadow:"0 4px 15px rgba(255,68,68,0.4)",display:"flex",alignItems:"center",gap:10},children:[ge.jsx("span",{style:{fontSize:24},children:""}),ge.jsxs("div",{children:[ge.jsx("div",{style:{fontSize:12,color:"rgba(255,255,255,0.8)",fontWeight:600},children:"VIES"}),ge.jsx("div",{style:{fontSize:28,color:"#fff",fontWeight:"bold"},children:t})]})]}),ge.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(74,255,255,0.95) 0%, rgba(40,180,200,0.95) 100%)",padding:"12px 20px",borderRadius:12,border:"2px solid rgba(100,255,255,0.5)",boxShadow:"0 4px 15px rgba(74,255,255,0.4)",display:"flex",alignItems:"center",gap:10},children:[ge.jsx("span",{style:{fontSize:24},children:""}),ge.jsxs("div",{children:[ge.jsx("div",{style:{fontSize:12,color:"rgba(10,20,40,0.8)",fontWeight:600},children:"SCORE"}),ge.jsx("div",{style:{fontSize:28,color:"#0a1428",fontWeight:"bold"},children:n})]})]}),ge.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(138,43,226,0.95) 0%, rgba(100,30,180,0.95) 100%)",padding:"12px 20px",borderRadius:12,border:"2px solid rgba(180,100,255,0.5)",boxShadow:"0 4px 15px rgba(138,43,226,0.4)",display:"flex",alignItems:"center",gap:10},children:[ge.jsx("span",{style:{fontSize:24},children:""}),ge.jsxs("div",{children:[ge.jsx("div",{style:{fontSize:12,color:"rgba(255,255,255,0.8)",fontWeight:600},children:"VAGUE"}),ge.jsx("div",{style:{fontSize:28,color:"#fff",fontWeight:"bold"},children:o})]})]})]}),ge.jsxs("div",{style:{position:"absolute",top:20,right:20,display:"flex",gap:12,alignItems:"center"},children:[ge.jsx("div",{style:{background:"linear-gradient(135deg, rgba(0,255,136,0.95) 0%, rgba(0,180,100,0.95) 100%)",padding:"15px 30px",borderRadius:12,border:"2px solid rgba(100,255,200,0.5)",boxShadow:"0 4px 15px rgba(0,255,136,0.4)",fontSize:24,color:"#0a1428",fontWeight:"bold"},children:"Table interactive"}),ge.jsx("button",{onClick:async()=>{try{await fetch("https://game-api-4dbs.onrender.com/reset",{method:"POST"})}catch{}c.current?.(),p.current?.()},style:{cursor:"pointer",background:"linear-gradient(135deg, rgba(255,196,0,0.95) 0%, rgba(255,140,0,0.95) 100%)",color:"#0a1428",fontWeight:800,border:"2px solid rgba(255,200,120,0.7)",borderRadius:12,padding:"10px 18px",boxShadow:"0 4px 15px rgba(255,170,0,0.35)"},children:"RESET"})]})]})})}pT.createRoot(document.getElementById("root")).render(ge.jsx(hn.StrictMode,{children:ge.jsx(BC,{})}));
